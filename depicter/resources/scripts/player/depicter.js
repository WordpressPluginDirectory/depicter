((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Depicter=e()})(this,function(){function z(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}function V(t,e,i){var s=t;if(e.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object");e.set(t,i)}function H(t,e,i){(e=(t=>"symbol"==typeof(t=((t,e)=>{if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);if("object"!=typeof(i=i.call(t,e||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"))?t:t+"")(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}function N(e,t){var i,s=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)),s}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach(function(t){H(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function x(t,e){if(null==t)return{};var i,s=((t,e)=>{if(null==t)return{};var i,s={};for(i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;s[i]=t[i]}return s})(t,e);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(t),o=0;o<n.length;o++)i=n[o],-1===e.indexOf(i)&&{}.propertyIsEnumerable.call(t,i)&&(s[i]=t[i]);return s}class t{constructor(){this.listeners={},this._onceList=[],this.addEventListener=this.on,this.removeEventListener=this.off,this.debugEvents=!1}trigger(e,i,t=!1){this.debugEvents&&console.log(e,i),this.parentEmitter&&this.parentEmitter.trigger(t?this._transformName(e):e,i),this.listeners&&(this.listeners[e]&&(i?i.unshift(e):i=[e],this.listeners[e].forEach(t=>{t.callback.apply(t.context,i)})),this._onceList.length)&&(this._onceList=this._onceList.filter(t=>t.name!==e||(this.off(t.name,t.callback,t.context),!1)))}on(e,i,s,n=0){if(-1!==e.indexOf(","))e.replace(/\s*/g,"").split(",").forEach(t=>{this.on(t,i,s,n)});else{this.listeners[e]||(this.listeners[e]=[]);let t=this.listeners[e];t.find(t=>t.callback===i&&t.context===s&&t.priority===n)||(t.push({callback:i,priority:n,context:s}),t=t.sort((t,e)=>t.priority>e.priority?1:t.priority<e.priority?-1:0))}}once(t,e,i,s){this.on(t,e,i,s),this._onceList.push({name:t,callback:e,context:i})}off(t,e,i){var s;-1!==t.indexOf(",")?t.replace(/\s*/g,"").split(",").forEach(t=>{this.off(t,e,i)}):(s=this.listeners[t])&&s.length&&(this.listeners[t]=s.filter(t=>t.callback!==e||t.context!==i))}offOnContext(e){Object.keys(this.listeners).forEach(t=>{this.listeners[t]=this.listeners[t].filter(t=>t.context!==e)})}offByName(t){this.listeners[t]&&(this.listeners[t]=void 0)}_transformName(t){return this.eventPrefix&&this.eventPrefix.length?this.eventPrefix+t.slice(0,1).toUpperCase()+t.slice(1):t}}let g="depicter",F="ontouchstart"in document,v=Object.prototype.hasOwnProperty,R={mobile:767,tablet:1024},l=Object.keys(R).sort((t,e)=>R[e]-R[t]),a=()=>{let i=window.innerWidth,s=null,n=-1;return[...l].reverse().some((t,e)=>i<=R[t]&&(s=t,n=l.length-e-1,!0)),{name:s,index:n,size:R[s]||i}},W=null;window.addEventListener("resize",()=>{W=a().name});class j extends t{constructor(){super(),this.update=this.update.bind(this),window.addEventListener("resize",this.update),this.activeBreakpoint=null,this.activeBreakpointIndex=null,this.activeBreakpointSize=null,this.update()}update(){var{name:t,index:e,size:i}=a();t!==this.activeBreakpoint&&(this.activeBreakpoint=t,this.activeBreakpointIndex=e,this.activeBreakpointSize=i,this.trigger("breakpointChange",[t,e,i]))}}let u=new j,m=(t,e)=>{e=e||a().name;var i,s=l.indexOf(e);return Array.isArray(t)?0===t.length?void 0:!(i=t[s+1])&&!1!==i||"string"==typeof i&&!i.length?"none"===e?void 0:m(t,1<=s?l[s-1]:"none"):i:"object"==typeof(t="function"==typeof t.toObject?t.toObject():t)?v.call(t,e)?t[e]:"none"===e&&v.call(t,"default")?t.default:"none"===e?void 0:m(t,1<=s?l[s-1]:"none"):t},_=(e,i)=>{let s={};return e.hasAttribute("data-"+i)&&(s.none=e.getAttribute("data-"+i)),l.forEach(t=>{e.hasAttribute(`data-${t}-`+i)&&(s[t]=e.getAttribute(`data-${t}-`+i))}),s},$=(t,i)=>{let s=t;if(Array.isArray(t)){if(1===t.length)return void i(t[0]);s=t.slice()}else{if("string"!=typeof t||!t.includes(","))return void i(s);s=t.split(",").map(t=>t.trim())}let n;t=(t,e)=>{e=m(s,e);e!==n&&(n=e,i(e))};u.on("breakpointChange",t),t(0,u.activeBreakpoint)},q=(t,i)=>{let s=[],n;t.forEach((t,e)=>$(t,t=>{s[e]=t,clearTimeout(n),n=setTimeout(()=>{i(s)},1)}))};class Y{constructor(t,e,i){this.composer=t,this.options=i,this.view=e,this.innerContainers={},this.outerContainers={},this._matchHeightList=[],this.options.register({layout:"boxed",stretch:!0,width:900,height:500,columns:1,rtl:!1,keepAspectRatio:!0,delayBeforeResize:0,fullscreenMargin:"auto",sectionSizing:"fill",narrowLayoutOn:"mobile",overflowFix:!0,upscale:!1}),this.primaryContainer=document.createElement("div"),this.primaryContainer.classList.add(g+"-primary-container"),this.composer.element.appendChild(this.primaryContainer),this.viewContainer=document.createElement("div"),this.viewContainer.classList.add(g+"-view-container"),this.view.appendTo(this.viewContainer),this.primaryContainer.appendChild(this.viewContainer),this.view.options.has("reverse")&&(t=this.options.get("rtl"),this.view.options.set("reverse",t),t&&this.composer.element.classList.add(g+"-rtl"),this.options.observe("rtl",(t,e)=>{this.view.options.set("reverse",e),this.composer.element.classList[e?"add":"remove"](g+"-rtl")})),this.update=this.update.bind(this);i=((e,i)=>{let s;return function(){let t=arguments;clearTimeout(s),s=setTimeout(()=>{e.apply(this,t)},i)}})(this.update,30);window.addEventListener("resize",i,!1),requestAnimationFrame(this.update),this.update()}update(i){var t=this.options.get("delayBeforeResize");if(i&&0<t)clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this.update,t);else{var s=this.options.get(["layout","width","height","maxHeight","minHeight","fullscreenMargin","overflowFix","narrowLayoutOn","stretch"]);let e=this.composer.element;e.classList.add(g+"-layout-"+s.layout);var{name:n,size:i}=a();switch(n!==this.activeBreakpoint&&(this.activeBreakpoint&&this.composer.element.classList.remove(g+"-bp-"+this.activeBreakpoint),null!==(this.activeBreakpoint=n)&&this.composer.element.classList.add(g+"-bp-"+n),this.activeBreakpointSize=n?i:m(s.width,n)),this.isNarrow=n===s.narrowLayoutOn,this._lastNarrowStatus!==this.isNarrow&&(this.isNarrow?e.classList.add(g+"-narrow-layout"):e.classList.remove(g+"-narrow-layout"),this._lastNarrowStatus=this.isNarrow),s.layout){case"fullscreen":s.overflowFix&&document.body.classList.add(g+"-overflow-fix");case"fullwidth":s.stretch?(e.style.width=document.body.clientWidth+"px",requestAnimationFrame(()=>{e.style.marginLeft="";var t=-(window.scrollX+Math.ceil(e.getBoundingClientRect().left))+"px";e.style.marginLeft=t;try{e.style.setProperty("margin-left",t,"important")}catch{}e.style.width=document.body.clientWidth+"px"})):e.style.width="100%";break;case"boxed":e.style.maxWidth=m(s.width,n)+"px"}t=e.offsetWidth;if("fullscreen"===s.layout)if(s.stretch){i=window.innerHeight;if(s.fullscreenMargin){let t=window.scrollY+Math.ceil(e.getBoundingClientRect().top);"auto"===s.fullscreenMargin&&.75<=t/window.innerHeight?t=0:"auto"!==s.fullscreenMargin&&(t=s.fullscreenMargin),this.computedFullscreenMargin=t,e.style.height=i-t+"px"}else e.style.height=i+"px"}else e.style.height="100%";this.composer.trigger("beforeViewResize",[this]),this.view.resize(),this._updateMatchHeights(),t===this.width&&this.height===e.offsetHeight||(this.width=t,this.height=e.offsetHeight,this.composer.trigger("resize")),this.composer.trigger("layoutUpdate",[this])}}getContainer(t){var e,i;return"string"==typeof t&&(e=-1!==(t=t.toLowerCase()).indexOf("inner"),t=t.replace("inner",""),i=e?this.innerContainers:this.outerContainers,v.call(i,t)||this._createContainer(t,e),i[t])}onMatchHeight(t){this._matchHeightList.push(t),this._updateMatchHeights()}offMatchHeight(t){t.style.height="",this._matchHeightList.splice(this._matchHeightList.indexOf(t),1)}_updateMatchHeights(){this._matchHeightList.forEach(t=>{t.style.height=this.slider.view.height+"px"})}_createContainer(t,e){var i=document.createElement("div");i.classList.add(g+`-${t}-container`),(e?(this.hasInnerBox||(this.hasInnerBox=!0,this.innerBox=document.createElement("div"),this.innerBox.classList.add(g+"-inner-container"),this.innerBox.appendChild(this.viewContainer),(this.hasMidRow?this.midRow:this.primaryContainer).appendChild(this.innerBox)),this.innerContainers[t]=i,"right"===t||"left"===t?(this.hasInnerMidRow||(this.hasInnerMidRow=!0,this.innerMidRow=document.createElement("div"),this.innerMidRow.classList.add(g+"-mid-row"),this.innerMidRow.appendChild(this.viewContainer),this.innerBox.appendChild(this.innerMidRow)),this.innerMidRow):this.innerBox):(this.outerContainers[t]=i,"right"===t||"left"===t?(this.hasMidRow||(this.hasMidRow=!0,this.midRow=document.createElement("div"),this.midRow.classList.add(g+"-mid-row"),this.midRow.appendChild(this.hasInnerBox?this.innerBox:this.viewContainer),this.primaryContainer.appendChild(this.midRow)),this.midRow):this.primaryContainer)).appendChild(i),this.update()}}var X={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},U={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Z=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],G={CSS:{},springs:{}};function A(t,e,i){return Math.min(Math.max(t,e),i)}function K(t,e){return-1<t.indexOf(e)}function J(t,e){return t.apply(null,e)}var S={arr:function(t){return Array.isArray(t)},obj:function(t){return K(Object.prototype.toString.call(t),"Object")},pth:function(t){return S.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||S.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nil:function(t){return S.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return S.hex(t)||S.rgb(t)||S.hsl(t)},key:function(t){return!X.hasOwnProperty(t)&&!U.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function Q(t){t=/\(([^)]+)\)/.exec(t);return t?t[1].split(",").map(function(t){return parseFloat(t)}):[]}function tt(s,i){var t=Q(s),e=A(S.und(t[0])?1:t[0],.1,100),n=A(S.und(t[1])?100:t[1],.1,100),o=A(S.und(t[2])?10:t[2],.1,100),t=A(S.und(t[3])?0:t[3],.1,100),r=Math.sqrt(n/e),a=o/(2*Math.sqrt(n*e)),h=a<1?r*Math.sqrt(1-a*a):0,l=a<1?(a*r-t)/h:-t+r;function c(t){var e=i?i*t/1e3:t,e=a<1?Math.exp(-e*a*r)*(+Math.cos(h*e)+l*Math.sin(h*e)):(1+l*e)*Math.exp(-e*r);return 0===t||1===t?t:1-e}return i?c:function(){var t=G.springs[s];if(t)return t;for(var e=0,i=0;;)if(1===c(e+=1/6)){if(16<=++i)break}else i=0;return t=e*(1/6)*1e3,G.springs[s]=t}}function et(e){return void 0===e&&(e=10),function(t){return Math.ceil(A(t,1e-6,1)*e)*(1/e)}}var it=function(y,e,w,i){if(0<=y&&y<=1&&0<=w&&w<=1){var b=new Float32Array(11);if(y!==e||w!==i)for(var t=0;t<11;++t)b[t]=nt(.1*t,y,w);return function(t){return y===e&&w===i||0===t||1===t?t:nt(s(t),e,i)}}function s(t){for(var e=0,i=1;10!==i&&b[i]<=t;++i)e+=.1;var s=e+.1*((t-b[--i])/(b[i+1]-b[i])),n=ot(s,y,w);if(.001<=n){for(var o=t,r=s,a=y,h=w,l=0;l<4;++l){var c=ot(r,a,h);if(0===c)return r;r-=(nt(r,a,h)-o)/c}return r}if(0===n)return s;for(var d,p,u=t,m=e,g=e+.1,v=y,_=w,f=0;0<(d=nt(p=m+(g-m)/2,v,_)-u)?g=p:m=p,1e-7<Math.abs(d)&&++f<10;);return p}};function st(t,e){return 1-3*e+3*t}function nt(t,e,i){return((st(e,i)*t+(3*i-6*e))*t+3*e)*t}function ot(t,e,i){return 3*st(e,i)*t*t+2*(3*i-6*e)*t+3*e}rt={linear:function(){return function(t){return t}}},at={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Expo:function(){return function(t){return t?Math.pow(2,10*t-10):0}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===e&&(e=.5);var i=A(t=void 0===t?1:t,1,10),s=A(e,.1,2);return function(t){return 0===t||1===t?t:-i*Math.pow(2,10*(t-1))*Math.sin((t-1-s/(2*Math.PI)*Math.asin(1/i))*(2*Math.PI)/s)}}},["Quad","Cubic","Quart","Quint"].forEach(function(t,e){at[t]=function(){return function(t){return Math.pow(t,e+2)}}}),Object.keys(at).forEach(function(t){var s=at[t];rt["easeIn"+t]=s,rt["easeOut"+t]=function(e,i){return function(t){return 1-s(e,i)(1-t)}},rt["easeInOut"+t]=function(e,i){return function(t){return t<.5?s(e,i)(2*t)/2:1-s(e,i)(-2*t+2)/2}},rt["easeOutIn"+t]=function(e,i){return function(t){return t<.5?(1-s(e,i)(1-2*t))/2:(s(e,i)(2*t-1)+1)/2}}});var rt,at,ht=rt;function lt(t,e){if(S.fnc(t))return t;var i=t.split("(")[0],s=ht[i],n=Q(t);switch(i){case"spring":return tt(t,e);case"cubicBezier":return J(it,n);case"steps":return J(et,n);default:return J(s,n)}}function ct(t){try{return document.querySelectorAll(t)}catch(t){}}function dt(t,e){for(var i,s=t.length,n=2<=arguments.length?e:void 0,o=[],r=0;r<s;r++)r in t&&(i=t[r],e.call(n,i,r,t))&&o.push(i);return o}function pt(t){return t.reduce(function(t,e){return t.concat(S.arr(e)?pt(e):e)},[])}function ut(t){return S.arr(t)?t:(t=S.str(t)?ct(t)||t:t)instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t]}function mt(t,e){return t.some(function(t){return t===e})}function gt(t){var e,i={};for(e in t)i[e]=t[e];return i}function vt(t,e){var i,s=gt(t);for(i in t)s[i]=(e.hasOwnProperty(i)?e:t)[i];return s}function _t(t,e){var i,s=gt(t);for(i in e)s[i]=(S.und(t[i])?e:t)[i];return s}function ft(t){var e,i,s,n,o,r,a;return S.rgb(t)?(e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(i=t))?"rgba("+e[1]+",1)":i:S.hex(t)?(e=(e=t).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,s){return e+e+i+i+s+s}),e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),"rgba("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+",1)"):S.hsl(t)?(i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(i=t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(i),t=parseInt(i[1],10)/360,r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100,i=i[4]||1,0==r?s=n=o=a:(s=h(r=2*a-(a=a<.5?a*(1+r):a+r-a*r),a,t+1/3),n=h(r,a,t),o=h(r,a,t-1/3)),"rgba("+255*s+","+255*n+","+255*o+","+i+")"):void 0;function h(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}}function k(t){t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(t)return t[1]}function yt(t,e){return S.fnc(t)?t(e.target,e.id,e.total):t}function o(t,e){return t.getAttribute(e)}function wt(t,e,i){var s,n,o;return mt([i,"deg","rad","turn"],k(e))?e:(s=G.CSS[e+i],S.und(s)?(n=document.createElement(t.tagName),(t=t.parentNode&&t.parentNode!==document?t.parentNode:document.body).appendChild(n),n.style.position="absolute",n.style.width=100+i,o=100/n.offsetWidth,t.removeChild(n),t=o*parseFloat(e),G.CSS[e+i]=t):s)}function bt(t,e,i){var s;if(e in t.style)return s=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=t.style[e]||getComputedStyle(t).getPropertyValue(s)||"0",i?wt(t,e,i):e}function xt(t,e){return S.dom(t)&&!S.inp(t)&&(!S.nil(o(t,e))||S.svg(t)&&t[e])?"attribute":S.dom(t)&&mt(Z,e)?"transform":S.dom(t)&&"transform"!==e&&bt(t,e)?"css":null!=t[e]?"object":void 0}function St(t){if(S.dom(t)){for(var e,i=t.style.transform||"",s=/(\w+)\(([^)]*)\)/g,n=new Map;e=s.exec(i);)n.set(e[1],e[2]);return n}}function At(t,e,i,s){var n=K(e,"scale")?1:0+(K(n=e,"translate")||"perspective"===n?"px":K(n,"rotate")||K(n,"skew")?"deg":void 0),o=St(t).get(e)||n;return i&&(i.transforms.list.set(e,o),i.transforms.last=e),s?wt(t,o,s):o}function kt(t,e,i,s){switch(xt(t,e)){case"transform":return At(t,e,s,i);case"css":return bt(t,e,i);case"attribute":return o(t,e);default:return t[e]||0}}function Ct(t,e){var i=/^(\*=|\+=|-=)/.exec(t);if(!i)return t;var s=k(t)||0,n=parseFloat(e),o=parseFloat(t.replace(i[0],""));switch(i[0][0]){case"+":return n+o+s;case"-":return n-o+s;case"*":return n*o+s}}function Lt(t,e){var i;return S.col(t)?ft(t):/\s/g.test(t)?t:(i=(i=k(t))?t.substr(0,t.length-i.length):t,e?i+e:i)}function Et(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function It(t){for(var e,i=t.points,s=0,n=0;n<i.numberOfItems;n++){var o=i.getItem(n);0<n&&(s+=Et(e,o)),e=o}return s}function Pt(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*o(t,"r");case"rect":return 2*o(i=t,"width")+2*o(i,"height");case"line":return Et({x:o(i=t,"x1"),y:o(i,"y1")},{x:o(i,"x2"),y:o(i,"y2")});case"polyline":return It(t);case"polygon":return e=t.points,It(t)+Et(e.getItem(e.numberOfItems-1),e.getItem(0))}var e,i}function Tt(t,e){var e=e||{},t=e.el||(t=>{for(var e=t.parentNode;S.svg(e)&&S.svg(e.parentNode);)e=e.parentNode;return e})(t),i=t.getBoundingClientRect(),s=o(t,"viewBox"),n=i.width,i=i.height,e=e.viewBox||(s?s.split(" "):[0,0,n,i]);return{el:t,viewBox:e,x:+e[0],y:+e[1],w:n,h:i,vW:e[2],vH:e[3]}}function Ot(t,e){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,s=Lt(S.pth(t)?t.totalLength:t,e)+"";return{original:s,numbers:s.match(i)?s.match(i).map(Number):[0],strings:S.str(t)||e?s.split(i):[]}}function Mt(t){return dt(t?pt(S.arr(t)?t.map(ut):ut(t)):[],function(t,e,i){return i.indexOf(t)===e})}function Dt(t){var i=Mt(t);return i.map(function(t,e){return{target:t,id:e,total:i.length,transforms:{list:St(t)}}})}function Bt(e){for(var i=dt(pt(e.map(function(t){return Object.keys(t)})),function(t){return S.key(t)}).reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]),n={},t=0;t<i.length;t++)(t=>{var s=i[t];n[s]=e.map(function(t){var e,i={};for(e in t)S.key(e)?e==s&&(i.value=t[e]):i[e]=t[e];return i})})(t);return n}function zt(t,e){var i,s=[],n=e.keyframes;for(i in e=n?_t(Bt(n),e):e)S.key(i)&&s.push({name:i,tweens:((t,i)=>{var e,s=gt(i),n=(/^spring/.test(s.easing)&&(s.duration=tt(s.easing)),S.arr(t)&&(2===(e=t.length)&&!S.obj(t[0])?t={value:t}:S.fnc(i.duration)||(s.duration=i.duration/e)),S.arr(t)?t:[t]);return n.map(function(t,e){t=S.obj(t)&&!S.pth(t)?t:{value:t};return S.und(t.delay)&&(t.delay=e?0:i.delay),S.und(t.endDelay)&&(t.endDelay=e===n.length-1?i.endDelay:0),t}).map(function(t){return _t(t,s)})})(e[i],t)});return s}function Vt(a,h){var l;return a.tweens.map(function(t){var t=((t,e)=>{var i,s={};for(i in t){var n=yt(t[i],e);S.arr(n)&&1===(n=n.map(function(t){return yt(t,e)})).length&&(n=n[0]),s[i]=n}return s.duration=parseFloat(s.duration),s.delay=parseFloat(s.delay),s})(t,h),e=t.value,i=S.arr(e)?e[1]:e,s=k(i),n=kt(h.target,a.name,s,h),o=l?l.to.original:n,r=S.arr(e)?e[0]:o,n=k(r)||k(n),s=s||n;return S.und(i)&&(i=o),t.from=Ot(r,s),t.to=Ot(Ct(i,r),s),t.start=l?l.end:0,t.end=t.start+t.delay+t.duration+t.endDelay,t.easing=lt(t.easing,t.duration),t.isPath=S.pth(e),t.isPathTargetInsideSVG=t.isPath&&S.svg(h.target),t.isColor=S.col(t.from.original),t.isColor&&(t.round=1),l=t})}var Ht={css:function(t,e,i){return t.style[e]=i},attribute:function(t,e,i){return t.setAttribute(e,i)},object:function(t,e,i){return t[e]=i},transform:function(t,e,i,s,n){var o;s.list.set(e,i),e!==s.last&&!n||(o="",s.list.forEach(function(t,e){o+=e+"("+t+") "}),t.style.transform=o)}};function Nt(t,r){Dt(t).forEach(function(t){for(var e in r){var i=yt(r[e],t),s=t.target,n=k(i),o=kt(s,e,n,t),i=Ct(Lt(i,n||k(o)),o),n=xt(s,e);Ht[n](s,e,i,t.transforms,!0)}})}function Ft(t,e){return dt(pt(t.map(function(o){return e.map(function(t){var e,i,s=o,n=xt(s.target,t.name);if(n)return i=(e=Vt(t,s))[e.length-1],{type:n,property:t.name,animatable:s,tweens:e,duration:i.end,delay:e[0].delay,endDelay:i.endDelay}})})),function(t){return!S.und(t)})}function Rt(t,e){function i(t){return t.timelineOffset||0}var s=t.length,n={};return n.duration=s?Math.max.apply(Math,t.map(function(t){return i(t)+t.duration})):e.duration,n.delay=s?Math.min.apply(Math,t.map(function(t){return i(t)+t.delay})):e.delay,n.endDelay=s?n.duration-Math.max.apply(Math,t.map(function(t){return i(t)+t.duration-t.endDelay})):e.endDelay,n}var Wt=0;var jt,w=[],$t=("undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){C.suspendWhenDocumentHidden&&(Yt()?jt=cancelAnimationFrame(jt):(w.forEach(function(t){return t._onDocumentVisibility()}),$t()))}),function(){!(jt||Yt()&&C.suspendWhenDocumentHidden)&&0<w.length&&(jt=requestAnimationFrame(qt))});function qt(t){for(var e=w.length,i=0;i<e;){var s=w[i];s.paused?(w.splice(i,1),e--):(s.tick(t),i++)}jt=0<i?requestAnimationFrame(qt):void 0}function Yt(){return document&&document.hidden}function C(t){var h,l=0,c=0,d=0,p=0,u=null;function m(t){var e=window.Promise&&new Promise(function(t){return u=t});t.finished=e}e=vt(X,t=t=void 0===t?{}:t),i=zt(s=vt(U,t),t),t=Dt(t.targets),s=Rt(i=Ft(t,i),s),n=Wt,Wt++;var e,i,s,n,S=_t(e,{id:n,children:[],animatables:t,animations:i,duration:s.duration,delay:s.delay,endDelay:s.endDelay});function g(){var t=S.direction;"alternate"!==t&&(S.direction="normal"!==t?"normal":"reverse"),S.reversed=!S.reversed,h.forEach(function(t){return t.reversed=S.reversed})}function v(t){return S.reversed?S.duration-t:t}function o(){l=0,c=v(S.currentTime)*(1/C.speed)}function _(t,e){e&&e.seek(t-e.timelineOffset)}function f(e){for(var t=0,i=S.animations,s=i.length;t<s;){for(var n=i[t],o=n.animatable,r=n.tweens,a=r.length-1,h=r[a],a=(a&&(h=dt(r,function(t){return e<t.end})[0]||h),A(e-h.start-h.delay,0,h.duration)/h.duration),l=isNaN(a)?1:h.easing(a),c=h.to.strings,d=h.round,p=[],u=h.to.numbers.length,m=void 0,g=0;g<u;g++){var v=void 0,_=h.to.numbers[g],f=h.from.numbers[g]||0,v=h.isPath?((e,i,t)=>{function s(t){return e.el.getPointAtLength(1<=i+(t=void 0===t?0:t)?i+t:0)}var n=Tt(e.el,e.svg),o=s(),r=s(-1),a=s(1),h=t?1:n.w/n.vW,l=t?1:n.h/n.vH;switch(e.property){case"x":return(o.x-n.x)*h;case"y":return(o.y-n.y)*l;case"angle":return 180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}})(h.value,l*_,h.isPathTargetInsideSVG):f+l*(_-f);!d||h.isColor&&2<g||(v=Math.round(v*d)/d),p.push(v)}var y=c.length;if(y)for(var m=c[0],w=0;w<y;w++){c[w];var b=c[w+1],x=p[w];isNaN(x)||(m+=b?x+b:x+" ")}else m=p[0];Ht[n.type](o.target,n.property,m,o.transforms),n.currentValue=m,t++}}function y(t){S[t]&&!S.passThrough&&S[t](S)}function r(t){var e=S.duration,i=S.delay,s=e-S.endDelay,n=v(t);if(S.progress=A(n/e*100,0,100),S.reversePlayback=n<S.currentTime,h){var o=n;if(S.reversePlayback)for(var r=p;r--;)_(o,h[r]);else for(var a=0;a<p;a++)_(o,h[a])}!S.began&&0<S.currentTime&&(S.began=!0,y("begin")),!S.loopBegan&&0<S.currentTime&&(S.loopBegan=!0,y("loopBegin")),n<=i&&0!==S.currentTime&&f(0),(s<=n&&S.currentTime!==e||!e)&&f(e),i<n&&n<s?(S.changeBegan||(S.changeBegan=!0,S.changeCompleted=!1,y("changeBegin")),y("change"),f(n)):S.changeBegan&&(S.changeCompleted=!0,S.changeBegan=!1,y("changeComplete")),S.currentTime=A(n,0,e),S.began&&y("update"),e<=t&&(c=0,S.remaining&&!0!==S.remaining&&S.remaining--,S.remaining?(l=d,y("loopComplete"),S.loopBegan=!1,"alternate"===S.direction&&g()):(S.paused=!0,S.completed||(S.completed=!0,y("loopComplete"),y("complete"),!S.passThrough&&"Promise"in window&&(u(),m(S)))))}return m(S),S.reset=function(){var t=S.direction;S.passThrough=!1,S.currentTime=0,S.progress=0,S.paused=!0,S.began=!1,S.loopBegan=!1,S.changeBegan=!1,S.completed=!1,S.changeCompleted=!1,S.reversePlayback=!1,S.reversed="reverse"===t,S.remaining=S.loop,h=S.children;for(var e=p=h.length;e--;)S.children[e].reset();(S.reversed&&!0!==S.loop||"alternate"===t&&1===S.loop)&&S.remaining++,f(S.reversed?S.duration:0)},S._onDocumentVisibility=o,S.set=function(t,e){return Nt(t,e),S},S.tick=function(t){r(((d=t)+(c-(l=l||d)))*C.speed)},S.seek=function(t){r(v(t))},S.pause=function(){S.paused=!0,o()},S.play=function(){S.paused&&(S.completed&&S.reset(),S.paused=!1,w.push(S),o(),$t())},S.reverse=function(){g(),S.completed=!S.reversed,o()},S.restart=function(){S.reset(),S.play()},S.remove=function(t){Ut(Mt(t),S)},S.reset(),S.autoplay&&S.play(),S}function Xt(t,e){for(var i=e.length;i--;)mt(t,e[i].animatable.target)&&e.splice(i,1)}function Ut(t,e){var i=e.animations,s=e.children;Xt(t,i);for(var n=s.length;n--;){var o=s[n],r=o.animations;Xt(t,r),r.length||o.children.length||s.splice(n,1)}i.length||s.length||e.pause()}C.version="3.2.1",C.speed=1,C.suspendWhenDocumentHidden=!0,C.running=w,C.remove=function(t){for(var e=Mt(t),i=w.length;i--;)Ut(e,w[i])},C.get=kt,C.set=Nt,C.convertPx=wt,C.path=function(t,e){var i=S.str(t)?ct(t)[0]:t,s=e||100;return function(t){return{property:t,el:i,svg:Tt(i),totalLength:Pt(i)*(s/100)}}},C.setDashoffset=function(t){var e=Pt(t);return t.setAttribute("stroke-dasharray",e),e},C.stagger=function(t,e){var a=(e=void 0===e?{}:e).direction||"normal",h=e.easing?lt(e.easing):null,l=e.grid,c=e.axis,d=e.from||0,p="first"===d,u="center"===d,m="last"===d,g=S.arr(t),v=g?parseFloat(t[0]):parseFloat(t),_=g?parseFloat(t[1]):0,f=k(g?t[1]:t)||0,y=e.start||0+(g?v:0),w=[],b=0;return function(t,e,i){if(p&&(d=0),u&&(d=(i-1)/2),m&&(d=i-1),!w.length){for(var s,n,o,r=0;r<i;r++)l?(s=u?(l[0]-1)/2:d%l[0],n=u?(l[1]-1)/2:Math.floor(d/l[0]),s=s-r%l[0],n=n-Math.floor(r/l[0]),o=Math.sqrt(s*s+n*n),"x"===c&&(o=-s),w.push(o="y"===c?-n:o)):w.push(Math.abs(d-r)),b=Math.max.apply(Math,w);h&&(w=w.map(function(t){return h(t/b)*b})),"reverse"===a&&(w=w.map(function(t){return c?t<0?-1*t:-t:Math.abs(b-t)}))}return y+(g?(_-v)/b:v)*(Math.round(100*w[e])/100)+f}},C.timeline=function(r){var a=C(r=void 0===r?{}:r);return a.duration=0,a.add=function(t,e){var i=w.indexOf(a),s=a.children;function n(t){t.passThrough=!0}-1<i&&w.splice(i,1);for(var o=0;o<s.length;o++)n(s[o]);i=_t(t,vt(U,r)),i.targets=i.targets||r.targets,t=a.duration,i.autoplay=!1,i.direction=a.direction,i.timelineOffset=S.und(e)?t:Ct(e,t),n(a),a.seek(i.timelineOffset),e=C(i),n(e),s.push(e),t=Rt(s,r);return a.delay=t.delay,a.endDelay=t.endDelay,a.duration=t.duration,a.seek(0),a.reset(),a.autoplay&&a.play(),a},a},C.easing=lt,C.penner=ht,C.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};class Zt extends t{constructor(){super(),this.sections=[],this.sectionsCount=0,this._index=-1,this.indexes=[],this.currentSection=null,this.eventPrefix="view",this._loop=!1,this._size=0}get index(){return this._index}set index(t){t!==this._index&&(this._index=t,this.currentSection=this.sections[t],this.trigger("indexChange",[t],!0))}get loop(){return this._loop}set loop(t){this._loop!==t&&(this._loop=t,this.update())}get size(){return this._size}set size(t){this._size!==t&&(this._size=t,this.update())}get count(){return this.sectionsCount}appendSection(t,e=!0){this.sections.push(t),this._afterSectionAdd(t,e)}prependSection(t,e=!0){this.sections.unshift(t),this._afterSectionAdd(t,e)}insertSectionAfter(t,e,i=!0){this.insertSectionAt(t,this.sections.indexOf(e),i)}insertSectionAt(t,e,i=!0){e<0||(this.sections.splice(e,0,t),this._afterSectionAdd(t,i))}removeSection(t,e=!0){return this.removeSectionByIndex(this.section.indexOf(t),e)}removeSectionByIndex(t,e=!0){return!(t<0)&&((t=this.sections.splice(t,1)).unmount(),this.trigger("sectionRemove",t),e&&this.update(),t[0])}update(){this.trigger("update",null,!0)}updateSectionsIndex(){this.sections.forEach((t,e)=>{t.index=e})}_afterSectionAdd(t,e){this.sectionsCount=this.sections.length,t.mount(this),this.updateSectionsIndex(),e&&this.update(),this.trigger("sectionAdd",[t])}}class Gt extends Zt{constructor(){super(),this.element=document.createElement("div"),this.element.classList.add(g+"-view"),this.sectionsContainer=document.createElement("div"),this.sectionsContainer.classList.add(g+"-sections"),this.element.appendChild(this.sectionsContainer),this.sizeProp="width"}resize(){var t=this.element.offsetWidth,e=this.element.offsetHeight;if(t===this.width&&e===this.height)return!1;this.width=t,this.height=e;var i=this[this.sizeProp];return this.trigger("resize",[t,e],!0),this.size!==i&&0!==i&&(this.size=this[this.sizeProp],!0)}appendTo(t){t.appendChild(this.element),this.resize(),this.trigger("elementAppend",[t],!0)}appendSection(t){this.sectionsContainer.appendChild(t.element),super.appendSection(t)}prependSection(t){this.sectionsContainer.hasChildNodes?this.sectionsContainer.insertBefore(t.element,this.sectionsContainer.firstChild):this.sectionsContainer.appendChild(t.element),super.prependSection(t)}insertSectionAt(t,e){e<0||(this.sectionsContainer.insertBefore(t.element,this.sectionsContainer.childNodes[e]),super.insertSectionAt(t,e))}removeSectionByIndex(t){return!(t<0)&&(this.sections[t].element.remove(),super.removeSectionByIndex(t))}}class Kt extends Gt{constructor(){super(),this.activeEnteringSection=!1,this.activeFactor=.8,this.visibleIndex=0,this.visibleIndexes=[],this.scrollable=!0,this._size=0,this._position=0,this._length=0}get position(){return this._position}set position(t){this._position!==t&&(this.scrollDirection=t>this._position?"forward":"backward",this._loop?this._position=this.normalizePosition(t):this._position=t,this.update(!1),this.trigger("scroll",[this._position]))}get nominalLength(){return this._length-this._size}get length(){return this._length}get size(){return this._size}set size(t){if(this._size!==t){var e=this._size?t/this._size:1;this._size=t;let i=0;this.sections.some((t,e)=>!(e<this.visibleIndex&&(i+=t.space,1))),this._position=(this._position-i)*e+i}this.update()}arrange(){var t=this._length;this._length=0,this.sections.forEach((t,e)=>{t.index=e,t.position=this._length,t.offset=this._length,t.calculateSize(this.options.get("dir"),!0),this._length+=t.size+t.space}),this._sectionsCount&&!this._loop&&(this._length-=this.sections[this._sectionsCount-1].space),this.trigger("arrange",null,!0),this._length!==t&&this.trigger("lengthChange",[this._length],this)}locateInLoop(){if(this._loop){let e=0,i=-1,s=0,n=0,o;if(this.sections.some(t=>!!t.inRangeTest(this._position)&&(o=t,!0)),o){for(let t=0;t!==this._sectionsCount;t+=1){var r=this.sections[(t+o.index)%this._sectionsCount];if(r.offset=o.position+e,e+=r.size+r.space,-1!==(i=-1===i&&r.inRangeTest((this._position+this._size)%this._length)?(this._length-e)/2:i)&&r.inRangeTest((this._position+i+this._size)%this._length)){s=(t+1+o.index)%this._sectionsCount,n=this._sectionsCount-(t+1);break}}e=0;for(let t=n-1;0<=t;--t){var a=this.sections[(t+s)%this._sectionsCount];e+=a.size+a.space,a.offset=o.position-e}this.trigger("loopUpdate",null,!0)}}}update(t=!0){this._sectionsCount=this.sections.length,t&&this.arrange(),this.locateInLoop(),this.updateStatusAndIndex(),this.trigger("update",[this._position],!0)}updateStatusAndIndex(){let n=[],o=[],r,a=Math.round(this._position);this.sections.forEach(t=>{let e="in";t.offset+t.size<=a?e="passed":t.offset<a?e="forward"===this.scrollDirection?"leaving":"entering":t.offset-t.space>=a+this._size?e="pending":t.offset+t.size-t.space>a+this._size&&(e="forward"!==this.scrollDirection?"leaving":"entering"),t.inRangeTest(a)&&(r=t.index),"passed"!==e&&"pending"!==e&&o.push(t.index),t.status=e;var i=t.offset-a,s=t.offset+t.size-t.space-a-this._size;t.pendingOffset=i<=0?i:Math.max(0,s),this.activeEnteringSection?(i=t.size*this.activeFactor,t.active=t.offset+i>=a&&t.offset+t.size-i<=a+this._size+t.space):t.active="in"===e,t.active&&n.push(t.index)}),o=o.sort((t,e)=>this.sections[t].offset-this.sections[e].offset),this.visibleIndexes.toString()!==o.toString()&&(this.visibleIndexes=o,this.trigger("visibleIndexesChange",[this.visibleIndexes],!0)),this.visibleIndex!==r&&(this.visibleIndex=r,this.trigger("visibleIndexChange",[this.visibleIndex],!0)),n=n.sort((t,e)=>this.sections[t].offset-this.sections[e].offset),this.indexes.toString()!==n.toString()&&(this.indexes=n,this.trigger("indexesChange",[this.indexes]));var t=this.indexes[0];this.index!==t&&(this.index=t,this.trigger("indexChange",[this.index]))}normalizePositionByDirection(t,e="auto"){t=this._loop?this.normalizePosition(t):Math.min(t,this._length-this._size);let i=0;if(this._loop&&"off"!==e){var s=this._position,n=t,o=s<n?n-s:this._length-s+n,r=s<n?n-this._length-s:n-s;switch(e){case"auto":i=Math.abs(r)<Math.abs(o)?r:o;break;case"backward":i=r;break;default:i=o}return this._position+i}return t}scrollTo(t,e=!0,i=1,s="auto",n){this.killScrollAnimation(),t=this.normalizePositionByDirection(t,s),e?((n=b(b({easing:"easeOutExpo",duration:1e3*i},n),{},{complete:()=>{this.animating=!1,this.trigger("scrollToAnimationEnd",void 0,!0)}})).position=t,this.animating=!0,C(b({targets:this},n))):this.position=t}killScrollAnimation(){this.animating&&(C.remove(this),this.animating=!1)}goToSection(t,e=!0,i=1,s="auto",n){this.scrollTo(t.position,e,i,s,n)}goToIndex(t,e=!0,i=1,s="auto",n){t>=this.sectionsCount||this.goToSection(this.sections[t],e,i,s,n)}getIndexAtPosition(i){this._loop&&(i=this.normalizePosition(i)),i%=this._length;let s=-1;return this.sections.some((t,e)=>!!t.inRangeTest(i,this.activeEnteringSection?this.activeFactor:1)&&(s=e,!0)),-1===s?this._loop?0:this.sectionsCount-1:s}getIndexesAtPosition(t){t=this._loop?this.normalizePosition(t):Math.min(t,this._length-this._size);var i,s=this.getIndexAtPosition(t),t=t+this._size,n=t>this._length?t%this._length:t,o=[];for(let e=0;e!==this._sectionsCount;e+=1){let t;if(this._loop)t=this.sections[(e+s)%this._sectionsCount];else{if(e+s>=this._sectionsCount)return o;t=this.sections[e+s]}if(o.push(t.index),t.inRangeTest(n))return this.activeEnteringSection&&1!==o.length&&(i=t.size+t.space,t.position+i-i*this.activeFactor>=n||o.pop()),o}return o}normalizePosition(t){return(t%=this._length)<0&&(t+=this.length),t}}class Jt{constructor(t){this._drag=t,this._dragLog=Math.log(t),this._x=0,this._v=0,this._startTime=0}set(t,e){this._x=t,this._v=e,this._startTime=Date.now()}x(t){return void 0===t&&(t=(Date.now()-this._startTime)/1e3),this._x+this._v*this._drag**t/this._dragLog-this._v/this._dragLog}dx(){var t=(Date.now()-this._startTime)/1e3;return this._v*this._drag**t}done(){return Math.abs(this.dx())<1}}let n=.001;function Qt(t,e,i){return e-i<t&&t<e+i}function te(t,e){return Qt(t,0,e)}class ee{constructor(t,e,i){this._m=t,this._k=e,this._c=i,this._solution=null,this._endPosition=0,this._startTime=0}_solve(t,o){var r=this._c,a=this._m,e=this._k,h=r*r-4*a*e;if(0==h){let i=-r/(2*a),s=t,n=o/(i*t);return{x(t){return(s+n*t)*Math.E**(i*t)},dx(t){var e=Math.E**(i*t);return i*(s+n*t)*e+n*e}}}if(0<h){let e=(-r-Math.sqrt(h))/(2*a),i=(-r+Math.sqrt(h))/(2*a),s=(o-e*t)/(i-e),n=t-s;return{x(t){return n*Math.E**(e*t)+s*Math.E**(i*t)},dx(t){return n*e*Math.E**(e*t)+s*i*Math.E**(i*t)}}}let s=Math.sqrt(4*a*e-r*r)/(2*a),n=-r/2*a,l=t,c=(o-n*t)/s;return{x(t){return Math.E**(n*t)*(l*Math.cos(s*t)+c*Math.sin(s*t))},dx(t){var e=Math.E**(n*t),i=Math.cos(s*t),t=Math.sin(s*t);return e*(c*s*i-l*s*t)+n*e*(c*t+l*i)}}}x(t){return void 0===t&&(t=(Date.now()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(t):0}dx(t){return void 0===t&&(t=(Date.now()-this._startTime)/1e3),this._solution?this._solution.dx(t):0}setEnd(e,i,s){if(s=s||Date.now(),e!==this._endPosition||!te(i,n)){i=i||0;let t=this._endPosition;this._solution&&(te(i,n)&&(i=this._solution.dx((s-this._startTime)/1e3)),t=this._solution.x((s-this._startTime)/1e3),te(i,n)&&(i=0),te(t,n)&&(t=0),t+=this._endPosition),this._solution&&te(t-e,n)&&te(i,n)||(this._endPosition=e,this._solution=this._solve(t-this._endPosition,i),this._startTime=s)}}snap(t){this._startTime=Date.now(),this._endPosition=t,this._solution={x(){return 0},dx(){return 0}}}done(t){return Qt(this.x(),this._endPosition,n)&&te(this.dx(),n)}springConstant(){return this._k}damping(){return this._c}}class ie{constructor(t){this._f=t||1e-4,this._endPosition=0,this._x=0,this._start=0,this._minV=700,this._maxV=1e4}x(t){return this.done()||t?this._end:(this._x+=this.dx(),this._x)}dx(){var t=Math.abs(this._start-this._end),e=.01*this._v;return e-=e*this._f,t/Math.round(t/e)}setEnd(t,e){this._end=t,this._v=e||1e3*Math.sign(this._end-this._start),Math.abs(this._v)>this._maxV&&(this._v=this._maxV*Math.sign(this._v)),Math.abs(this._v)<this._minV&&(this._v=this._minV*Math.sign(this._v))}snap(t){this._x=t,this._start=t}done(){return Math.abs(this._x-this._end)<2}}class se{constructor(t,e,i={}){this.value=e,this.operator=t,this.activeFactor=.5,(i=b({mass:1,constant:90,damping:20,criticalDamping:!(this.priority=10)},i)).criticalDamping&&(i.damping=Math.sqrt(4*i.mass*i.constant)),this.spring=new ee(i.mass,i.constant,i.damping)}get motion(){return this.spring}isActive(t,e){switch(this.operator){case"<=":return e<=this.value;case">=":return e>=this.value;case"<":return e<this.value;default:return e>this.value}}set(t,e,i,s){this.spring.snap(e),this.spring.setEnd(this.value,s)}getPriority(){return this.priority}}class ne{constructor(t=[],e={}){this.activeFactor=1,this.priority=20,this.points=t,this._activeRange=null,this.options=b({mass:1,constant:90,damping:20,criticalDamping:!1,paginate:!0,loop:!1,motionMode:"spring",linearFriction:.01},e),(e=b({},this.options)).criticalDamping&&(e.damping=Math.sqrt(4*e.mass*e.constant)),this._motion="spring"===e.motionMode?new ee(e.mass,e.constant,e.damping):new ie(e.linearFriction)}get activeRange(){return this._activeRange}set activeRange(t){this._activeRange=t,this.length=t[1]-t[0]}get motion(){return this._motion}findPoint(i){i=this.normalizePosition(i);let s=-1;return this.points.some((t,e)=>(s=e)===this.points.length-1||Math.abs(i-this.points[e+1][0])>Math.abs(i-t[0])),!this.options.loop||s!==this.points.length-1||Math.abs(i-this.activeRange[1])>Math.abs(i-this.points[s][0])?s:"end"}normalizePosition(t){return this.options.loop?(t%=this.length||1)<0&&(t+=this.length):t=Math.max(0,Math.min(t,this.length)),t}isActive(t,e){return!!this.activeRange&&(!!this.options.loop||Math.max(t,e)>this._activeRange[0]&&Math.min(t,e)<this._activeRange[1])}getPriority(){return this.priority}set(i,t,s,n){let o=0;if(null===s&&(s=t),this.options.paginate&&0!==n){let e=this.findPoint(i);this.options.loop?(o=Math.floor(i/this.length),"end"===e&&(e=0,o+=1)):i=this.normalizePosition(i);i=this.points[e];if(0<n)s=o*this.length+i[0]+i[1];else if(n<0){let t=e-1;-1===t&&(t=this.points.length-1),s=o*this.length+i[0]-this.points[t][1]}this.options.loop||(s=this.normalizePosition(s))}else{let t=this.findPoint(s);this.options.loop?(o=Math.floor(s/this.length),"end"===t&&(t=0,o+=1)):s=this.normalizePosition(s),s=o*this.length+this.points[t][0]}this._motion.snap(t),this._motion.setEnd(s,n)}}class r{constructor(){this._options={},this._defaults={},this._observers={},this._aliases={},this._waitings={}}inject(e){Object.keys(e).forEach(t=>{this._options[t]instanceof r?this._options[t].inject(e[t]):this.set(t,e[t],!0)||(this._waitings[t]=e[t])})}register(e,t){var i;return"object"==typeof e?((i=Object.keys(e)).forEach(t=>{this.register(t,e[t])}),i):(Array.isArray(t)||"object"!=typeof t?this._defaults[e]=t:(this._options[e]=new r,this._options[e].register(t)),this._checkWaitingList(e),e)}chain(t,i){this._aliases[t]&&(t=this._aliases[t]);var e=this._isNested(t);if(e)e.options.chain(e.name,i);else{if(this._options[t]instanceof r){let e=this._options[t];Object.assign(i._aliases,e._aliases),Object.assign(i._waitings,e._waitings),Object.assign(i._defaults,e._defaults),Object.keys(e._observers).forEach(t=>{Object.prototype.hasOwnProperty.call(i._observers,t)?i._observers[t].concat(e._observers[t]):i._observers[t]=e._observers[t]}),Object.keys(e._options).forEach(t=>{e._options[t]instanceof r&&i._options[t]?e.chain(t,i._options[t]):i._options[t]=e._options[t]}),i.register(i._defaults)}this._options[t]=i}}alias(t,e){if(this.has(t))throw new Error(`"${t}" is already an option.`);if(this._aliases[t])throw new Error(`"${t}" is already created.`);if(!this.has(e))throw new Error(`"${t}" is not registered. Register the option before defining any alias.`);this._aliases[t]=e,this._checkWaitingList(t)}has(t){var e=this._isNested(t);return e?e.options.has(e.name):v.call(this._options,t)||v.call(this._defaults,t)}is(t,e){return this.get(t)===e}get(t){if(Array.isArray(t)){let e={};return t.forEach(t=>{e[t]=this.get(t)}),e}this._aliases[t]&&(t=this._aliases[t]);var e=this._isNested(t);return e?e.options.get(e.name):(v.call(this._options,t)?this._options:this._defaults)[t]}set(e,i,s=!1,t=!1){if("object"==typeof e)Object.keys(e).forEach(t=>this.set(t,e[t],s));else{this._aliases[e]&&(e=this._aliases[e]);var n=this._isNested(e);if(n)return n.options.set(n.name,i,s,t);if(!this.has(e))return!!t&&(this._waitings[e]=i,!0);"object"==typeof i&&this._options[e]instanceof r?this._options[e].set(i):this._options[e]=i,this._internalChange||s||(this._observers[e]&&this._observers[e].forEach(t=>t(e,i)),this._observers["*"]&&this._observers["*"].forEach(t=>t("*",i)))}return!0}observe(t,e){if(Array.isArray(t))t.forEach(t=>this.observe(t,e));else{if("*"!==t&&!this.has(t))throw new Error(`This option: "${t}" is not registered.`);var i=this._isNested(t);i?i.options.observe(i.name,e):((i=this.get(t))instanceof r&&i.observe("*",e),this._observers[t]||(this._observers[t]=[]),this._observers[t].push(e))}}dontObserve(t,e){var i;Array.isArray(t)?t.forEach(t=>this.dontObserve(t,e)):(i=this._isNested(t))?i.options.dontObserve(i.name,e):(i=this._observers[t]).length&&i.splice(i.indexOf(e),1)}internalChange(){this._internalChange=!0}endInternalChange(){this._internalChange=!1}aliasesOf(e){return Object.keys(this._aliases).filter(t=>this._aliases[t]===e)}reset(t,e){var i;"*"===t?Object.keys(this._options).forEach(t=>this.reset(t,e)):(this._internalChange=e,(i=this._isNested(t))?i.options.reset(i.name,e):(void 0!==(i=this._options[t])&&(i instanceof r?i.reset("*",e):this.set(t,this._defaults[t])),this._internalChange=!1))}toObject(){let e={};return Object.keys(b(b({},this._defaults),this._options)).forEach(t=>{this._options[t]instanceof r?e[t]=this._options[t].toObject():e[t]=this.get(t)}),e}list(){let e=[];return Object.keys(b(b({},this._defaults),this._options)).forEach(t=>{this._options[t]instanceof r?e.push({name:t,value:this._options[t].list()}):e.push({name:t,value:this._options[t],default:this._defaults[t],aliases:this.aliasesOf(t).toString(),observers:this._observers[t]})}),e}_checkWaitingList(t){void 0!==this._waitings[t]&&(this.set(t,this._waitings[t],!0),delete this._waitings[t])}_isNested(t){var e,i=t.indexOf(".");return-1!==i&&(e=this.get(t.slice(0,i)))instanceof r&&{name:t.slice(i+1),options:e}}}class oe extends t{constructor(t,e,i){super(),this.view=e,this.composer=t,this.options=new r,this.options.register({animate:!0,duration:1,easing:void 0,start:0,forceLooped:!1,checkLoop:!0}),this.options.inject(i),this.currentIndex=0,this.targetIndex=0,this.count=-1,this.currentSectionIndex=0,this.targetSectionIndex=0,this.currentSectionIndexes=[],this.targetSectionIndexes=[]}init(){this.composer.on("init",()=>{requestAnimationFrame(()=>{this.options.get("start")&&this.goToIndex(this.options.get("start"),{animate:!1},!0)})},1e3)}next(t){t=b(b({},this.options.toObject()),t),this.targetIndex+1>=this.count?t.forceLooped||t.checkLoop&&this.view.options.get("loop")?this.goToIndex(0,t):this.trigger("nextBlock"):this.goToIndex(this.targetIndex+1,t)}previous(t){t=b(b({},this.options.toObject()),t),this.targetIndex-1<0?t.forceLooped||t.checkLoop&&this.view.options.get("loop")?this.goToIndex(this.count-1,t):this.trigger("previousBlock"):this.goToIndex(this.targetIndex-1,t)}goToIndex(t,e,i){}update(){this.updateTargetIndex(this.view.index),this.updateCurrentIndex()}checkIndex(t,e=!0){return-1===this.count&&this.updateCount(),e?Math.max(0,Math.min(t,this.count-1)):0<=t&&t<this.count}updateCount(){}updateTargetIndex(t){[this.targetSectionIndex]=this.targetSectionIndexes,this.targetIndex!==t&&(this.targetIndex=t,this.trigger("changeStart",[this.targetIndex]),this.trigger("targetIndexChange",[this.targetIndex]))}updateCurrentIndex(){this.currentSectionIndex=this.view.index,this.currentSectionIndexes=this.view.indexes,this.targetIndex!==this.currentIndex&&(this.currentIndex=this.targetIndex,this.trigger("changeEnd",[this.currentIndex]),this.trigger("currentIndexChange",[this.currentIndex]))}}class re{constructor(t){this._drag=t,this._x=0,this._startTime=0}set(t,e){this._x=t,this._end=e}x(t){return t?this._end:(this._x+=(this._end-this._x)*this._drag,this._x)}dx(){return this._x-this._end}done(){return Math.abs(this.dx())<1}}class ae extends t{constructor(t=.01){super(),this._position=0,this.animating=!1,this._constraints=[],this._friction=new Jt(t),this._frictionVal=t,this.startPosition=null,this._tickerId=null,this._tick=this._tick.bind(this),this.disabled=!1,this.eventPrefix="slicker"}get friction(){return this._frictionVal}set friction(t){this.disabled||t===this._frictionVal||(this._friction=new Jt(t),this._frictionVal=t)}get position(){return this._position}set position(t){this.disabled||t===this._position||(null===this.startPosition&&(this.startPosition=t),this._currentConstraint=this.findConstraint(t),this._updatePosition(t))}moveToPosition(t,e=.5){this.disabled||this._position===t||(null===this.startPosition&&(this.startPosition=t),this._velocity=NaN,this._activeMotion=new re(e),this._activeMotion.set(this._position,t),this._startAnimation())}get velocity(){return this._activeMotion?this._activeMotion.dx():0}set velocity(t){this.disabled||this._velocity===t||(this._velocity=t,this._friction.set(this._position,this._velocity),this._activeMotion=this._friction,t=this._friction.x(120),this._targetConstraint=this.findConstraint(t)||null,this._targetConstraint?(this._currentConstraint=null,this._animToConstraint(this._targetConstraint,this._position,t,this._velocity),this.startPosition=null):(this._startAnimation(),this.trigger("push",[this._velocity],!0)))}stop(){this.startPosition=this._position,this.animating=!1,this._tick(),this.trigger("motionInterrupt",null,!0)}release(t){!this.disabled&&this._currentConstraint&&(t?this._goToConstraint(this._currentConstraint,this._position,null,this._velocity):(this._animToConstraint(this._currentConstraint,this._position,null,this._velocity),this.trigger("motionToConstraint",null,!0)))}addConstraint(t){(t.slicker=this)._constraints.push(t)}removeConstraint(t){t=this._constraints.indexOf(t);-1!==t&&(this._constraints=this._constraints.splice(t,1))}removeConstraints(){this._currentConstraint=null,this._constraints=[]}findConstraint(n){var t;return!!this._constraints.length&&!!(t=this._constraints.filter(t=>t.isActive(this._position,n,this.velocity))).length&&t.sort((t,e)=>{var i=e.getPriority(this._position,n,this.velocity),s=t.getPriority(this._position,n,this.velocity);return"important"===i?1:"important"===s?-1:e.priority-t.priority})[0]}_updatePosition(t){var e=t-this._position;this._position=t,this._currentConstraint&&(this._position-=(1-this._currentConstraint.activeFactor)*e),this.trigger("positionChange",[this._position],!0)}_startAnimation(){var t;this.animating||(this.animating=!0,this.trigger("animationStart",null,!0),this._activeMotion!==this._friction&&this.trigger("constraintAnimationStart",null,!0),t=Math.round(100*this._activeMotion.x(120))/100,this.endPosition!==t&&this.trigger("endPositionChange",[t],!0),this._tick())}_tick(){this.animating?this._activeMotion.done()?(this.animating=!1,this._updatePosition(Math.round(100*this._position)/100),this._tick(),this.trigger("animationEnd",null,!0),this._activeMotion!==this._friction&&this.trigger("constraintAnimationEnd",null,!0)):(this._updatePosition(this._activeMotion.x()),this._tickerId=requestAnimationFrame(this._tick)):(cancelAnimationFrame(this._tickerId),this._velocity=0,this._targetConstraint=null,this._currentConstraint=this.findConstraint(this._position))}_animToConstraint(t,e,i,s){t.set(this.startPosition,e,i,s),this._activeMotion=t.motion,this._startAnimation()}_goToConstraint(t,e,i,s){t.set(this.startPosition,e,i,s);e=Math.round(100*t.motion.x(120))/100;this.trigger("endPositionChange",[e],!0),this.position=e,this.trigger("animationEnd",null,!0)}}class he extends oe{constructor(t,e,i={}){super(t,e,i),this.options.register({direction:"auto",slicker:!0,slickerFriction:.01,updateIndexOnDrag:"auto",boundariesSpring:{mass:1,constant:90,damping:20,criticalDamping:!1},snapping:{mass:1,constant:90,damping:20,criticalDamping:!0}}),this.options.inject(i),this.updateCurrentIndex=this.updateCurrentIndex.bind(this),this.updateCount=this.updateCount.bind(this),this.view.on("arrange",this.updateCount,this)}setupSlicker(){this.options.get("slicker")&&(this.updateSlicker=this.updateSlicker.bind(this),this.slicker=new ae,this.slicker.on("positionChange",this._onSlickerValueChange,this),this.slicker.on("endPositionChange",this._onSlickerEndValueChange,this),this.slicker.on("animationEnd",this.updateCurrentIndex,this),this.slicker.on("push",()=>this.trigger("slickChanged")),this.slicker.on("motionInterrupt",()=>this.trigger("slickChanged")),this.options.observe(["slickType","boundariesSpring","snapping"],this.updateSlicker),this.options.observe("slickerFriction",(t,e)=>{this.slicker.friction=e}),this.view.options.observe("loop",this.updateSlicker),this.view.on("resize, sectionAdd, sectionRemove, lengthChange",this.updateSlicker),this.view.on("scrollToAnimationEnd",this.updateCurrentIndex,this),this.view.on("unsafeInteractions",()=>{this.slicker.disabled=!0}),this.view.on("safeInteractions",()=>{this.slicker.disabled=!1}),this.updateSlicker())}next(t){super.next(b({direction:"forward"},t))}previous(t){super.previous(b({direction:"backward"},t))}drag(t){this.slicker&&(this.slicker.position+=t*(this.view.dragFactor||1),this._updateIndexesOnDrag)&&(this._onSlickerEndValueChange(null,this.slicker.position),this.updateCurrentIndex())}push(t){this.slicker&&(this.slicker.velocity=t)}release(t){this.slicker&&(this.slicker.position=this.view.position,this.slicker.release(t))}hold(){var t;null!=(t=this.slicker)&&t.stop()}goToPosition(t,e){}update(){this.updateSlicker(),this.updateTargetIndex(this.view.index,this.slicker.position),this.updateCurrentIndex()}updateCount(){}updateSlicker(){}_onSlickerValueChange(){}_onSlickerEndValueChange(t,e){}}class le extends he{constructor(t,e,i={}){super(t,e,i),this.options.register({slickType:"slide",paginate:!1}),this.options.inject(i),this.updateTargetIndex=this.updateTargetIndex.bind(this),this.options.observe("paginate",this.updateCount),this.composer.on("resize",this.updateCount,this),this.updateCount(),this.setupSlicker()}setupSlicker(){this.options.get("slicker")&&(this.updateSlicker=this.updateSlicker.bind(this),this.options.observe(["paginate","slickerFriction"],this.updateSlicker),super.setupSlicker())}push(t){this.view.killScrollAnimation(),super.push(t)}release(t){this.view.killScrollAnimation(),super.release(t)}hold(){this.view.animating&&(this.view.killScrollAnimation(),this.slicker)&&(this.slicker.position=this.view.position),super.hold()}goToIndex(t,e,i=!1){var s;t=this.checkIndex(t),!i&&t===this.targetIndex||(i={index:t},(e=b(b({},this.options.get(["animate","direction","duration","paginate","easing"])),e)).easing&&(i.easing=e.easing),void 0===(s=this.options.get("paginate")?t*this.view.size:null==(s=this.view.sections[t])?void 0:s.position))||(!1!==this.view.scrollTo(s,e.animate,e.duration,e.direction,i)&&this.updateTargetIndex(t,s),e.animate)||this.updateCurrentIndex()}goToPosition(t,e){var i=this.checkIndex(this.view.getIndexAtPosition(t)),s={};(e=b(b({},this.options.get(["animate","direction","duration","paginate","ease"])),e)).ease&&(s.ease=e.ease),this.updateTargetIndex(i,t),e.useFriction?(this.slicker.position=this.view.normalizePositionByDirection(this.view.position),this.slicker.moveToPosition(this.view.normalizePositionByDirection(t),e.friction)):(this.view.scrollTo(t,e.animate,e.duration,e.direction,s),e.animate||this.updateCurrentIndex())}update(){this.updateSlicker(),this.updateTargetIndex(this.view.index,this.slicker.position),this.updateCurrentIndex()}updateTargetIndex(t,e){this.targetSectionIndexes=this.view.getIndexesAtPosition(e),super.updateTargetIndex(t)}updateCurrentIndex(){this.slicker&&(this.slicker.position=this.view.position),super.updateCurrentIndex()}updateCount(){let t=this.options.get("paginate")?Math.ceil(this.view.length/this.view.size):this.view.count;var e=m(this.composer.options.get("columns"));!this.view.options.get("loop")&&1<e&&(t-=e-1),t!==this.count&&(this.count=t,this.trigger("countChange",[this.count]))}updateSlicker(){var i=this.options.get(["slickType","slickerFriction","boundariesSpring","snapping","paginate","updateIndexOnDrag"]),s=this.view.options.get("loop");if(this.slicker.stop(),this.slicker.removeConstraints(),this.slicker.friction=i.slickerFriction,"scroll"===i.slickType?null!=(o=(n=this.view).enableAntialiasFix)&&o.call(n):null!=(n=(o=this.view).disableAntialiasFix)&&n.call(o),this._updateIndexesOnDrag=i.updateIndexOnDrag,"auto"===this._updateIndexesOnDrag&&(this._updateIndexesOnDrag="scroll"===i.slickType),"scroll"!==i.slickType){let e=[],t;if(i.paginate){t=[0,this.count*this.view.size];for(let t=0;t!==this.count;t+=1)e.push([t*this.view.size,this.view.size])}else s?(t=[0,this.view.length],e=this.view.sections.map(t=>[t.position,t.size+t.space])):(t=[0,this.view.nominalLength],this.view.sections.some(t=>t.position<this.view.nominalLength?(e.push([t.position,t.size+t.space]),!1):(e.push([this.view.nominalLength,this.view.size]),!0)));var n=b(b({loop:s,paginate:"slide"===i.slickType},i.snapping.toObject()),{},{linearFriction:i.slickerFriction,motionMode:"animroll"===this.composer.options.get("view")?"linear":"spring"}),o=new ne(e,n);o.activeRange=t,this.slicker.addConstraint(o)}s||(n=i.boundariesSpring.toObject(),o=new se("<",0,n),s=i.paginate?(this.count-1)*this.view.size:this.view.nominalLength,i=new se(">",s,n),this.slicker.addConstraint(o),this.slicker.addConstraint(i)),this.release(!0)}_onSlickerValueChange(){this.view.position=this.slicker.position}_onSlickerEndValueChange(t,e){let i;i=this.options.get("paginate")?Math.ceil(Math.round(e/this.view.size))%this.count:this.view.getIndexAtPosition(e),this.updateTargetIndex(i,e)}}class h{constructor(t,e=!0){this._dependencies=1,this.action=t,this.noMoreExec=e,this._isInvalidated=!1}hold(){this._dependencies+=1}reset(){this._dependencies=1,this._executed=!1}charge(t){this._dependencies+=t}exec(){if(this._isInvalidated)return!1;if(this._executed){if(!this.noMoreExec)return!0;console.warn("The action is triggered before.")}return--this._dependencies,this._dependencies<=0&&(this._executed=!0,this.action(),!0)}invalidate(){this._isInvalidated=!0}isExecuted(){return this._executed}}let ce=[];let de=new Map,pe=new Map,ue=s=>{if(de.has(s))return de.get(s);let n=new Promise((t,e)=>{var i=document.createElement("link");i.rel="stylesheet",i.href=s,i.onload=()=>{de.set(s,n),t()},i.onerror=()=>{e(new Error("Failed to load stylesheet "+s))},document.head.appendChild(i)});return de.set(s,n),n},me=s=>{if(pe.has(s))return pe.get(s);let n=new Promise((t,e)=>{var i=document.createElement("script");i.src=s,i.async=!0,i.onload=()=>{pe.set(s,n),t()},i.onerror=()=>{e(new Error("Failed to load script "+s))},document.head.appendChild(i)});return pe.set(s,n),n},ge=new Map,ve=new Map,_e=new Map,fe=new Map;class e extends t{static registerView(t,e){if(ge.has(t))throw new Error(t+" is already registered.");ge.set(t,e)}static registerSection(t,e){if(fe.has(t))throw new Error(t+" is already registered.");fe.set(t,e)}static registerAddon(t,e){if(ve.has(t))throw new Error(t+" is already registered.");ve.set(t,e)}static registerControl(t,e){if(_e.has(t))throw new Error(t+" is already registered.");_e.set(t,e)}static get views(){return ge}static get addons(){return ve}static get controls(){return _e}setup(t,e={}){this.element=t,this.element.classList.add(g+"-content-composer"),this.options=new r,this.options.register({sectionSelector:`.${g}-section`,excludeAddons:[],navigator:{},viewOptions:{},view:"basic",sectionType:"block",sectionFit:"cover",disableAnimations:!1,videoAutoplayDisabled:!1}),this.trigger("beforeOptions",[e]),this.options.inject(e),this.initTrigger=new h(this._init.bind(this)),this.readyTrigger=new h(this._ready.bind(this)),this.dependencyManager={loadStylesheet:ue,loadScript:me},this.responsiveHelper=u,this.element.classList.add(g+"-on-setup"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this._domReady.bind(this)):this._domReady(),this.trigger("afterSetup")}_domReady(){this.trigger("beforeDomReady");var t=this.element;"object"==typeof t&&t.nodeName?this.element=t:"string"==typeof t&&(this.element=document.querySelector(t)),this.element&&(this._domReady=!0,this._setupAddons(),this.element.classList.remove(g+"-on-setup"),this.element.classList.add(g+"-dom-ready"),this.trigger("domReady",[this.element]),this.initTrigger.exec())}_init(){this.trigger("beforeInit"),this._setupView(),this._setupLayout(),this._setupNavigator(),this._setupSections(),this.trigger("init"),this.element.classList.remove(g+"-before-init"),this.element.classList.add(g+"-init"),this.readyTrigger.exec(),requestAnimationFrame(()=>this.view.resize())}_ready(){this.element.classList.add(g+"-ready")}_setupAddons(){this.addons={};let i=this.options.get("excludeAddons");this.trigger("beforeSetupAddons"),ve.forEach((t,e)=>{-1===i.indexOf(e)&&(this.addons[e]=new t(this))}),this.trigger("afterSetupAddons")}_setupView(){this.trigger("beforeViewSetup");var t=ge.get(this.options.get("view"));this.view=new t,this.options.chain("viewOptions",this.view.options),(this.view.parentEmitter=this).view.appendTo(this.element),this.trigger("viewSetup",[this.view])}_setupLayout(){this.trigger("beforeLayoutSetup"),this.layoutController=new Y(this,this.view,this.options),(this.layoutController.parentEmitter=this).trigger("layoutSetup",[this.layoutController])}_setupNavigator(){this.trigger("beforeNavigatorSetup"),(this.view instanceof Kt||this.view.scrollable)&&(this.hasScrollView=!0,this.navigator=new le(this,this.view),this.options.chain("navigator",this.navigator.options),(this.navigator.parentEmitter=this).navigator.init()),this.trigger("navigatorSetup",[this.navigator])}_setupSections(){this.trigger("beforeSectionsSetup");var t=this.options.get("sectionSelector");let e=fe.get(this.options.get("sectionType"));this.element.querySelectorAll(":scope > "+t).forEach(t=>{t=new e(t,this);(t.parentEmitter=this).view.appendSection(t,!1)}),this.view.sections.length&&(1===this.view.sections.length&&this.options.set("viewOptions.loop",!1),this.view.update(),this.navigator.update()),this.trigger("sectionsSetup")}}H(e,"initAll",()=>{var{depicterSetups:t=[]}=window;t.length&&t.forEach(t=>{ce.includes(t)||(ce.push(t),t())})});let ye=["type"],we=["type"],be=["type"],xe=["segmentBy","staggerDirection","delay","duration","overlap","segmentAnimType"],Se=["type"],Ae=["duration","delay","easing","clipParams"],ke=["selector","focalPoint","set","scale"],Ce=t=>"object"==typeof t&&"string"==typeof t.unit&&"number"==typeof t.value,Le=(t,e)=>{var i;return null!=(i=t.parentElement)&&i.insertBefore(e,t),e.appendChild(t),e},Ee=t=>{t.replaceWith(...t.childNodes)},Ie=t=>Array.from(t.childNodes).reduce((t,e)=>{var i;return e.nodeType!==Node.TEXT_NODE&&null!=(i=e.childNodes)&&i.length?[...t,...Ie(e)]:e.nodeType===Node.TEXT_NODE?[...t,e]:t},[]),Pe=(t,e)=>{var i=new Range;return t.contains(e)?t:e.contains(t)?e:(i.setStartBefore(t),i.setEndAfter(e),i.collapsed&&(i.setStartBefore(e),i.setEndAfter(t)),i.commonAncestorContainer)},Te=(t,e)=>{var i,s=window.getComputedStyle(t)[e];return s?/px/.test(s.toString())?(i=t.style.display,t.style.display="none",e=window.getComputedStyle(t)[e],t.style.display=i,e):s:null},Oe=t=>{let e=t.style.cssText;return()=>{t.style.cssText=e}},c={duration:1e3,easing:"linear",delay:0},Me=(t,e={})=>{var{duration:e,delay:i,easing:s,begin:n,complete:o}=b(b({},c),e);let r=Oe(t);return{parts:{offset:i,params:{targets:t,duration:e,easing:s,begin:n,complete:o}},reset:()=>{r(),C.remove(t)}}},De=b(b({},c),{},{movement:100,direction:"left",fade:!0,perspective:2e3,x:null,y:null,z:null}),Be={top:"Y",bottom:"Y",left:"X",right:"X",front:"Z",back:"Z"},ze=u=>(t,r={})=>{var{movement:i,direction:s,fade:e,perspective:n}=b(b({},De),r),{parts:{params:o,offset:a},reset:h}=Me(t,r);let l={};var c="in"===u;if("custom"===s){var{x:r,y:d,z:p}=r;let t=r,e=d,i=p,s="px",n="px",o="px";Ce(r)&&(t=r.value,s=r.unit),Ce(d)&&(e=d.value,n=d.unit),Ce(p)&&(i=p.value,o=p.unit),l=b(b(b({},r&&{translateX:c?[""+t+s,0]:""+t+s}),d&&{translateY:c?[""+e+n,0]:""+e+n}),p&&{translateZ:c?[""+i+o,0]:""+i+o})}else{let t=i,e="px";Ce(i)&&(t=i.value,e=i.unit);r=["left","top","back"].includes(s)?"-"+t+e:""+t+e;l["translate"+Be[s]]=c?[r,0]:r}return l.translateZ&&C.set(t,{perspective:n}),e&&(l.opacity=c?[0,1]:0),{parts:{offset:a,params:b(b({},o),l)},reset:h}};var Ve=ze("in"),He=ze("out"),Ne=b({},De);let Fe=_=>(t,e={})=>{var{skew:i,scale:s,rotate:n,rotate3d:o,transformOrigin:r,skewX:a,skewY:h,rotateX:l,rotateY:c,rotateZ:d}=e,{reset:t,parts:{params:e,offset:p}}=ze(_)(t,e);let u={};var m,g,v="in"===_;return u=o?({x:o,y:m,z:g}=o,b(b(b(b({},u),void 0!==o&&{rotateX:v?[o,0]:o}),void 0!==m&&{rotateY:v?[m,0]:m}),void 0!==g&&{rotateZ:v?[g,0]:g})):([o,m,g]=[l,c,d],b(b(b(b({},u),void 0!==o&&{rotateX:v?[o,0]:o}),void 0!==m&&{rotateY:v?[m,0]:m}),void 0!==g&&{rotateZ:v?[g,0]:g})),void 0!==n&&(u.rotate=v?[n,0]:n),u=i?({x:l,y:c}=i,b(b(b({},u),void 0!==l&&{skewX:v?[l,0]:l}),void 0!==c&&{skewY:v?[c,0]:c})):b(b(b({},u),void 0!==a&&{skewX:v?[a,0]:a}),void 0!==h&&{skewY:v?[h,0]:h}),s&&("number"==typeof s?u.scale=v?[s,1]:s:({x:d,y:o}=s,u=b(b(b({},u),void 0!==d&&{scaleX:v?[d,1]:d}),void 0!==o&&{scaleY:v?[o,1]:o}))),r&&({x:m,y:g,z:n}=r,i=`${m||0} ${g||0} `+(n||0),u.transformOrigin=[i,i]),{parts:{offset:p,params:b(b({},e),u)},reset:t}};var Re=Fe("in"),We=Fe("out"),je=(b({},De),h=>(t,e={})=>{let i=Le(t,document.createElement("div"));i.classList.add("animator-mask-container");var s=Te(t,"width"),n=Te(t,"height");null!==s&&"auto"!==s&&(t.style.width="100%",i.style.width=s),null!==n&&"auto"!==n&&(t.style.height="100%",i.style.height=n),i.style.overflow="hidden";let{reset:o,parts:{params:r,offset:a}}=ze(h)(t,e);return{parts:{offset:a,params:r},reset:()=>{o(),Ee(i)}}}),i=je("in"),je=je("out"),$e=(b({},Ne),h=>(t,e={})=>{let i=Le(t,document.createElement("div"));i.classList.add("animator-mask-container");var s=Te(t,"width"),n=Te(t,"height");null!==s&&"auto"!==s&&(t.style.width="100%",i.style.width=s),null!==n&&"auto"!==n&&(t.style.height="100%",i.style.height=n),i.style.overflow="hidden";let{reset:o,parts:{params:r,offset:a}}=Fe(h)(t,e);return{parts:{offset:a,params:r},reset:()=>{o(),Ee(i)}}}),qe=$e("in"),$e=$e("out");let Ye=(t,e,i,s)=>{var i=Ni[i];if(Object.prototype.hasOwnProperty.call(i,t))return{parts:i,reset:t}=(0,i[t])(e,s),{reset:t,parts:i};throw new Error("Animation type not found.")},Xe={coverInAnim:b({type:"moveAndTransform"},Ne),coverOutAnim:b({type:"moveAndTransform"},Ne),targetAnim:{type:"none"}};var Ue=w=>(t,e)=>{var e=b(b({},Xe),e),{coverColor:i,duration:s,delay:n=0,coverInAnim:{type:o},coverOutAnim:{type:r}}=e,a=x(e.coverInAnim,ye),h=x(e.coverOutAnim,we);let l=document.createElement("div"),c=document.createElement("div"),{reset:d,parts:p}=(l.classList.add("animator-mask-container"),Le(t,l),l.append(c),Object.assign(l.style,{position:"relative",overflow:"hidden",display:"inline-block",verticalAlign:"middle"}),Object.assign(c.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:i}),Ye(o,c,"in",b(b({},a),{},{duration:s?s/2:a.duration,delay:s?n:a.delay})));var{offset:i=0,params:o}=p,a=i+o.duration;let u=e.targetAnim;i="none"===u.type,o=(u=i?{type:"move",fade:!0,movement:0,direction:"left"}:u).type,e=x(u,be);let{reset:m,parts:g}=Ye(o,t,w,b(b({},e),{},{duration:i?1:s?s/2:e.duration,delay:s?n+s/2:a+(e.delay||0)})),v=[],_=null,{reset:f,parts:y}=(e.fade||({reset:o,parts:i}=Ye("fade",t,w,{fade:!0,movement:0,direction:"left",duration:1,delay:s?n+s/2:a+(e.delay||0)}),v=[i],_=o),Ye(r,c,"out",b(b({},h),{},{duration:s?s/2:e.duration,delay:s?n+s/2:a+(h.delay||0)})));return{parts:[p,...v,g,y],reset:()=>{var t;d(),f(),m(),null!=(t=_)&&t(),c.remove(),Ee(l),l.remove()}}},Ze=Ue("in"),Ue=Ue("out");let Ge=(e,i=!0)=>{var t=null==e?void 0:e.textContent;if(!e||!e.parentElement||3!==e.nodeType||!t)return[];if(i){var i=e.parentElement.getBoundingClientRect().width,s=e.parentElement.offsetWidth;if(Math.round(i)!==s){var n,i=e.cloneNode(!0),o=document.createElement("div"),i=(o.appendChild(i),e.parentElement),r=o,a=getComputedStyle(i);for(n of["font-size","font-family","font-weight","font-style","line-height","text-align","text-transform","letter-spacing","word-spacing","padding","box-sizing","border"])r.style.setProperty(n,a.getPropertyValue(n));o.style.width=s+"px";i=document.createElement("div");i.style.position="absolute",i.style.visibility="hidden",i.appendChild(o),document.body.appendChild(i);let t=Ge(o.firstChild,!1);return i.remove(),t}}var h=document.createRange();let l=[],c=(h.setStart(e,0),h.getBoundingClientRect().bottom),d=1,p=0;for(var u;d<=t.length;)h.setStart(e,d),d<t.length-1&&h.setEnd(e,d+1),(u=h.getBoundingClientRect().bottom)>c&&(l.push(t.substr(p,d-p)),c=u,p=d),d+=1;return l.push(t.substr(p)),l},Ke=t=>t.split(/(\s+)/),Je=t=>t.split(""),Qe=(t,s,n,o,r)=>t.map((t,e)=>{var i=" "!==t;return r&&!i||!t?null:`<${s} ${i&&n?`class="${n} ${0===e?"first":""}"`:""}${i&&o?` style="${o}"`:""}>${t}</${s}>`}).filter(t=>null!==t),ti=b(b(b({segmentBy:"letter",staggerDirection:"left",overlap:.05,segmentAnimType:"moveAndTransform"},c),Ne),Xe);var ei=y=>(t,e)=>{let i=b(b({},ti),e),{segmentBy:s,staggerDirection:n,delay:o=0,duration:r=1e3,overlap:a=.05,segmentAnimType:h}=i,l=x(i,xe);"letter"===s&&(t.style.fontKerning="none");var c,e=Ie(t).filter(t=>" "!==t.textContent),t=1<(t=e).length?t.reduce((t,e)=>t===e?t:Pe(t,e),t[0]):t[0].parentElement;u=t,c=document.createElement("div"),[...u.childNodes].forEach(t=>c.appendChild(t)),u.appendChild(c);let d=c,p=d.cloneNode(!0);t.appendChild(p),d.style.display="none";var u=window.getComputedStyle(t).textTransform,e=Ie(p).filter(t=>" "!==t.textContent);let m=document.createElement("span"),g=(e.forEach(t=>{m.innerHTML=((t,e)=>{var s=["letter","word","line"];let n=s.slice(s.indexOf(t)),o="word"===t,r="letter"===t;s=[];if(n.includes("line")){t=Ge(e);let i=[];n.includes("word")?t.forEach(t=>{t=Ke(t);let e=[];n.includes("letter")?t.forEach(t=>{t=Je(t),t=Qe(t,"span",r?"animator-letter":"",r?"display:inline-block":"").join("");e.push(t)}):e=t,i.push(Qe(e,"span",o?"animator-word":"",o?"display:inline-block":"").join(""))}):i=t,s.push(Qe(i,"div","animator-line","white-space: nowrap; display: inline-block;").join(""))}return s.join("")})(s,t),t.replaceWith(...m.childNodes)}),m.remove(),[]),v=[];t=[...p.querySelectorAll(".animator-"+s)];let _="left"===n?t:t.reverse(),f=r/(((_="shuffle"===n?(t=>{var e,i=t;let s=t.length;for(;0!==s;)e=Math.floor(Math.random()*s),--s,[i[s],i[e]]=[i[e],i[s]];return i})(_):_).length-1)*(1-a)+1);return _.forEach((t,e)=>{var{parts:t,reset:e}=Ye(h,t,y,b(b({},l),{},{delay:e*(1-a)*f+o,duration:f}));Array.isArray(t)?g.push(...t):g.push(t),v.push(e)}),p.querySelectorAll(".animator-mask-container").forEach(t=>{t.style.display="inline-flex"}),"capitalize"===u&&"letter"===s&&(p.style.textTransform="initial",p.querySelectorAll(".animator-letter.first").forEach(t=>{t.style.textTransform="capitalize"})),{parts:g,reset:()=>{var e;v.forEach(t=>t()),p.remove(),[...(e=d).childNodes].forEach(t=>e.parentElement.appendChild(t)),e.remove()}}},ii=ei("in"),ei=ei("out"),si=(b({},c),n=>(t,e={})=>{var{parts:{params:t,offset:e},reset:i}=Me(t,e),s={};return s.opacity="in"===n?[0,1]:0,{parts:{offset:e,params:b(b({},t),s)},reset:i}}),ni=si("in"),si=si("out");let oi=t=>"number"==typeof t?t+"px":""+t.value+t.unit,ri=(t,e)=>{var i="number"==typeof t?t:t.value,t="number"==typeof t?"px":t.unit;return{from:oi({value:"in"===e?i:0,unit:t}),to:oi({value:"in"===e?0:i,unit:t})}},ai={top:{bottom:{value:100,unit:"%"},left:{value:0,unit:"%"}},bottom:{top:{value:100,unit:"%"},left:{value:0,unit:"%"}},left:{top:{value:0,unit:"%"},right:{value:100,unit:"%"}},right:{top:{value:0,unit:"%"},left:{value:100,unit:"%"}}},hi=b({},c),li=a=>(t,e)=>{var{direction:i,directionsValue:s={top:0,right:0,bottom:0,left:0}}=b(b({},hi),e),i=i?ai[i]:s;let{parts:{params:n,offset:o},reset:r}=Me(t,e);var s={},{from:e,to:i}=((i,s)=>{var t=Object.keys(i);let n={};t.forEach(t=>{var e=ri(i[t],s);n[t]=e});var{top:t,right:e,bottom:o,left:r}=n;return{from:`inset(${(null==t?void 0:t.from)||0} ${(null==e?void 0:e.from)||0} ${(null==o?void 0:o.from)||0} ${(null==r?void 0:r.from)||0})`,to:`inset(${(null==t?void 0:t.to)||0} ${(null==e?void 0:e.to)||0} ${(null==o?void 0:o.to)||0} ${(null==r?void 0:r.to)||0})`}})(i,a);return t.style.clipPath=e,s.clipPath=[e,i],{parts:{offset:o,params:b(b({},n),s)},reset:()=>{t.style.removeProperty("clip-path"),r()}}};var ci=li("in"),di=li("out");let pi={tl:"left top",tr:"right top",tc:"center top",ml:"left center",mc:"center center",mr:"right center",bl:"left bottom",br:"right bottom",bc:"center bottom"},ui=(t,e)=>{switch(t){case"mc":default:return.5*Math.sqrt(e.width**2+e.height**2);case"tl":case"tr":case"bl":case"br":return Math.sqrt(e.width**2+e.height**2);case"tc":case"bc":return Math.sqrt((e.width/2)**2+e.height**2);case"ml":case"mr":return Math.sqrt(e.width**2+(e.height/2)**2)}},mi=b({},c),gi=a=>(t,e)=>{var{circleOrigin:i="mc",radius:s={value:100,unit:"%"}}=b(b({},mi),e);let{parts:{params:n,offset:o},reset:r}=Me(t,e);var e={},{from:s,to:i}=((t,e,i,s)=>{let n="number"==typeof t?t:t.value;var t="number"==typeof t?"px":t.unit,[o,r]=pi[e].split(" "),t=("%"===t&&(n=ui(e,i)*n/100),oi({value:"in"===s?0:n,unit:"px"}));return{from:`circle(${t} at ${o} ${r})`,to:`circle(${oi({value:"in"===s?n:0,unit:"px"})} at ${o} ${r})`}})(s,i,{width:t.clientWidth,height:t.clientHeight},a);return t.style.clipPath=s,e.clipPath=[s,i],{parts:{offset:o,params:b(b({},n),e)},reset:()=>{t.style.removeProperty("clip-path"),r()}}};var vi=gi("in"),_i=gi("out");let fi=(t,e)=>{var t=t.map(t=>{var{x:e,y:i}=t.from,{x:t,y:s}=t.to;return{from:oi(e)+" "+oi(i),to:oi(t)+" "+oi(s)}}),i=t.map(t=>t.from).join(","),t=t.map(t=>t.to).join(",");return{from:`polygon(${"in"===e?i:t})`,to:`polygon(${"in"===e?t:i})`}},yi=b(b({},c),{},{direction:"tl",use45deg:!0}),wi={tl:[{from:{x:0,y:0},to:{x:0,y:0}},{from:{x:0,y:0},to:{x:{value:200,unit:"%"},y:0}},{from:{x:0,y:0},to:{x:0,y:{value:200,unit:"%"}}}],tr:[{from:{x:{value:100,unit:"%"},y:0},to:{x:{value:100,unit:"%"},y:0}},{from:{x:{value:100,unit:"%"},y:0},to:{x:{value:-200,unit:"%"},y:0}},{from:{x:{value:100,unit:"%"},y:0},to:{x:{value:100,unit:"%"},y:{value:200,unit:"%"}}}],br:[{from:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}},to:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}}},{from:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}},to:{x:{value:-200,unit:"%"},y:{value:100,unit:"%"}}},{from:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}},to:{x:{value:100,unit:"%"},y:{value:-200,unit:"%"}}}],bl:[{from:{x:0,y:{value:100,unit:"%"}},to:{x:0,y:{value:100,unit:"%"}}},{from:{x:0,y:{value:100,unit:"%"}},to:{x:{value:200,unit:"%"},y:{value:100,unit:"%"}}},{from:{x:0,y:{value:100,unit:"%"}},to:{x:0,y:{value:-200,unit:"%"}}}]},bi=h=>(t,e)=>{var{direction:i,use45deg:s}=b(b({},yi),e);let{parts:{params:n,offset:o},reset:r}=Me(t,e);var e={},{from:a,to:s}=s?fi({tl:[{from:{x:0,y:0},to:{x:0,y:0}},{from:{x:0,y:0},to:{x:{value:(s=t.clientWidth)+(a=t.clientHeight),unit:"px"},y:0}},{from:{x:0,y:0},to:{x:0,y:{value:s+a,unit:"px"}}}],tr:[{from:{x:{value:100,unit:"%"},y:0},to:{x:{value:100,unit:"%"},y:0}},{from:{x:{value:s,unit:"px"},y:0},to:{x:{value:-a,unit:"px"},y:0}},{from:{x:{value:100,unit:"%"},y:0},to:{x:{value:100,unit:"%"},y:{value:s+a,unit:"px"}}}],br:[{from:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}},to:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}}},{from:{x:{value:s,unit:"%"},y:{value:100,unit:"%"}},to:{x:{value:-a,unit:"px"},y:{value:100,unit:"%"}}},{from:{x:{value:100,unit:"%"},y:{value:a,unit:"%"}},to:{x:{value:100,unit:"%"},y:{value:-s,unit:"px"}}}],bl:[{from:{x:0,y:{value:100,unit:"%"}},to:{x:0,y:{value:100,unit:"%"}}},{from:{x:0,y:{value:100,unit:"%"}},to:{x:{value:a+s,unit:"px"},y:{value:100,unit:"%"}}},{from:{x:0,y:{value:a,unit:"%"}},to:{x:0,y:{value:-s,unit:"px"}}}]}[i],h):fi(wi[i],h);return t.style.clipPath=a,e.clipPath=[a,s],{parts:{offset:o,params:b(b({},n),e)},reset:()=>{t.style.removeProperty("clip-path"),r()}}};var xi=bi("in"),Si=bi("out");let Ai=b({},c),ki=a=>(t,e)=>{var{points:i=[]}=b(b({},Ai),e);let{parts:{params:s,offset:n},reset:o}=Me(t,e);var e={},{from:i,to:r}=fi(i,a);return t.style.clipPath=i,e.clipPath=[i,r],{parts:{offset:n,params:b(b({},s),e)},reset:()=>{t.style.removeProperty("clip-path"),o()}}};var Ci=ki("in"),Li=ki("out");let Ei={type:"inset"},Ii=a=>(t,e)=>{var e=b(b({},Ei),e),i=e.type,s=x(e,Se);let n;switch(i){case"circle":n=gi(a)(t,s);break;case"inset":case"rect":default:var{direction:o="left"}=s;n=(["left","right","top","bottom"].includes(o)?li:bi)(a)(t,s);break;case"diagonal":n=bi(a)(t,s);break;case"polygon":n=ki(a)(t,s)}var{reset:e,parts:{params:i,offset:r}}=n;return{parts:{offset:r,params:i},reset:e}};var Pi=Ii("in"),Ti=Ii("out");let Oi=b(b({},c),{},{clipParams:Ei,moveAndTransformParams:Ne});var Ne=u=>(t,e)=>{var e=b(b({},Oi),e),{duration:i,delay:s,easing:n,clipParams:o}=e,e=x(e,Ae);let r=Le(t,document.createElement("div"));var a=Te(t,"width"),h=Te(t,"height");null!==a&&"auto"!==a&&(t.style.width="100%",r.style.width=a),null!==h&&"auto"!==h&&(t.style.height="100%",r.style.height=h),r.style.overflow="hidden";let{reset:l,parts:c}=Ii(u)(r,b({duration:i,delay:s,easing:n},o)),{reset:d,parts:p}=Fe(u)(t,b({duration:i,delay:s,easing:n},e));return{parts:[c,p],reset:()=>{d(),l(),Ee(r)}}},Mi=Ne("in"),Ne=Ne("out");let Di=(t,e=1)=>Math.round(t*10**e)/10**e,Bi=(t,e,i,s,n,o=0)=>{e/=s,i/=n,t="cover"===t?Math.max(e,i):Math.min(e,i);return void 0!==o?{width:Di(s*t,o),height:Di(n*t,o)}:{width:s*t,height:n*t}};function zi(t,e,i,s,n,o,r=!1){(r||t<n||e<o)&&({width:t,height:e}=Bi("cover",n,o,t,e));r={x:t*i-n/2,y:e*s-o/2};return r.x=Math.min(t-n,Math.max(0,r.x)),r.y=Math.min(e-o,Math.max(0,r.y)),{position:r,mediaSize:{width:t,height:e}}}let Vi=b(b({},c),{},{fade:!1,scale:1,duration:5e3});var Hi=g=>(t,e)=>{var e=b(b({},Vi),e),{selector:i="img",focalPoint:s={x:.5,y:.5},set:n,scale:o}=e,e=x(e,ke),{offsetWidth:r,offsetHeight:a}=t;let h=t.querySelector(i);var i=n||{},n={width:h.clientWidth,height:h.clientHeight},{position:l,mediaSize:c}=(null!=i&&i.focalPoint||({left:l,top:c}=getComputedStyle(h),i.focalPoint={x:(-parseFloat("auto"===l?"0":l)+r/2)/n.width,y:(-parseFloat("auto"===c?"0":c)+a/2)/n.height}),zi(n.width,n.height,i.focalPoint.x,i.focalPoint.y,r,a)),{position:i,mediaSize:n}=zi(n.width*o,n.height*o,s.x,s.y,r,a);let d=h.style.transformOrigin,p=h.style.transform,{parts:u,reset:m}=(Object.assign(h.style,{transformOrigin:"top left"}),Fe(g)(h,b(b({},e),{},{direction:"custom",x:l.x-i.x,y:l.y-i.y,scale:n.width/c.width})));return t.style.overflow="hidden",{parts:u,reset:()=>{m(),h.style.transformOrigin=d,h.style.transform=p,C.remove(h)}}};let Ni={in:{move:Ve,moveAndTransform:Re,mask:i,maskAndTransform:qe,reveal:Ze,text:ii,revealText:ii,fade:ni,clipInset:ci,clipCircle:vi,clip:Pi,clipAndTransform:Mi,clipPolygon:Ci,clipDiagonal:xi,kenBurns:Hi("in")},out:{move:He,moveAndTransform:We,mask:je,maskAndTransform:$e,reveal:Ue,text:ei,revealText:ei,fade:si,clipInset:di,clipCircle:_i,clip:Ti,clipAndTransform:Ne,clipPolygon:Li,clipDiagonal:Si,kenBurns:Hi("out")}};var Fi=(t,e,i,s,n,o,r=0)=>{var{parts:t,reset:e}=Ye(t,e,i,s);return n=n||C.timeline(o),Array.isArray(t)?t.forEach(t=>{var{offset:t=0,params:e}=t;n.add(e,"string"==typeof t?t:t+r)}):({offset:s=0,params:o}=t,n.add(o,"string"==typeof s?s:s+r)),{timeline:n,reset:e,parts:t,phase:i}};Ye,Ni;function Ri(t,e){let i=!1;return[].some.call(t.attributes,t=>i=e.test(t.name)),i}let Wi=(t,e)=>{var i;return null!=(i=t.parentElement)&&i.insertBefore(e,t),e.appendChild(t),e},ji=(t,e,i)=>{let s="";return t.hasAttribute("data-"+e)&&(s=t.getAttribute("data-"+e),t.removeAttribute("data-"+e)),i&&t.hasAttribute("data-"+i)&&(s=t.getAttribute("data-"+i),t.removeAttribute("data-"+i)),!!s&&(t.setAttribute(e,s),!0)},$i=(t,e,i,s,n)=>{e/=s,i/=n,t="cover"===t?Math.max(e,i):Math.min(e,i);return{width:s*t,height:n*t}},qi=t=>"object"==typeof t&&0===Object.keys(t).length,d=(t,e="")=>"object"==typeof t&&void 0!==t.value?""+t.value+((null==t?void 0:t.unit)||e):e?""+t.value+e:t,f=t=>"object"==typeof t?t.value:t,Yi=(e,i)=>{let s={};return Object.keys(e).forEach(t=>{s[t]=i(e[t],t)}),s},Xi=t=>{try{return JSON.parse(t.replace(/'/g,'"'))}catch{console.warn("Given data value is not a valid JSON, skipped. \n "+t)}return null};function Ui(t,e){return t?new URL(e,t).href:e}function p(t,e,i){return t.hasAttribute(e)?"true"===(t=t.getAttribute(e))||"false"!==t&&t:i??null}let Zi=["type"];class Gi{static isAnimative(t){return Ri(t,/^(data(-\w+)*-animation-(in|out))$/g)}constructor(i,s,n,t){this.target=i,this.element=n,this.sourceElement=s;let o=_(this.sourceElement,"animation-in")||{},r=_(this.sourceElement,"animation-out")||{},a=!!t&&{type:"move",duration:1e3,direction:"top",movement:0},e=(this.animationsData=["none",...l].map(t=>{var e=m(o,t),t=m(r,t);return{animationIn:e?this.parseAnimationData(e):a,animationOut:t?this.parseAnimationData(t):a,target:i,sourceElement:s,targetElement:n}}),this.animatorIsSet=!1,u.on("breakpointChange",this.setAnimator,this),i.animateInOut=(t,e=!1)=>!!["in","out"].includes(t)&&this.startAnimation(t,e),i.show),h=(i.show=(t=!0)=>{e?e.call(i):i.element.classList.remove(g+"-is-hidden"),t&&i.animateInOut("in")},i.hide);i.hide=(t=!0)=>{t&&i.animateInOut("out")||(h?h.call(i):i.element.classList.add(g+"-is-hidden"),this.status="out-end")},i.progressInOut=(t,e)=>{["in","out"].includes(e)&&this.progressAnimation(e,t)},i.killInOutAnimation=()=>{this.removeActiveAnimator()}}parseAnimationData(t){t=t.replace(/'/g,'"');let e="";try{e=JSON.parse(t)}catch{return console.warn("Given animation data value is not a valid JSON, animation skipped. \n "+t),""}return e}_animationBegin(t,e){e&&this._progressed||(this.status=t+"-start",this.target.show(!1),this.target.trigger("in"===t?"animationInStart":"animationOutStart",[this.target,this.status,this.activeAnimator],!0))}_animationEnd(t,e){e&&this._progressed||(this.status=t+"-end",this.target.trigger("in"===t?"animationInEnd":"animationOutEnd",[this.target,this.status],!0),"in"===t?this.removeActiveAnimator():"out"===t&&this.target.hide(!1))}removeActiveAnimator(){this.activeAnimator&&(this.activeAnimator.reset(),this.activeAnimator=null)}generateNewAnimator(t){var e,i=m(this.animationsData);return this.hasAnimation(t,i)?(e=(i=i["in"===t?"animationIn":"animationOut"]).type,i=x(i,Zi),e=Fi(e,this.element,t,i,null,{autoplay:!1,begin:()=>this._animationBegin(t,!0),complete:()=>this._animationEnd(t,!0)}),this.status=t+"-init",this.activePhase=t,e):null}startAnimation(t,e=!1){var i;return this._progressed=!1,this.animatorIsSet||this.setAnimator(),!(!e&&t+"-end"===this.status||(t===this.activePhase&&this.activeAnimator||(this.removeActiveAnimator(),this.activeAnimator=this.generateNewAnimator(t)),!this.activeAnimator)||(i=this.activeAnimator.timeline,(e||"in"===t&&"in-init"===this.status||"out"===t&&"out-init"===this.status)&&(i.seek(0),i.play()),0))}progressAnimation(t,e){var i;this._progressed=!0,this.animatorIsSet||this.setAnimator(),t===this.activePhase&&this.activeAnimator||(this.removeActiveAnimator(),this.activeAnimator=this.generateNewAnimator(t)),this.activeAnimator&&(i=this.activeAnimator.timeline,i.seek(i.duration*e),1<=e&&this.status!==t+"-end"&&this._animationEnd(t),e<1&&this.status===t+"-end"||this.status===t+"-init")&&this._animationBegin(t)}setAnimator(){if(this.animatorIsSet=!0,"in-end"!==this.status){let t=0,e=!1;var i;this.activePhase||(this.activePhase="in"),this.activeAnimator&&(i=this.activeAnimator.timeline,t=i.progress,e=i.began&&!i.paused,this.removeActiveAnimator()),this.activeAnimator=this.generateNewAnimator(this.activePhase),this.activeAnimator?(i=this.activeAnimator.timeline,t&&i.seek(i.duration*(t/100)),e&&i.play()):this.status="in-end"}}hasAnimation(t,e){return"in"===t?!!e.animationIn:!!e.animationOut}}function Ki(t,e,i,s,n,o,r=!1){(r||t<n||e<o)&&({width:t,height:e}=$i("cover",n,o,t,e));r={x:t*i-n/2,y:e*s-o/2};return r.x=Math.min(t-n,Math.max(0,r.x)),r.y=Math.min(e-o,Math.max(0,r.y)),{position:r,mediaSize:{width:t,height:e}}}let Ji=(r,a,t,e="50% 50%",h)=>{var{objectFit:t=t,objectPosition:e=e}=r.dataset;let l=t.split(",").map(t=>t.trim()),c=e.split(",").map(t=>t.trim()),d,p,i=(t,e)=>{var i,s,n,o;!e&&d&&"custom"!==d||(d=m(l,t),p=m(c,t),"custom"!==d?(r.style.width="",r.style.height="",r.style.left="",r.style.right="",r.classList.remove(h+"-cropped"),e=r,i=d,s=p,o=!(n=!1),"tile"===(i=n&&e.hasAttribute("data-object-fit")?e.getAttribute("data-object-fit"):i)&&"IMG"===e.nodeName?(e.style.visibility="hidden",e.parentElement.style.backgroundImage=`url( ${e.getAttribute("data-src")||e.src})`):(e.hasAttribute("data-object-fit")&&!o||e.setAttribute("data-object-fit",i),e.style.objectFit=i,(s=n&&e.hasAttribute("data-object-position")?e.getAttribute("data-object-position"):s)&&(e.hasAttribute("data-object-position")&&!o||e.setAttribute("data-object-position",s),e.style.objectPosition=s))):({offsetWidth:i,offsetHeight:n}=a||r.parentElement,o=r,e=Yi(_(o,"crop"),t=>"false"!==t.trim()&&Xi(t)),{focalPoint:s,mediaSize:e}=m(e,t),{position:t,mediaSize:e}=Ki(e.width,e.height,s.x,s.y,i,n),r.style.objectFit="",r.style.width=`${null==e?void 0:e.width}px`,r.style.height=`${null==e?void 0:e.height}px`,r.style.left=`-${null==t?void 0:t.x}px`,r.style.top=`-${null==t?void 0:t.y}px`,r.classList.add(h+"-cropped")))};return u.on("breakpointChange",(t,e)=>i(e,!0)),i(u.activeBreakpoint),{update:()=>i(u.activeBreakpoint),currentObjectFit:d,currentObjectFitPosition:p}};let Qi=(t,e,i,s)=>{let n=t.querySelector("img");t=t.querySelectorAll("source");n||t.length?(n.removeAttribute("data-lazy-src"),t.forEach(t=>{ji(t,"srcset","depicter-srcset"),t.removeAttribute("data-lazy-src"),t.removeAttribute("data-lazy-srcset")}),ji(n,"src","depicter-src"),e&&n.addEventListener("load",e,!1),i&&n.addEventListener("error",i,!1),s&&window.addEventListener("resize",()=>{n.complete||s()})):e()};class ts extends t{constructor(t,e=!0){super(),this.parentEmitter=t,this.section=t,this.container=document.createElement("div"),this.container.classList.add(g+"-background-container"),this.container.classList.add(g+"-bg-container"),this.element=document.createElement("div"),this.element.classList.add(g+"-section-background"),this.animationWrap=document.createElement("div"),this.animationWrap.classList.add(g+"-background-animation-wrap"),this.animationWrap.appendChild(this.element),this.container.appendChild(this.animationWrap),t.composer.options.get("disableAnimations")||(this.inOutAnimation=new Gi(this,t.element,this.animationWrap,e)),this._onBgImageLoad=this._onBgImageLoad.bind(this),this._onBgImageLoadError=this._onBgImageLoadError.bind(this)}appendTo(t){t.appendChild(this.container)}appendBackground(t){this.element.appendChild(t)}appendBackgroundImage(t,e){this.backgroundImage=t,this.appendBackground(t),this.isPicture="PICTURE"===t.tagName,this.targetImg=this.isPicture?t.querySelector("img"):t;t=Ji(this.targetImg,this.element,e,void 0,g).update;this.section.on("resize",t,void 0,100),this.updateBgImageFit=t}loadBackgroundImage(){var e,t,i,s;this.backgroundImage&&(this.isPicture?Qi(this.backgroundImage,this._onBgImageLoad,this._onBgImageLoadError):(e=this.backgroundImage,t=this._onBgImageLoad,i=this._onBgImageLoadError,ji(e,"srcset"),ji(e,"srcset","depicter-srcset"),(s=()=>{var t=e.getAttribute("data-src")||e.getAttribute("data-depicter-src"),t=m(t.split(","));e.setAttribute("src",t)})(),e.removeAttribute("data-lazy-src"),e.complete?(t||i)&&(e.naturalWidth&&t?t():i&&i()):(t&&e.addEventListener("load",t,!1),i&&e.addEventListener("error",i,!1),u.on("breakpointChange",s))))}_onBgImageLoad(t){this.updateBgImageFit(),this.trigger("backgroundImageLoad",[t,this.backgroundImage])}_onBgImageLoadError(t){this.trigger("backgroundImageLoadError",[t,this.backgroundImage])}}class es extends t{constructor(t,e,i=!0){super(),this.element=t,this.composer=e,this.view=e.view,this.id=t.dataset.localId??t.id,this.eventPrefix="section",this.parentEmitter=this.composer,this.readyTrigger=new h(this.ready.bind(this)),this.loadTrigger=new h(this.loadContent.bind(this),!1),this.targetHeight=t.dataset.wrapperHeight?t.dataset.wrapperHeight.split(","):e.options.get("height"),this._active=!1,this.addDefaultAnimation=i,this._setupBackground()}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.isActivated=t,this.element.classList[t?"add":"remove"](g+"-active"),this.trigger(t?"activated":"deactivated",[this],!0),this.isReady)&&this.trigger(t?"readyAndActivated":"readyAndDeactivated",[this],!0)}get status(){return this._status}set status(t){var e;t!==this._status&&(this.element.classList.add(g+"-"+t),this._status&&this.element.classList.remove(g+"-"+this._status),e=this._status,this._status=t,this.trigger("statusChange",[this,t,e],!0))}reactive(){this.active&&(this.active=!1,this.active=!0)}calculateSize(){}mount(){!1!==this.firstMount?this.firstMount=!0:this.firstMount=!1,this.trigger("beforeMount",[this],!0),this.mounted=!0,this.isReady||this.isLoading||this.loadTrigger.exec(),this.trigger("afterMount",[this],!0)}unmount(){this.mounted=!1}ready(){this.element.classList.add(g+"-ready"),this.isReady=!0,this.isLoading=!1,this.trigger("ready",[this],!0),this._active&&this.trigger("readyAndActivated",[this],!0)}loadContent(){this.isLoading=!0,this.trigger("loadingStart",[this],!0),this.backgroundImage?(this._onBgLoad=this._onBgLoad.bind(this),this.background.on("backgroundImageLoad, backgroundImageLoadError",this._onBgLoad),this.background.loadBackgroundImage()):this.readyTrigger.exec()}checkResize(t){var e=this.element.offsetWidth,i=this.element.offsetHeight;!t&&this.height===i&&this.width===e||(this.width=e,this.height=i,this.trigger("resize",[this,e,i],!0))}getOffsetSize(){return this.element.offsetWidth}_setupBackground(){this.background=new ts(this,this.addDefaultAnimation),this.background.appendTo(this.element),this.backgroundImage=this.element.querySelector(`:scope > img.${g}-bg,:scope > picture.${g}-bg`),this.backgroundImage&&(this.background.appendBackgroundImage(this.backgroundImage,this.composer.options.get("sectionFit")),this.trigger("bgImageSetup",[this.backgroundImage],!0))}_onBgLoad(){this.trigger("bgImageLoad",[this],!0),this._bgLoaded||this.readyTrigger.exec(),this._bgLoaded=!0}}class is extends es{constructor(t,e){super(t,e,!1),this.space=0,this.merge=1,this.position=-1,this.offset=-1,this.size=0,this.element.hasAttribute("data-merge")&&(this.merge=(t=this.element.getAttribute("data-merge"),e=!0,t="string"==typeof t&&(t=t.replace(/\s+/g,"").split(","),e)?t.map(t=>Number.parseInt(t,10)):t)),this._columns=this.composer.options.get("columns"),this._width=this.composer.options.get("width"),this._isHorizontal=this.view.options.is("dir","h"),this._sectionSizing=this.composer.options.get("sectionSizing"),this.trigger("sectionCreate",[this],!0)}get pendingOffset(){return this._pendingOffset}set pendingOffset(t){t!==this._pendingOffset&&(this._pendingOffset=t,this.trigger("pendingOffsetChange",[this,t,t/this.size]))}triggerPendingOffsetChange(){this.trigger("pendingOffsetChange",[this,this._pendingOffset,this._pendingOffset/this.size])}get active(){return this._active}set active(t){this._active!==t&&this.isReady&&this.background.inOutAnimation&&this.background.inOutAnimation.startAnimation(t?"in":"out",!0),super.active=t}ready(){super.ready(),this._active&&this.background.inOutAnimation&&this.background.inOutAnimation.startAnimation("in")}calculateSize(){var t,e,i;"fit-content"===this._sectionSizing?this.size=parseInt(m(this._width),10):(t=m(this.merge),(e=this._columns?m(this._columns):0)&&1!==e?(i=this.view.size-this.space*(e-1),this.size=i/e,1<t&&(t=Math.min(e,t),this.size=this.size*t*(t-1),i+=this.space*(t-1))):this.size=this.view.size),this._isHorizontal?this.element.style.width=this.size+(this.view.antialiasFix?.5:0)+"px":this.element.style.width=this.view.width+(this.view.antialiasFix?.5:0)+"px",this.checkResize()}inRangeTest(t,e=1){return t>=this.position&&t<this.position+(this.size+this.space)*e}}e.registerSection("block",is);var ss=new WeakMap;class ns extends es{constructor(t,e){super(t,e),V(this,ss,""),this.space=0,this.inAnimation={duration:0,start:0},this.outAnimation={duration:0,start:0},this.appearDuration=0,this.disappearDuration=0,this.element.classList.add(g+"-anim-section"),this.disableAnimationAdapterControl=!0,this.trigger("sectionCreate",[this],!0),this.once("readyAndActivated",()=>{this.startInOutAnimation("in")})}get position(){return this.outAnimation.start}get size(){return this.disappearDuration}updateDurations(){var t,e=W;t=this,ss.get(z(ss,t))!==e&&(t=this,e=e,ss.set(z(ss,t),e),this.inAnimation.duration=this.getInOutAnimationDuration("in"),this.outAnimation.duration=this.getInOutAnimationDuration("out"))}inRangeTest(t){return t>this.inAnimation.start&&t<this.inAnimation.start+this.appearDuration?"in":t>this.outAnimation.start&&t<this.outAnimation.start+this.disappearDuration?"out":t===this.outAnimation.start&&"in-end"}remaining(t,e){e=e||this.inRangeTest(t);return"in"===e?1-(t-this.inAnimation.start)/this.appearDuration:"out"===e||"in-end"===e?1-(t-this.outAnimation.start)/this.disappearDuration:NaN}getLastAnimativeElement(t){let i="in"===t?"animationIn":"animationOut",s,n=0;return[...this.layersAnimations||[],this.background.inOutAnimation.animationsData].forEach(t=>{var e;t&&(t=m(t))[i]&&((e=(t[i].duration||0)+(t[i].delay||0))>n&&(s=t.target),n=Math.max(e,n))}),{target:s,duration:n}}getInOutAnimationDuration(t,e){return Math.max(this.getLastAnimativeElement(t).duration,"in"===t&&(null==e||null==(t=e.getInOutAnimationDuration)?void 0:t.call(e,"out"))||0)}startInOutAnimation(i){var t,e;this.killInOutAnimation(),null!=this&&null!=(t=this.layersController)&&t.layers.forEach(t=>{var e;null!=t&&null!=(e=t.animateInOut)&&e.call(t,i,!0)}),null!=(t=this.background)&&null!=(e=t.animateInOut)&&e.call(t,i,!0),this.getLastAnimativeElement(i).target.on("animationInEnd, animationOutEnd",()=>{this.trigger("allInOutAnimationsEnd",[i])},this)}progressInOutAnimation(i,s){var t,e;this.killInOutAnimation(),s=Math.max(0,Math.min(1,s)),null!=this&&null!=(e=this.layersController)&&e.layers.forEach(t=>{var e;null!=t&&null!=(e=t.progressInOut)&&e.call(t,s,i,!0)}),null!=(t=(e=this.background).progressInOut)&&t.call(e,s,i,!0)}killInOutAnimation(){var t,e;this.getLastAnimativeElement("in").target.offOnContext(this),this.getLastAnimativeElement("out").target.offOnContext(this),null!=this&&null!=(e=this.layersController)&&e.layers.forEach(t=>{var e;null!=t&&null!=(e=t.killInOutAnimation)&&e.call(t)}),null!=(t=(e=this.background).killInOutAnimation)&&t.call(e)}calculateSize(){this.element.style.width=this.view.width+"px",this.checkResize()}}e.registerSection("animative",ns);var Ve=window.getComputedStyle(document.documentElement,""),Re=(Array.prototype.slice.call(Ve).join("").match(/-(moz|webkit|ms)-/)||""===Ve.OLink&&["","o"])[1],os={dom:"WebKit|Moz|MS|O".match(new RegExp("("+Re+")","i"))[1],lowercase:Re,css:"-"+Re+"-",js:{moz:"Moz",webkit:"Webkit",o:"O",ms:"ms"}[Re]};class rs extends Kt{constructor(){super(),this.options=new r,this.readOptions=this.readOptions.bind(this),this.options.observe(this.options.register({dir:"h",reverse:!1,space:0,loop:!1,instantActive:!0}),this.readOptions),this.antialiasFix=!1,this.readOptions()}readOptions(){let e=this._positionProp;var t=this.options.get("reverse");this._space=this.options.get("space"),this._loop=this.options.get("loop"),this._reverseFactor=t?1:-1,this.activeEnteringSection=this.options.get("instantActive"),"h"===this.options.get("dir")?(this.sizeProp="width",this.offsetProp="offsetWidth",this._positionProp=t?"right":"left",this._transformProp="X",this.element.classList.remove(g+"-dir-v"),this.element.classList.add(g+"-dir-h")):(this.sizeProp="height",this.offsetProp="offsetHeight",this._transformProp="Y",this._positionProp=t?"bottom":"top",this.element.classList.remove(g+"-dir-h"),this.element.classList.add(g+"-dir-v")),this.sections.forEach(t=>{t.hasCustomSpace||(t.space=this._space),t.element.style[e]="",t.sizeReference=this.offsetProp}),this.resize(),this.update()}update(t=!0){super.update(t),this._paintScheduled||(this._paintScheduled=!0,requestAnimationFrame(()=>{this.sections.forEach(t=>this.locateSection(t)),this.sectionsContainer.style[os.js+"Transform"]="translate"+this._transformProp+"("+this._position*this._reverseFactor+"px)",this._paintScheduled=!1}))}enableAntialiasFix(){this.antialiasFix||(this.antialiasFix=!0,this.update())}disableAntialiasFix(){this.antialiasFix&&(this.antialiasFix=!1,this.update())}locateSection(t){t.element.style[this._positionProp]=t.offset-(this.antialiasFix?.5:0)+"px"}_afterSectionAdd(t){t.customSpace||(t.space=this._space),super._afterSectionAdd(t)}}e.registerView("basic",rs);let as={transform:{translateX:[0,0],translateY:[0,0],translateZ:[0,0],rotateX:[0,0],rotateY:[0,0],rotateZ:[0,0],scale:[1,1],skewX:[0,0],skewY:[0,0]},opacity:[1,1],limitDistance:!1,limitOpacity:!1,ease:null},hs={translateX:"px",translateY:"px",translateZ:"px",rotateX:"deg",rotateY:"deg",rotateZ:"deg",skewY:"deg",skewX:"deg"},ls={fadeBasic:{className:g+"-fade-basic-view",opacity:[.4,.4]},wave:{className:g+"-wave-view",transform:{translateZ:[-300,-300]}},fadeWave:{className:g+"-fade-wave-view",opacity:[.6,.6],transform:{scale:[.875,.875]}},flow(t){return{className:g+"-flow-view",transform:b(b(b({},"h"===t.dir&&{rotateY:[30,-30]}),"v"===t.dir&&{rotateX:[-30,30]}),{},{translateZ:[-600,-600]})}},fadeFlow(t){return{className:g+"-fade-flow-view",opacity:[.6,.6],transform:b(b(b({},"h"===t.dir&&{rotateY:[50,-50]}),"v"===t.dir&&{rotateX:[-50,50]}),{},{translateZ:[-100,100]})}}};class cs extends rs{constructor(){super(),this.options.register({transformStyle:"flow"}),this.on("elementAppend",()=>{var t=this.options.toObject();this.transformOptions="function"==typeof ls[t.transformStyle]?ls[t.transformStyle](t):ls[t.transformStyle],this.element.classList.add(g+"-transform-view"),this.element.classList.add(this.transformOptions.className)})}locateSection(t){t.element.style[this._positionProp]=t.offset+"px";var e=((t,e)=>{e=b(b(b({},as),e),{},{transform:b(b({},as.transform),e.transform)});let n=Math.abs(t),o="",r=(e.limitDistance&&(n=Math.min(n,1)),t<0?0:1),i=1;return Object.entries(e.transform).forEach(([t,e])=>{var i,s=hs[t]||"";"scale"===t?1!==e[r]&&(i=Math.abs(e[r]**n),o+="scale("+i+") "):e[r]&&(o+=t+"("+n*e[r]+s+") ")}),{opacity:i=e.opacity[r]<1?e.limitOpacity&&1<n?0:1-Math.min(n,1-e.opacity[r]):i,transform:o}})(t.pendingOffset/this.size,this.transformOptions);t.element.style.transform=e.transform,t.element.style.opacity=e.opacity}}e.registerView("transform",cs);class ds extends rs{update(t=!0){this._sectionsCount=this.sections.length,t&&this.arrange(),this.locateInLoop(),this.updateStatusAndIndex(),this.trigger("update",[this._position],!0),this._paintScheduled=!0,requestAnimationFrame(()=>{this.sections.forEach(t=>this.locateSection(t)),this._paintScheduled=!1})}locateSection(t){t.element.style.zIndex=this.count-Math.abs(Math.ceil(t.pendingOffset/this.size))}}e.registerView("baseStack",ds);class ps extends ds{constructor(){super(),this.element.classList.add(g+"-stack-view"),this.options.register({scaleFactor:.2}),this.on("elementAppend",()=>{this.scaleFactor=this.options.get("scaleFactor")})}locateSection(t){var e=t.pendingOffset/this.size,i=Math.abs(e);super.locateSection(t),i<1?(t.element.style.visibility="",e<0?t.element.style.transform="scale("+(1-i*this.scaleFactor)+")":(t.element.style.transform=`translate${this._transformProp}(${-i*this.size}px)`,t.element.style.zIndex=1e3),t.element.classList.remove(g+"-section-hidden")):t.element.classList.add(g+"-section-hidden")}}e.registerView("stack",ps);class us extends ds{constructor(){super(),this.element.classList.add(g+"-fade-view")}locateSection(t){var e=t.pendingOffset/this.size,e=Math.abs(e);super.locateSection(t),e<1?(t.element.style.opacity=1-e,t.element.classList.remove(g+"-section-hidden")):t.element.classList.add(g+"-section-hidden")}}e.registerView("fade",us);class ms extends ds{constructor(){super(),this.element.classList.add(g+"-mask-view"),this.options.register({maskParallax:0}),this.on("elementAppend",()=>{this.maskParallax=this.options.get("maskParallax")}),this.on("sectionAdd",this._wrapSection.bind(this))}_wrapSection(t,e){var i=document.createElement("div");i.classList.add(g+"-section-mask"),e.element.parentElement.insertBefore(i,e.element),i.appendChild(e.element),e.maskElement=i}locateSection(t){var e=t.pendingOffset/this.size,i=Math.abs(e);super.locateSection(t),i<1?(t.element.style.visibility="",t.maskElement.style.transform=`translate${this._transformProp}(${e*this.size}px)`,t.element.style.transform=`translate${this._transformProp}(${-e*this.size*(1-this.maskParallax)}px)`,t.element.classList.remove(g+"-section-hidden")):t.element.classList.add(g+"-section-hidden")}}e.registerView("mask",ms);class gs extends ds{constructor(){super(),this.element.classList.add(g+"-cube-view"),this.options.register({shadow:.8,dolly:500}),this.on("elementAppend",()=>{this._rotateAxis="h"===this.options.get("dir")?"rotateY":"rotateX",this._rotateDir="h"===this.options.get("dir")?-1:1,this._shadow=this.options.get("shadow"),this._dolly=this.options.get("dolly")})}update(t=!0){this._sectionsCount=this.sections.length,t&&this.arrange(),this.locateInLoop(),this.updateStatusAndIndex(),this.trigger("update",[this._position],!0),this._paintScheduled=!0,requestAnimationFrame(()=>{this.sections.forEach(t=>this.locateSection(t)),this._paintScheduled=!1})}locateSection(t){var e=t.pendingOffset/this.size,i=Math.abs(e);super.locateSection(t),i<1?(t.element.style.visibility="",t.element.style.transform=this._rotateAxis+"("+-e*this._rotateDir*90+"deg)",t.element.style.transformOrigin="50% 50% -"+this.size/2+"px",this._shadow&&(t.element.style.filter=`brightness(${1-i*this._shadow})`),t.element.classList.remove(g+"-section-hidden"),this._dolly&&0<e&&(this.sectionsContainer.style.transform=`translateZ(${-this._dolly/2+Math.abs(i-.5)*this._dolly}px)`)):t.element.classList.add(g+"-section-hidden")}}e.registerView("cube",gs);class vs extends Gt{constructor(){super(),this.options=new r,this.options.register({loop:!0,dir:"h",reverse:!1,transitionType:"animation"}),this.element.classList.add(g+"-animative-view"),this.size=0,this.scrollable=!0,this._position=0}arrange(){var t=this._length;this._length=0,this._loop=this.options.get("loop"),this.sections.forEach((t,e)=>{t.index=e;e=this.sections[this.normalizeVal(e+1,this.sections.length)];t.calculateSize(this.options.get("dir")),t.updateDurations(),t.outAnimation.start=this._length,e.updateDurations(),e.inAnimation.start=this._length,e.appearDuration=Math.max(t.outAnimation.duration,e.inAnimation.duration),t.disappearDuration=e.appearDuration,this._length+=e.appearDuration}),this.trigger("arrange",null,!0),this._length!==t&&this.trigger("lengthChange",[this._length],this)}get nominalLength(){var t;return this._length-(!this._loop&&(null==(t=this.sections[this.sectionsCount-1])?void 0:t.disappearDuration)||0)}get length(){return this._length}get dragFactor(){var t="h"===this.options.get("dir")?"clientWidth":"clientHeight";return this.currentSection.size/this.element[t]}get position(){return this._position}set position(t){t=this._loop?this.normalizeVal(t,this._length):Math.max(0,Math.min(t,this.nominalLength)),this._position!==t&&(this.scrollDirection=t>this._position?"forward":"backward",this._position=t,this.update(!1),this.trigger("scroll",[this._position]))}resize(){var t=super.resize();return this.size=this.length/(this.sections.length||1),t}update(t=!0){super.update(),t&&this.arrange(),this.updateStatusAndIndex(),this.sections.forEach(t=>this.updateSection(t))}updateStatusAndIndex(){var t,e;this.sections.length&&([e]=t=this.getIndexesAtPosition(this._position),this.currentSectionAppearDuration=this.sections[t[0]].appearDuration,this.sections.forEach(t=>{let e="neutral";var i=t.inRangeTest(this._position);"in"===i?e="in-progress":"out"===i&&(e="out-progress"),t.status=e}),this.indexes.toString()!==t.toString()&&(this.indexes=t,this.trigger("indexesChange",[this.indexes])),this.index!==e)&&(this.index=e,this.trigger("indexChange",[this.index]))}updateStatusAndIndexByBetweenAnimation(i,s){this.sections.forEach(t=>{let e="neutral";t.index===s?e="in-progress":t.index===i&&(e="out-progress"),t.status=e,t.active="neutral"!==e});var t=[s];this.indexes.toString()!==t.toString()&&(this.indexes=t,this.trigger("indexesChange",[this.indexes])),this.index!==s&&(this.index=s,this.trigger("indexChange",[this.index]))}updateSection(t){var e=t.inRangeTest(this._position);e?(t.active=!0,t.isReady&&("in"===e?(e=(this._position-t.inAnimation.start)/t.inAnimation.duration,t.progressInOutAnimation("in",e)):(e=(this._position-t.outAnimation.start)/t.outAnimation.duration,t.progressInOutAnimation("out",e)))):t.active=!1}getIndexAtPosition(e){let t,i=null;return this._loop&&(e=this.normalizeVal(e,this._length)),this.sections.filter(t=>t.inRangeTest(e)).forEach(t=>{(!i||t.remaining(e)<.5)&&(i=t)}),(null==(t=i)?void 0:t.index)||0}getIndexesAtPosition(t){return[this.getIndexAtPosition(t)]}scrollTo(t,e=!0,i=1,s="auto",n){return t=this.normalizePositionByDirection(t,s),e?(this.killScrollAnimation(),(n=b(b({easing:"easeOutExpo",duration:1e3*i},n),{},{complete:()=>{this.animating=!1,this.trigger("scrollToAnimationEnd",void 0,!0)}})).position=t,this.animating=!0,C(b({targets:this},n))):this.position=t,!0}killScrollAnimation(){this.animating&&(C.remove(this),this.animating=!1)}normalizePositionByDirection(t,e="auto"){t=this._loop?this.normalizeVal(t,this._length):Math.min(t,this.nominalLength);let i=0;if(this._loop&&"off"!==e){var s=this._position,n=t,o=s<n?n-s:this._length-s+n,r=s<n?n-this._length-s:n-s;switch(e){case"auto":i=Math.abs(r)<Math.abs(o)?r:o;break;case"backward":i=r;break;default:i=o}return this._position+i}return t}normalizeVal(t,e){return(t%=e)<0&&(t+=e),t}_afterSectionAdd(t,e){super._afterSectionAdd(t,e),t.on("ready",()=>this.updateSection(t))}}e.registerView("animroll",vs);e.registerAddon("autoHeight",class{constructor(t){this.composer=t,this.composer.on("init",this._setup,this)}update(t){let e=0;this.composer.view.indexes.forEach(t=>{e=Math.max(this.composer.view.sections[t].element.offsetHeight,e)}),0!==e&&("indexesChange"!==t?this.composer.view.element.style.transitionDuration="0ms":e!==this.lastHeight&&(this.composer.view.element.style.transitionDuration="300ms"),this.lastHeight=e,this.composer.view.element.style.height=e+"px","indexesChange"!==t)&&requestAnimationFrame(()=>this._checkScrollbar())}_checkScrollbar(){var t=document.body.clientWidth-window.innerWidth;this.scrollbarWidth!==t&&(this.scrollbarWidth=t,this.composer.layoutController.update())}_setup(){"fullscreen"!==this.composer.options.get("layout")&&(this.composer.element.classList.add(g+"-auto-height"),this.scrollbarWidth=document.body.clientWidth-window.innerWidth,this.composer.view.element.addEventListener("transitionend",t=>{this.composer.view.element.style.transitionDuration="0ms",t.target===this.composer.view.element&&"height"===t.propertyName&&this._checkScrollbar()}),this.composer.on("indexesChange, sectionResize, resize, sectionReady",this.update,this),this.update())}});let _s={};class y extends t{static registerLayer(t,e){if(v.call(_s,t))throw new Error(`This layer (${t}) is already registered.`);_s[t]=e}static get layers(){return _s}constructor(t,e,i,s=!1,n=!1,o=!1){super(),this.holder=t,(this.holder.layersController=this).wrapperWidth=e,this.wrapperHeight=i,this.keepWrapperAspectRatio=s,this.upscaleEnabled=n,this.unwrapLayers=o,this.layers=[],this.container=document.createElement("div"),this.container.classList.add(g+"-layers-container"),this.layersFold=document.createElement("div"),this.layersFold.classList.add(g+"-layers-fold"),this.wrapper=document.createElement("div"),this.wrapper.classList.add(g+"-layers-wrapper"),this.container.appendChild(this.wrapper),this.wrapper.appendChild(this.layersFold)}async setupLayers(t,e){this.container=document.createElement("div"),this.container.classList.add(g+"-layers-container"),this.layersFold=document.createElement("div"),this.layersFold.classList.add(g+"-layers-fold"),this.wrapper=document.createElement("div"),this.wrapper.classList.add(g+"-layers-wrapper"),this.container.appendChild(this.wrapper),this.wrapper.appendChild(this.layersFold),await this._initLayers(t,null,e),this.hasFixedLayers&&this.holder.on("statusChange, activated, deactivated",this._setFixedContainerClass,this),this._updateWrapperSize(),u.on("breakpointChange",this._updateWrapperSize,this),this.keepWrapperAspectRatio&&this.holder.on("resize",this._updateWrapperSize,this),this.trigger("layersSetup",[this])}changeWrapperSize(t,e){this.wrapperWidth=t,this.wrapperHeight=e,this._updateWrapperSize()}async _initLayers(t,n,o,r){var a,h,l,c,d=Array.from(t.querySelectorAll(`:scope > .${g}-layer,:scope > a .${g}-layer`));if(d.length)for(let s=0;s<d.length;s+=1){var p=d[s];let t=!1,e=("A"===p.parentNode.nodeName&&(t=!0),p.getAttribute("data-type")||"custom"),i=(v.call(_s,e)||(e="custom"),_s[e]);if(i)try{var u=new(i=i.external?(a=this.composer,h=i,c=l=void 0,window.Depicter.externalLayers??={},window.Depicter.externalLayers[h.type]||({styles:l,script:c}=h.meta,c&&await a.dependencyManager.loadScript(Ui(window.Depicter.basePath,c)),l&&await a.dependencyManager.loadStylesheet(Ui(window.Depicter.basePath,l))),await window.Depicter.externalLayers[h.type]):i)(p,e,this,this.holder,s,t,r),m="false"!==p.getAttribute("data-wrap");u.positionType=p.getAttribute("data-position"),"static"===u.positionType?u.frame.classList.add(g+"-static"):u.isFixed=!0!==o&&"fixed"===u.positionType,u.isFixed?this._appendToFixedContainer(u,m):n?n.appendChild(u.frame):this._appendToLayersContainer(u,m),await u.init(),this.layers.push(u),u.nestable&&await this._initLayers(u.element,u.element,!0,u)}catch(t){console.error("Layer initialization failed:",t)}}}_updateWrapperSize(){var e=parseInt(m(this.wrapperWidth),10),i=parseInt(m(this.wrapperHeight),10),t=i+"px",s=i/e;if(this.wrapper)if(this.keepWrapperAspectRatio){let t=this.holder.getOffsetSize()/e;this.upscaleEnabled||(t=Math.min(1,t));var n=this.composer.element.offsetHeight-this.wrapper.offsetHeight,o=Math.round(i*t+n);0==window.innerWidth-document.body.clientWidth&&o>window.innerHeight&&o-window.innerHeight<=Math.ceil(15*s)?this.wrapper.style.height=window.innerHeight-n+"px":this.wrapper.style.height=i*t+"px",this.unwrapLayers||(this.wrapper.style.maxWidth=e*t+"px")}else this.wrapper.style.height=t,this.unwrapLayers||(this.wrapper.style.maxWidth=e+"px");this.fixedWrapper&&(this.fixedWrapper.style.maxWidth=e+"px",this.fixedWrapper.style.maxHeight=t)}_setFixedContainerClass(t,e,i,s){"activated"===t?this.fixedContainer.classList.add(g+"-active"):"deactivated"===t?this.fixedContainer.classList.remove(g+"-active"):(this.fixedContainer.classList.add(g+"-"+i),s&&this.fixedContainer.classList.remove(g+"-"+s))}_appendToLayersContainer(t,e){this.hasLayers=!0,(e?this.layersFold:this.container).appendChild(t.frame)}_appendToFixedContainer(t,e){this.hasFixedLayers||(this.hasFixedLayers=!0,this.fixedContainer=document.createElement("div"),this.fixedContainer.classList.add(g+"-layers-container"),this.fixedContainer.classList.add(g+"-fixed"),this.fixedLayersFold=document.createElement("div"),this.fixedLayersFold.classList.add(g+"-layers-fold"),this.fixedWrapper=document.createElement("div"),this.fixedWrapper.classList.add(g+"-layers-wrapper"),this.fixedContainer.appendChild(this.fixedWrapper),this.fixedWrapper.appendChild(this.fixedLayersFold)),(e?this.fixedLayersFold:this.fixedContainer).appendChild(t.frame)}}var fs=(t,i)=>t.map((t,e)=>(void 0===t||""===t)&&Array.isArray(i)?i[e]:t);e.registerAddon("layersAdapter",class{constructor(t){this.composer=t,this.composer.options.register({fadeLayers:!1,unwrapLayers:!1}),this.composer.on("beforeSectionsSetup",this._init,this)}_init(){this.wrapperWidth=this.composer.options.get("width"),this.wrapperHeight=this.composer.options.get("height"),this.composer.options.get("fadeLayers")&&this.composer.element.classList.add(g+"-fade-layers"),this.composer.on("sectionBeforeMount",this.readLayers,this)}async readLayers(t,e){var i,s;e.layersController||(e.loadTrigger.hold(),this.wrapperWidth=this.composer.options.get("width"),e.element.dataset.wrapperWidth&&(this.wrapperWidth=fs(e.element.dataset.wrapperWidth.split(","),this.wrapperWidth)),this.wrapperHeight=this.composer.options.get("height"),e.element.dataset.wrapperHeight&&(this.wrapperHeight=fs(e.element.dataset.wrapperHeight.split(","),this.wrapperHeight)),(i=new y(e,this.wrapperWidth,this.wrapperHeight,this.composer.options.get("keepAspectRatio"),this.composer.options.get("upscale"),this.composer.options.get("unwrapLayers"))).composer=this.composer,i.parentEmitter=this.composer,await(e.layersController=i).setupLayers(e.element),e.element.appendChild(i.container),i.hasFixedLayers&&(this.composer.fixedLayersContainer||((s=document.createElement("div")).classList.add(g+"-fixed-layers"),this.composer.view.element.appendChild(s),this.composer.fixedLayersContainer=s,this.composer.trigger("fixedLayersContainer")),this.composer.fixedLayersContainer.appendChild(i.fixedContainer)),e.loadTrigger.exec())}});e.registerAddon("layerSizing",class{constructor(t){this.composer=t,this.composer.on("layerCreate",this._checkLayer,this),this.layersList=[],u.on("breakpointChange",this._update,this)}_checkLayer(t,e){var i=e.element.getAttribute("data-width")||"",s=e.element.getAttribute("data-height")||"";(i||s)&&(s={layer:e,height:s&&s.split(","),width:i&&i.split(",")},this.layersList.push(s),this._updateLayer(e,s.width,s.height,a().name))}_updateLayer(t,e,i,s){t.relativeSizing=!1,i&&((i=m(i,s)).includes("%")?(t.frame.classList.add(g+"-relative-height"),t.frame.style.height=i,t.element.style.height="",t.relativeSizing=!0):(t.frame.classList.remove(g+"-relative-height"),t.frame.style.height="",t.element.style.height=i)),e&&((i=m(e,s)).includes("%")?(t.frame.classList.add(g+"-relative-width"),t.frame.style.width=i,t.element.style.width="",t.relativeSizing=!0):(t.frame.classList.remove(g+"-relative-width"),t.frame.style.width="",t.element.style.width=i))}_update(t,s){this.layersList.forEach(({layer:t,height:e,width:i})=>this._updateLayer(t,i,e,s))}});class ys extends t{constructor(t,e){super(),this.composer=t,this.eventPrefix="layersSurface",this.element=e,this.isSurface=!0,this.loadTrigger=new h(this.loadStart.bind(this)),this.readyTrigger=new h(this.ready.bind(this)),this.readyTrigger.hold(),this.composer.once("init",()=>this.readyTrigger.exec()),this._columns=this.composer.options.get("columns"),this._space=this.composer.options.get("viewOptions.space")??0}setup(){this.trigger("beforeSetup",[this],!0),this.layersController.layers.forEach(t=>{t.isOnSurface=!0,t.element.hasAttribute("data-show-on-sections")&&(t.showOnSections=t.element.getAttribute("data-show-on-sections").replace(/\s+/g,"").split(",").map(t=>t.replace(/depicter-\d+-/,""))),t.element.hasAttribute("data-hide-on-sections")&&(t.hideOnSections=t.element.getAttribute("data-hide-on-sections").replace(/\s+/g,"").split(",").map(t=>t.replace(/depicter-\d+-/,""))),t.isHidden=this._checkForShow(t)},this),this.loadTrigger.exec(),this.composer.on("resize",()=>this.trigger("resize",[this],!0),this)}_changeLayersState(){var t;null!=(t=this._startingSection)&&t.off("readyAndActivated",this._changeLayersState,this),this._startingSection=null,this.layersController.layers.forEach(t=>{t.isHidden&&this._checkForShow(t)&&t.show(),t.isHidden||this._checkForShow(t)||t.hide()}),this.composer.trigger("foregroundLayersStatusCheck")}loadStart(){this.trigger("loadingStart",[this],!0),this.readyTrigger.exec()}ready(){this.element.classList.add(g+"-ready"),this.element.classList.add(g+"-active"),this.isReady=!0,this.active=!0,this.isActivated=!0,this.ready=!0,this.composer.on("changeStart",this._changeLayersState,this);var t=this.composer.view.currentSection;t.isReady?this._changeLayersState():(t.once("readyAndActivated",this._changeLayersState,this),this._startingSection=t,this.layersController.layers.forEach(t=>{this._checkForShow(t)||t.hide()})),this.trigger("ready",[this],!0),this.trigger("readyAndActivated",[this],!0)}getOffsetSize(){var t=this.element.offsetWidth,e=m(this._columns)??1;return 1<e?t/e-this._space*(e-1):t}_checkForShow(t){var e,i=this.composer.navigator.targetSectionIndex,i=(null==(i=this.composer.view.sections[i])?void 0:i.id)??null;return null!==i&&(e=t.hideOnSections,(t=t.showOnSections)&&(this._lastShowStatus=!!i&&-1!==t.indexOf(i)),this._lastShowStatus=!i||!e||e.length&&-1===e.indexOf(i)),this._lastShowStatus}}e.registerAddon("overlayLayersAdapter",class{constructor(t){this.composer=t,this.composer.on("beforeSectionsSetup",this._init,this)}async _init(){var t;this.wrapperWidth=this.composer.options.get("width"),this.wrapperHeight=this.composer.options.get("height"),this.layersContainer=this.composer.element.querySelector(`.${g}-overlay-layers`),this.layersContainer&&(this.layersSurface=new ys(this.composer,this.layersContainer),this.layersSurface.parentEmitter=this.composer,this.composer.element.appendChild(this.layersContainer),(t=new y(this.layersSurface,this.wrapperWidth,this.wrapperHeight,this.composer.options.get("keepAspectRatio"),this.composer.options.get("upscale"))).parentEmitter=this.composer,t.composer=this.composer,await(this.layersController=t).setupLayers(this.layersContainer),this.composer.on("indexesChange",this._updateWrapperSize,this),t.hasLayers&&this.layersSurface.element.appendChild(t.container),this.composer.overlayLayers=this.layersSurface,this.layersSurface.setup(),this.composer.trigger("overlayLayersAdapterSetup",[this.layersSurface]))}_updateWrapperSize(t,e){e=this.composer.view.sections[e[0]];this.wrapperWidth=this.composer.options.get("width"),null!=e&&e.element.dataset.wrapperWidth&&(this.wrapperWidth=fs(e.element.dataset.wrapperWidth.split(","),this.wrapperWidth)),this.wrapperHeight=this.composer.options.get("height"),null!=e&&e.element.dataset.wrapperHeight&&(this.wrapperHeight=fs(e.element.dataset.wrapperHeight.split(","),this.wrapperHeight)),this.layersController.changeWrapperSize(this.wrapperWidth,this.wrapperHeight)}});class ws{constructor(t,e=""){this.element=t,this.segments=[],this.transform=e.length?e+"Transform":"transform",this._id=0}add(t,e=0){return this._id+=1,this.segments.push({transform:t,depth:e,id:this._id}),this._sort(),t&&t.length&&this._apply(),this._id}update(t,e,i){e=this._find(e);-1!==e&&(void 0!==i&&(this.segments[e].depth=i,this._sort()),null!==t)&&(this.segments[e].transform=t,this._apply())}remove(t){t=this._find(t);-1!==t&&(this.segments.splice(t,1),this._apply())}_apply(){if(0===this.segments.length)this.element.style[this.transform]="";else{let e="";this.segments.forEach(t=>{t.transform&&(e+=t.transform+" ")}),this.element.style[this.transform]=e}}_sort(){this.segments.sort((t,e)=>t.depth-e.depth)}_find(i){let s=-1;return this.segments.some((t,e)=>(s=e,i===t.id)),s}}let bs=["width","height","padding-bottom","padding-top","padding-left","padding-right"],xs=["font-size"];class Ss{constructor(t,e,i){this.layer=t,this.isEnabled=i,this.positionHandler=e,this.resizeType=t.element.getAttribute("data-resize-type")||"scale-relocate",this.resetResize="false"!==t.element.getAttribute("data-reset-resize"),this.scaleType=t.element.getAttribute("data-scale-type")||"scale",this.upscale=t.element.getAttribute("data-upscale"),this.scale=-1!==this.resizeType.indexOf("scale"),this.relocate=-1!==this.resizeType.indexOf("relocate"),"true"===this.upscale?this.upscale=!0:null===this.upscale&&(this.upscale=this.layer.composer.options.get("upscale")),this._firstLocate=!0,this.scale&&("scale"===this.scaleType?this.scaleTransform=t.frameTransform.add(null,100):this.layerInlineStyle=this.layer.element.getAttribute("style"),this.updateBaseStyle())}updateBaseStyle(){var e=this.scaleType.toLowerCase();if("scale"!==e){let t;switch(e){case"box":default:t=bs;break;case"typography-box":t=[].concat(bs,xs);break;case"typography":t=xs}this.baseStyle={},this.layer.element.setAttribute("style",this.layerInlineStyle),t.forEach(t=>{var e=getComputedStyle(this.layer.element)[t];this.baseStyle[t]=e})}}update(){var e=a().name,i=m(this.layer.controller.wrapperWidth,e);let s=this.layer.holder.getOffsetSize()/i;if(this.isEnabled&&m(this.isEnabled,e)||(s=1),this.scale)if(this.upscale&&!this.layer.isOnSurface||(s=Math.min(1,s)),"scale"===this.scaleType){if(this.layer.relativeSizing)return;this.layer.frameTransform.update(`scale(${s})`,this.scaleTransform)}else{let e=this.positionHandler;Object.keys(this.baseStyle).forEach(t=>{"width"===t&&e.floatWidth||"height"===t&&e.floatHeight||(this.layer.element.style[t]=parseFloat(this.baseStyle[t])*s+"px")})}if(this.relocate){i=this.positionHandler.activeOffset,e=i.origin||"tl";let t=s;var n=this.layer.frame;if(this.upscale||(t=Math.min(1,t)),-1===i.x.indexOf("%")){var o=parseInt(i.x,10)*t;switch(e.charAt(1)){case"l":default:n.style.left=o+"px";break;case"r":n.style.right=o+"px";break;case"c":n.style.left=0==o?"50%":"calc( 50% + "+o+"px )"}}if(-1===i.y.indexOf("%")){var r=parseInt(i.y,10)*t;switch(e.charAt(0)){case"t":default:n.style.top=r+"px";break;case"b":n.style.bottom=r+"px";break;case"m":n.style.top=0==r?"50%":"calc( 50% + "+r+"px )"}}}}}let As={t:"top",m:"center",b:"bottom",l:"left",r:"right",c:"center"};class ks{constructor(t){(this.layer=t).frame.classList.add(g+"-pos-absolute"),this.layer.frame.style.zIndex=this.layer.index+10;let e=b({none:{x:"0px",y:"0px",origin:"tl"}},_(t.element,"offset"));Object.keys(e).forEach(t=>{"string"==typeof e[t]&&(e[t]=this._getOffsetObject(e[t]))}),this.layer.offsets=e,this.layer.element.getAttribute("data-responsive-scale")&&!this.layer.nested&&(t=this.layer.element.getAttribute("data-responsive-scale").split(",").map(t=>t.length?"true"===t:""),this.resizeHandler=new Ss(this.layer,this,t),this.layer.holder.on("resize, readyAndActivated",this.resizeHandler.update,this.resizeHandler)),u.on("breakpointChange",this.locate,this)}locate(){var t=this.layer.frame,e=m(this.layer.offsets),i=(void 0!==(this.activeOffset=e).width&&(-1===e.width.indexOf("%")?(this.layer.element.style.width=e.width,t.classList.remove(g+"-float-width"),this.floatWidth=!1):(t.style.width=e.width,t.classList.add(g+"-float-width"),this.floatWidth=!0)),void 0!==e.height&&(-1===e.height.indexOf("%")?(this.layer.element.style.height=e.height,t.classList.remove(g+"-float-height"),this.floatHeight=!1):(t.style.height=e.height,t.classList.add(g+"-float-height"),this.floatHeight=!0)),t.style[os.js+"Transform"]="",this.layer.frameTransform.update("",this._transformSegment),t.style.top="",t.style.left="",t.style.bottom="",t.style.right="",e.origin||"tl"),s=i.charAt(0),i=i.charAt(1);let n="";t.style[os.js+"TransformOrigin"]=As[s]+" "+As[i];var{width:o,height:r}=t.getBoundingClientRect();switch(s){case"t":default:t.style.top=e.y;break;case"b":t.style.bottom=e.y;break;case"m":"0"===e.y&&(e.y="0px"),n=`translateY(${r%2==0?"-50%":"calc(-50% + 0.5px)"})`,t.style.top=`calc(50% + ${e.y})`}switch(i){case"l":default:t.style.left=e.x;break;case"r":t.style.right=e.x;break;case"c":"0"===e.x&&(e.x="0px"),t.style.left=`calc(50% + ${e.x})`,n+=` translateX(${o%2==0?"-50%":"calc(-50% + 0.5px)"})`}this.layer.frameTransform.update(n,this.layer.transformSegment),this.resizeHandler&&(this.resizeHandler.updateBaseStyle(),this.resizeHandler.update())}_getOffsetObject(t){let e={};return t.replace(/\s/g,"").split(";").forEach(t=>{t=t.split(":"),e[t[0]]=t[1]}),e}}function Cs(t){if(!t||0===t.length)return{};var e={},i=t.toLowerCase().replace(/-(.)/g,(t,e)=>e.toUpperCase()).replace(/;\s?$/g,"").split(/:|;/g);for(let t=0;t<i.length;t+=2)e[i[t].replace(/\s/g,"")]=i[t+1].replace(/^\s+|\s+$/g,"");return e}class Ls{constructor(t,e){this.element=t,e=e||_(t,"style");t=Object.keys(e).length;0===t||1===t&&v.call(e,"none")||(Object.keys(e).forEach(t=>{"none"!==t&&(e[t]=Cs(e[t]))}),e.none={},this.styles=e,u.on("breakpointChange",this.update,this),this.lastActivePoint="none",this.updateBaseStyle(),this.update())}updateBaseStyle(){this.baseStyle=Cs(this.element.getAttribute("style"))}update(){let e={},i=("none"!==this.lastActivePoint&&Object.keys(this.lastStyle).forEach(t=>{this.baseStyle[t]?e[t]=this.baseStyle[t]:e[t]=""}),this.lastActivePoint=u.activeBreakpoint,m(this.styles,this.lastActivePoint));this.lastStyle=i,i=b(b({},e),i),requestAnimationFrame(()=>{Object.keys(i).forEach(t=>{this.element.style[t]=i[t]})})}}class Es{constructor(t,e){this.element=t,e=e||_(this.element,"class");t=Object.keys(e).length;0===t||1===t&&v.call(e,"none")||(Object.keys(e).forEach(t=>{"none"!==t&&(e[t]=e[t].replace(/(\s\s)+/g," ").split(" "))}),this.classNames=e,this.classNames.none=[],u.on("breakpointChange",this.update,this),this.lastActivePoint="none",this.update())}update(){"none"!==this.lastActivePoint&&this.lastClasses.forEach(t=>this.element.classList.remove(t)),this.lastActivePoint=u.activeBreakpoint;var t=m(this.classNames,this.lastActivePoint);(this.lastClasses=t).forEach(t=>this.element.classList.add(t))}}class L extends t{constructor(t,e,i,s,n,o,r){super(),this.type=e,this.element=t,this.controller=i,this.holder=s,this.index=n,this.isLinked=o,this.parent=r,this.composer=this.controller.composer,this.id=t.dataset.localId??t.id,this.data={},this.checkFontLoad=!1,this.composer.layersById||(this.composer.layersById={}),this.id&&((this.composer.layersById[this.id]=this).holder.layersById||(this.holder.layersById={}),this.holder.layersById[this.id]=this),this.parentEmitter=i,this.eventPrefix="layer",o&&(this.linkElement=t.parentElement),this.parent&&(this.nested=!0),this.frame=document.createElement("div"),this.frame.classList.add(g+"-layer-frame"),this.element.hasAttribute("data-frame-class")&&this.frame.classList.add(this.element.getAttribute("data-frame-class")),this.element.hasAttribute("data-frame-id")&&(this.frame.id=this.element.getAttribute("data-frame-id")),this.element.hasAttribute("data-frame-style")&&this.frame.setAttribute("style",this.element.getAttribute("data-frame-style")),this.elementBreakpointStyle=new Ls(this.element),this.elementBreakpointClass=new Es(this.element),this.frameBreakpointStyle=new Ls(this.frame,_(this.element,"frame-style")),this.frameBreakpointClass=new Es(this.frame,_(this.element,"frame-class")),this.isLinked?this.frame.appendChild(this.linkElement):this.frame.appendChild(this.element),this.readyTrigger=new h(this._ready.bind(this)),this.offsets={},this.trigger("create",[this],!0)}async init(t){t||this.trigger("beforeInit",[this],!0),this.element.hasAttribute("data-id")&&(this.id=this.element.getAttribute("data-id"),this.frame.classList.add(g+"-id-"+this.id)),this.frameTransform=new ws(this.frame,os.js),this.transformSegment=this.frameTransform.add();var i,s,n,o,e=this.element.getAttribute("data-hide-on"),e=(this.bpVisible=!0,e&&(i=this.frame,s=e.split(","),n=t=>{this.bpVisible=!t,this.trigger("visibilityChange",[this,t],!0)},o=g+"-layer-hidden",(e=(t,e)=>{s.includes(e=null===e?"desktop":e)?(n&&n(!0),i.classList.add(o)):(n&&n(!1),i.classList.remove(o))})(0,a().name),u.on("breakpointChange",e)),await this._setupContent(),this.element.dataset.positionType||"absolute");this.positionType=e,this.element.classList.add(g+`-${e}-position`),this.disablePositionHandler||"absolute"!==e||(this.positionHandler=new ks(this)),this.checkFontLoad&&(this.holder.readyTrigger.hold(),this.holder.on("loadingStart",()=>(async(t,e=1200)=>{if(!document.fonts)return!0;t=window.getComputedStyle(t);try{return document.fonts.check(t.fontSize+" "+t.fontFamily)?!0:Promise.race([document.fonts.ready,new Promise(t=>setTimeout(t,e))])}catch{return!0}})(this.element).then(()=>this.holder.readyTrigger.exec()))),t||(this.trigger("afterInit",[this],!0),this.readyTrigger.exec())}show(){this.isHidden=!1,this.element.style.visibility="",this.frame.classList.remove(g+"-is-hidden"),this.trigger("layerShow",[this],!0)}hide(){this.isHidden=!0,this.element.style.visibility="hidden",this.frame.classList.add(g+"-is-hidden"),this.trigger("layerHide",[this],!0)}_setupContent(){}_ready(){this.ready=!0,this.positionHandler&&this.positionHandler.locate(),this.trigger("ready",[this],!0)}}class Is extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="custom",this.frame.classList.add(g+`-${this.type}-layer`)}}y.registerLayer("custom",Is);class Ps extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="text",this.frame.classList.add(g+`-${this.type}-layer`),this.checkFontLoad=!0}}y.registerLayer("text",Ps),y.registerLayer("wpShortcode",Ps);class Ts extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type=this.element.dataset.type,this.frame.classList.add(g+`-${this.type}-layer`),this.composer.on("init",()=>{requestAnimationFrame(this._afterInit.bind(this))},this,100)}_afterInit(){this.disableOnFirst="true"===this.element.getAttribute("data-disable-on-first"),this.disableOnLast="true"===this.element.getAttribute("data-disable-on-last"),this.totalIndexes=this.composer.navigator.count-1,this.activeSectionIndex=this.composer.navigator.targetIndex,this.update(),this.composer.on("targetIndexChange",(t,e)=>{this.activeSectionIndex=e,this.update()},this)}update(){this.isOnSurface&&(this.isDisabled=this.disableOnFirst&&0===this.activeSectionIndex||this.disableOnLast&&this.activeSectionIndex===this.totalIndexes,this.disableActions=this.isDisabled,this.isDisabled?this.frame.classList.add("dp-disabled"):this.frame.classList.remove("dp-disabled"))}}y.registerLayer("button",Ts),y.registerLayer("wooSaleBadge",Ts),y.registerLayer("badge",Ts);class Os extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="shape",this.frame.classList.add(g+`-${this.type}-layer`)}_setupContent(){var t;null!=(t=this.element.querySelector("svg"))&&t.setAttribute("preserveAspectRatio","none")}}y.registerLayer("shape",Os),y.registerLayer("vector",Os);class Ms extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="image",this.frame.classList.add(g+`-${this.type}-layer`),this.picture=this.element,this.image=this.picture.querySelector("img"),this.isImageLoaded=!1,this.cropData=b({},_(this.element,"crop"))}_setupContent(){this.picture&&(this.mediaPosition=null,this.mediaSize=null,this.previousCropValue=null,this.cropData=this._getCropObject(this.cropData),this.holder.readyTrigger.hold(),this.holder.on("loadingStart",this._loadImages,this),this.holder.on("resize, readyAndActivated",this.locateImage,this),u.on("breakpointChange",()=>{this.locateImage()}))}locateImage(){var t,e;this.isImageLoaded&&((e=m(this.cropData))?({focalPoint:e,mediaSize:t}=e,{position:t,mediaSize:e}=Ki(t.width,t.height,e.x,e.y,this.element.offsetWidth,this.element.offsetHeight),this.mediaSize=e,this.mediaPosition=t,this.image.style.width=`${null==(e=this.mediaSize)?void 0:e.width}px`,this.image.style.height=`${null==(t=this.mediaSize)?void 0:t.height}px`,this.image.style.left=`-${Math.round(null==(e=this.mediaPosition)?void 0:e.x)}px`,this.image.style.top=`-${Math.round(null==(t=this.mediaPosition)?void 0:t.y)}px`,this.picture.classList.add(g+"-cropped")):(this.mediaSize=null,this.mediaPosition=null,this.image.removeAttribute("style"),this.picture.classList.remove(g+"-cropped")))}_loadImages(){Qi(this.picture,this._loaded.bind(this),this._error.bind(this),this._srcChanged.bind(this))}_loaded(){this.image.classList.add(g+"-loaded"),this.isImageLoaded=!0,this.locateImage(),this.holder.readyTrigger.isExecuted()||this.holder.readyTrigger.exec()}_error(){this.holder.readyTrigger.exec()}_srcChanged(){this.image.classList.remove(g+"-loaded"),this.isImageLoaded=!1}_getCropObject(t){let i=t;return Object.entries(t).forEach(([t,e])=>{if("false"===e.trim())i[t]=!1;else{e=e.replace(/'/g,'"');try{i[t]=JSON.parse(e)}catch{console.warn("Given crop data value is not a valid JSON, crop skipped. \n "+e)}}}),i}}y.registerLayer("image",Ms);class Ds extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="icon",this.frame.classList.add(g+`-${this.type}-layer`)}}y.registerLayer("icon",Ds);class Bs extends t{constructor(t,e){super();var{src:e,readyCallback:i,errorCallback:s,options:n={}}=e;this.videoSrc=e,this.playerType="",this.options=n||{},this.state="initial",this.muted=this.options.muted,this._readyCallback=i,this._errorCallback=s,this.element=t}playerIsReady(){this.ready=!0,this._readyCallback&&this._readyCallback(),this.trigger("videoPlayerReady")}loadScript(t,e){me(t).then(e)}loadPoster(t){var e,i=this.options.poster;i?((e=document.createElement("img")).src=i,this.element.appendChild(e),e.onload=t):null!=t&&t()}play(t=!0){"playing"!==this.state&&(this.state="playing",t)&&this.trigger("videoPlayerPlay")}pause(t=!0){"playing"===this.state&&(this.state="paused",t)&&this.trigger("videoPlayerPause")}mute(t=!0){this.muted=!0,t&&this.trigger("videoPlayerMute")}unmute(t=!0){this.muted=!1,t&&this.trigger("videoPlayerUnmute")}getCurrentTime(t=!0){return t&&this.trigger("videoPlayerGetCurrentTime"),0}seekTo(t,e=!0){e&&this.trigger("videoPlayerSeekTo",t)}end(t=!0){this.state="ended",t&&this.trigger("videoPlayerEnded")}}class zs extends Bs{constructor(t,e){super(t,e),this.playerType="youtube",this.validate()&&(this.loadAPI(),this.setupAPI=this.setupAPI.bind(this),this.onAPIReady=this.onAPIReady.bind(this),this.onStateChange=this.onStateChange.bind(this))}validate(){return/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/.test(this.videoSrc)}getVideoID(){var t=this.videoSrc.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!==t[7].length)&&t[7]}loadAPI(){window.YT&&window.YT.Player?this.loadPoster(()=>this.setupAPI()):this.loadScript("https://www.youtube.com/iframe_api",()=>{let t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{null!=t&&t(),this.loadPoster(()=>this.setupAPI())}})}setupAPI(){var{controls:t,limitRelatedVideos:e,startingTime:i,endingTime:s}=this.options,n=document.createElement("div");this.element.appendChild(n),this.videoId=this.getVideoID(),this.api=new window.YT.Player(n,{videoId:this.videoId,playerVars:{enablejsapi:1,autoplay:0,controls:t?1:0,rel:e?1:0,start:i,end:s}}),this.playerElement=this.api.g,this.api.addEventListener("onReady",this.onAPIReady,!1),this.api.addEventListener("onStateChange",this.onStateChange,!1)}onAPIReady(){var t=this.options.muted;t?this.api.mute():this.api.unMute(),fetch("https://noembed.com/embed?url=https://www.youtube.com/watch?v="+this.videoId).then(t=>t.json()).then(t=>{this.videoWidth=t.width,this.videoHeight=t.height,this.playerIsReady(this.api)})}onStateChange(t){switch(t.data){case 0:super.end();break;case 1:super.play();break;case 2:super.pause()}}play(){this.api&&(this.api.seekTo(this.options.startingTime),this.api.playVideo(),super.play())}pause(){this.api&&(this.api.pauseVideo(),super.pause())}mute(){this.api&&(this.api.mute(),super.mute())}unmute(){this.api&&(this.api.unMute(),super.unmute())}getCurrentTime(){var t;return this.api?(t=this.api.getCurrentTime(),super.getCurrentTime(),t):0}seekTo(t){this.api&&(this.pause(),this.api.seekTo(t,!0),super.seekTo(t))}}class Vs extends Bs{constructor(t,e){super(t,e),this.playerType="vimeo",this.validate()&&(this.loadAPI(),this.setupAPI=this.setupAPI.bind(this),this.onAPIReady=this.onAPIReady.bind(this))}validate(){return/(?:http|https)?:\/\/?(?:www\.)?(?:player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]*\/videos\/|video\/|)(\d+)(?:\/|\?)?/.test(this.videoSrc)}loadAPI(){window.Vimeo&&window.Vimeo.Player?this.loadPoster(()=>this.setupAPI()):this.loadScript("https://player.vimeo.com/api/player.js",()=>{this.loadPoster(()=>this.setupAPI())})}setupAPI(){var{muted:t,controls:e,startingTime:i,endingTime:s}=this.options;this.api=new window.Vimeo.Player(this.element,{autoplay:!1,url:this.videoSrc,muted:t,controls:e,start_time:i,end_time:s,loop:!1}),this.playerElement=this.api.element,this._currentVol=1,this.api.on("loaded",this.onAPIReady,!1),this.api.on("play",()=>super.play(),!1),this.api.on("pause",()=>super.pause(),!1),this.api.on("ended",()=>{"ended"!==this.state&&this.end()})}onAPIReady(){fetch("https://vimeo.com/api/oembed.json?url="+this.videoSrc).then(t=>t.json()).then(t=>{this.videoWidth=t.width,this.videoHeight=t.height,this._duration=t.duration,this.playerIsReady(this.api)})}play(){this.api&&this.api.play().then(()=>{super.play()})}pause(){this.api&&this.api.pause().then(()=>{super.pause()})}mute(){this.api&&!this.muted&&this.api.getVolume().then(t=>{this._currentVol=t,this.api.setVolume(0).then(()=>{super.mute()})})}unmute(){this.api&&this.muted&&this.api.setVolume(this._currentVol).then(()=>{super.unmute()})}getCurrentTime(){var t;return this.api?(t=this.api.getCurrentTime(),super.getCurrentTime(),t):0}seekTo(t){this.api&&(this.pause(),this.api.setCurrentTime(t),super.seekTo(t))}end(){super.end()}}class Hs extends Bs{constructor(t,e){super(t,e),this.playerType="native",this.loadAPI(),this.onAPIReady=this.onAPIReady.bind(this),this.setupAPI=this.setupAPI.bind(this)}loadAPI(){this.loadPoster(()=>this.setupAPI())}setupAPI(){let{muted:t,controls:e,startingTime:i,endingTime:s}=this.options;this.videoElement=document.createElement("video"),this.videoElement.setAttribute("playsinline",""),this.videoElement.setAttribute("webkit-playsinline",""),this.videoElement.src=this.videoSrc,this.videoElement.controls=e,this.videoElement.muted=t,this.videoElement.currentTime=i,this.videoElement.playsinline=!0,this.videoElement.preload="metadata",this.element.appendChild(this.videoElement),this.api=this.videoElement,this.playerElement=this.videoElement,this.api.addEventListener("loadeddata",()=>this.onAPIReady(),!1),this.api.addEventListener("loadedmetadata",()=>this.onAPIReady(),!1),1<=this.api.readyState&&this.onAPIReady(),this.api.addEventListener("play",()=>super.play()),this.api.addEventListener("pause",()=>super.pause()),s&&this.api.addEventListener("timeupdate",()=>{var t;this.videoElement.currentTime>=s&&(t=new Event("ended"),this.videoElement.dispatchEvent(t))}),this.api.addEventListener("ended",()=>{"ended"!==this.state&&(this.options.loop||(this.state="paused",this.seekTo(this.options.startingTime)),super.end())})}onAPIReady(){this.apiIsReady||(this.apiIsReady=!0,this.videoWidth=this.videoElement.videoWidth,this.videoHeight=this.videoElement.videoHeight,this._duration=this.videoElement.duration,this.playerIsReady(this.api))}play(){this.api.currentTime=this.options.startingTime,this.api.play(),super.play()}pause(t){this.api.pause(),super.pause(t)}mute(){this.videoElement.muted=!0,super.mute()}unmute(){this.videoElement.muted=!1,super.unmute()}getCurrentTime(){return super.getCurrentTime(),this.api.currentTime}seekTo(t){this.api&&(this.pause(),this.api.currentTime=t,super.seekTo(t))}}class Ns extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="video",this.frame.classList.add(g+`-${this.type}-layer`),this.playVideo=this.playVideo.bind(this),this.holder.hasVideoLayer=!0}playVideo(t){this.holder.active&&"leaving"!==this.holder.status&&"playing"!==this.videoPlayer.state&&this.videoPlayer.ready&&this.bpVisible&&(t&&this.trigger("playByBtn",[this],!0),this.videoPlayer.play(),this.element.classList.add(g+"-playing"))}stopVideo(){"stopped"!==this.videoPlayer.state&&this.videoPlayer.ready&&(this.videoPlayer.state="paused",this.autoPause||this.videoPlayer.seekTo(this.videoPlayer.options.startingTime),this.videoPlayer.pause(),this.element.classList.remove(g+"-playing"))}_setupContent(){this.videoSource=p(this.element,"data-video-src",""),this.autoPlay=p(this.element,"data-autoplay",!1),this.autoPause=p(this.element,"data-auto-pause",!0),this.looped=p(this.element,"data-loop",!1),this.playerType=p(this.element,"data-player-type","native"),this.poster=p(this.element,"data-video-poster"),this.holder.composer.options.get("videoAutoplayDisabled")&&(this.autoPlay=!1),this.holder.on("loadingStart",this._setupAndLoadVideoPlayer,this)}_setupAndLoadVideoPlayer(){var t=p(this.element,"data-muted",!1),e=p(this.element,"data-controls",!0),i=p(this.element,"data-limit-related",!1),s=parseInt(p(this.element,"data-starting-time","0"),10),n=parseInt(p(this.element,"data-ending-time"),10),t=(this.gotoNext=p(this.element,"data-goto-next",!1),{src:this.videoSource,options:{muted:t,controls:e,limitRelatedVideos:i,startingTime:s,endingTime:n,loop:this.looped},readyCallback:this._videoControllerReady.bind(this)});"youtube"===this.playerType?this.videoPlayer=new zs(this.element,t):"vimeo"===this.playerType?this.videoPlayer=new Vs(this.element,t):this.videoPlayer=new Hs(this.element,t)}_videoControllerReady(){this.videoPlayer.playerElement.classList.add(g+"-video-player"),this._onVideoPlay=this._onVideoPlay.bind(this),this._onVideoPause=this._onVideoPause.bind(this),this._onVideoEnded=this._onVideoEnded.bind(this),this.videoPlayer.on("videoPlayerPlay",this._onVideoPlay),this.videoPlayer.on("videoPlayerPause",this._onVideoPause),this.videoPlayer.on("videoPlayerEnded",this._onVideoEnded),this.autoPlay&&this.playVideo(),this.holder.on("readyAndActivated",()=>{this.autoPlay&&this.playVideo()},this),this.holder.on("readyAndDeactivated",this.stopVideo,this),this.on("visibilityChange",(t,e,i)=>{i||!this.autoplay&&!this.wasPlaying?i&&(this.wasPlaying="playing"===this.videoPlayer.state,this.stopVideo()):this.playVideo()}),this.holder.composer.on("attach",()=>{this.wasPlaying&&this.playVideo()})}_error(){this.holder.readyTrigger.exec()}_onVideoPlay(){this.trigger("videoPlay",[this],!0)}_onVideoPause(){this.trigger("videoPause",[this],!0)}_onVideoEnded(){this.trigger("videoEnd",[this],!0),this.gotoNext?this.composer.navigator.next():this.looped&&this.playVideo()}}y.registerLayer("video",Ns),y.registerLayer("embedVideo",Ns);class Fs extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="group",this.nestable=!0,this.frame.classList.add(g+`-${this.type}-layer`)}}y.registerLayer("group",Fs);class Rs extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="flex",this.nestable=!0,this.frame.classList.add(g+`-${this.type}-layer`),this.disablePositionHandler=!0}}y.registerLayer("flex",Rs);class Ws extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="bullet",this.frame.classList.add(g+`-${this.type}-layer`),this.activeBulletItemClass=g+"-bullet-active"}_setupContent(){this.bulletsCount=this.composer.navigator.count,this.generateBullets=this.generateBullets.bind(this),this.bulletItems=[],this.composer.on("countChange",(t,e)=>{e!==this.bulletsCount&&(this.bulletItems=[],this.element.replaceChildren(this.generateBullets(e)),this.handleIndexChange(this.composer.navigator.targetIndex),this.bulletsCount=e)}),this.composer.on("targetIndexChange",(t,e)=>{this.handleIndexChange(e)})}generateBullets(t){return this.bulletsWrapper=document.createElement("div"),this.bulletsWrapper.classList.add(g+"-bullets-wrapper"),[...Array(t).keys()].forEach(t=>{var e=document.createElement("span");e.classList.add(g+"-bullet-item"),this.bulletItems.push(e),e.addEventListener("click",()=>this.handleNavigate(t)),Wi(e,this.bulletsWrapper)}),Wi(this.bulletsWrapper,this.element),this.bulletsWrapper}handleNavigate(t){this.composer.actions.gotoSection({type:"number",to:t})}handleIndexChange(i){this.bulletItems.forEach((t,e)=>{i!==e&&t.classList.contains(this.activeBulletItemClass)?t.classList.remove(this.activeBulletItemClass):i===e&&t.classList.add(this.activeBulletItemClass)})}}y.registerLayer("bullet",Ws);class js extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="lineTimer",this.frame.classList.add(g+`-${this.type}-layer`)}_setupContent(){this.timerBar=document.createElement("div"),this.timerBar.classList.add(g+"-timer-bar"),Wi(this.timerBar,this.element),this.composer.navigator.on("changeStart",()=>setTimeout(this.handleTimerBarWidth.bind(this),100,.001)),this.composer.on("slideshowTimerUpdate",(t,e)=>this.handleTimerBarWidth(e))}handleTimerBarWidth(t){0!==t&&(this.timerBar.style.width=t/100*110+"%")}}y.registerLayer("lineTimer",js);class $s extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="playAndPause",this.frame.classList.add(g+`-${this.type}-layer`),this.activeClassName=g+"-active",this._isPause=!1}_setupContent(){this.playIcon=this.element.querySelector(`.${g}-play-icon`),this.pauseIcon=this.element.querySelector(`.${g}-pause-icon`),this.composer.on("slideshowInit",(t,e)=>{this._isPause=e||!1}),this.composer.on("slideshowStatusChange",(t,e)=>{this._isPause=e,this.toggleClassName(this._isPause)}),this.toggleClassName(this._isPause),this.element.addEventListener("click",this.toggleState.bind(this))}toggleClassName(t){(t?(this.pauseIcon.classList.remove(this.activeClassName),this.playIcon):(this.playIcon.classList.remove(this.activeClassName),this.pauseIcon)).classList.add(this.activeClassName)}toggleState(){var{pause:t,resume:e}=this.composer.slideshow;this._isPause?(e(),this.toggleClassName(!1)):(t(),this.toggleClassName(!0))}}y.registerLayer("playAndPause",$s);class qs extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="symbol",this.frame.classList.add(g+`-${this.type}-layer`),this.composer.on("init",()=>{requestAnimationFrame(this._afterInit.bind(this))},this,100)}_setupContent(){this.symbol=this.element.querySelector("svg"),this.symbolContainer=document.createElement("div"),this.symbolContainer.classList.add(g+`-${this.type}-container`),Wi(this.symbol,this.symbolContainer)}_afterInit(){this.disableOnFirst="true"===this.element.getAttribute("data-disable-on-first"),this.disableOnLast="true"===this.element.getAttribute("data-disable-on-last"),this.totalIndexes=this.composer.navigator.count-1,this.activeSectionIndex=this.composer.navigator.targetIndex,this.update(),this.composer.on("targetIndexChange",(t,e)=>{this.activeSectionIndex=e,this.update()},this)}update(){this.isOnSurface&&(this.isDisabled=this.disableOnFirst&&0===this.activeSectionIndex||this.disableOnLast&&this.activeSectionIndex===this.totalIndexes,this.disableActions=this.isDisabled,this.isDisabled?this.frame.classList.add("dp-disabled"):this.frame.classList.remove("dp-disabled"))}}y.registerLayer("symbol",qs),y.registerLayer("arrow",qs),y.registerLayer("scroll",qs);var Ys=(t,e)=>{var i;return e&&t.parentElement.classList.contains("."+e)?t.parentElement:((i=document.createElement("div")).classList.add(""+e),t.parentElement.insertBefore(i,t),i.appendChild(t),i)};function Xs(l){let e=t=>{var e;e=l,"readyAndActivated"===(t=t)?e.waitForAction||e.animateInOut("in",!0):"readyAndDeactivated"===t&&e.autoAnimateOut&&e.animateInOut("out")},i;q([l.interactiveAnimationIn,l.interactiveAnimationOut],t=>{let[a,h]=t.map(t=>"true"===t);i&&l.holder.off("pendingOffsetChange",i),a||h?(i=(t,e,i,s)=>{var n,o,r;n=l,s=s,o=a,r=h,0<=s&&o?n.progressInOut(Math.max(0,1-s),"in"):s<0&&r&&n.progressInOut(Math.min(1,-s),"out")},l.disableAutoAnimateOut=!0,l.holder.on("pendingOffsetChange",i),l.holder.active&&l.holder.triggerPendingOffsetChange()):l.disableAutoAnimateOut=!1,a?l.holder.off("readyAndActivated",e):(l.holder.active&&l.holder.isReady&&e("readyAndActivated"),l.holder.on("readyAndActivated",e)),h?l.holder.off("readyAndDeactivated",e):l.holder.on("readyAndDeactivated",e)})}class Us{constructor(t){this.composer=t,this.composer.options.register({hideLayers:!0,addDefaultAnimation:!0}),this._stepAnimationLayers=[],this.composer.options.get("disableAnimations")||t.on("layerBeforeInit",this._checkLayer,this)}_checkLayer(t,e){var i,s,n;Gi.isAnimative(e.element)&&(e.animationWrap=Ys(e.element,g+"-animation-wrap"),i=e,s=this.composer,n=this.composer.options.get("addDefaultAnimation"),i.inOutAnimation=new Gi(i,i.element,i.animationWrap,n),i.interactiveAnimationIn=i.element.getAttribute("data-animation-in-interactive"),i.interactiveAnimationOut=i.element.getAttribute("data-animation-out-interactive"),i.waitForAction="true"===i.element.getAttribute("data-wait-for-action"),i.waitOnAnimationOut="false"!==i.element.getAttribute("data-animation-out-wait"),i.autoAnimateOut="true"===i.element.getAttribute("data-animation-out-on-change")||s.options.get("hideLayers"),n=i.holder instanceof ys,void 0===i.holder.layersAnimations&&(i.holder.layersAnimations=[]),i.holder.layersAnimations[i.index]=i.inOutAnimation.animationsData,i.waitForAction||n||i.holder.disableAnimationAdapterControl?i.hide(!1):Xs(i),i.on("animationInEnd",()=>setTimeout(()=>{i.waitOnAnimationOut||i.disableAutoAnimateOut||i.waitForAction||i.animateInOut("out")})),this.composer.trigger("layerGetInOutAnimation",[e]))}}e.registerAddon("layerAnimationAdapter",Us);let Zs=["type","timelineOptions","phase"];class Gs{static isAnimative(t){return Ri(t,/^(data(-\w+)*-animation-loop)$/g)}constructor(t,e,i){this.target=t,this.element=i,this.sourceElement=e;let s=_(this.sourceElement,"animation-loop")||{};this.animationsData=["none",...l].map(t=>this.parseAnimationData(m(s,t))),u.on("breakpointChange",()=>{this.killLoopAnimation(),this.setAnimator()},this),t.playLoopAnimation=this.playLoopAnimation.bind(this),t.pauseLoopAnimation=this.pauseLoopAnimation.bind(this),t.killLoopAnimation=this.killLoopAnimation.bind(this)}parseAnimationData(t){t=t.replace(/'/g,'"');let e="";try{e=JSON.parse(t)}catch{return console.warn("Given animation data value is not a valid JSON, animation skipped. \n "+t),""}return e}_animationBegin(){this.target.trigger("animationLoopStart"[this.target],!0)}_animationEnd(){this.target.trigger("animationLoopEnd"[this.target],!0)}setAnimator(){var t=m(this.animationsData),{type:e,timelineOptions:i}=t,t=x(t,Zs);return this.animator=Fi(e,this.element,"out",t,null,{direction:(null==i?void 0:i.direction)||"alternate",loop:!0,begin:()=>this._animationBegin(),complete:()=>this._animationEnd()}),this.animator}playLoopAnimation(t){this.animator||this.setAnimator();var e=this.animator.timeline;t&&e.seek(0),e.play()}pauseLoopAnimation(){this.animator&&this.animator.timeline.pause()}killLoopAnimation(){this.animator&&(this.animator.reset(),this.animator=null)}}e.registerAddon("layerLoopAnimationAdapter",class{constructor(t){this.composer=t,this.composer.options.register({syncWithAnimIn:!1}),this._stepAnimationLayers=[],this.composer.options.get("disableAnimations")||t.on("layerBeforeInit",this._checkLayer,this)}_checkLayer(t,e){Gs.isAnimative(e.element)&&(e.animationLoopWrap=Ys(e.element,g+"-animation-loop-wrap"),this.setLoopAnimation(e,this.composer),this.composer.trigger("layerGetLoopAnimation",[e]))}setLoopAnimation(n){n.loopAnimation=new Gs(n,n.element,n.animationLoopWrap),n.betweenInAndOut="true"===n.element.getAttribute("data-between-in-out"),n.betweenInAndOut?(n.on("animationInEnd",()=>{n.playLoopAnimation()}),n.on("animationOutStart",(t,e,i,s)=>{var{parts:{offset:s=0}}=s;setTimeout(()=>{n.pauseLoopAnimation()},s)})):n.waitForAction?(n.on("layerShow",()=>{setTimeout(()=>{n.playLoopAnimation()})}),n.on("layerHide",()=>{n.killLoopAnimation()})):(n.holder.on("readyAndActivated",()=>{n.playLoopAnimation()}),n.holder.on("readyAndDeactivated",()=>{n.killLoopAnimation()}))}});class Ks extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="rating",this.frame.classList.add(g+`-${this.type}-layer`)}_setupContent(){this.symbolID=this.element.getAttribute("data-symbol"),this.rateValue=parseFloat(this.element.getAttribute("data-rate-value")),this.wrapper=document.createElement("div"),this.element.appendChild(this.wrapper),this._calcSymbolValue(this.rateValue).forEach(t=>{this.wrapper.appendChild(this._generateSymbolContainers(t))})}_calcSymbolValue(i){return[0,0,0,0,0].map((t,e)=>{e=Math.max(Math.min(i-e,1),0);return[0,1].includes(e)?e:i%1})}_generateSvg(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","use");return e.setAttribute("width","100%"),e.setAttribute("height","100%"),i.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+t),e.appendChild(i),e}_generateSymbolContainers(t){var e=this._generateSvg(this.symbolID),i=this._generateSvg(this.symbolID),s=document.createElement("div"),e=(s.appendChild(e),document.createElement("div")),i=(e.appendChild(i),e.style.clipPath=`inset(0 ${100-100*t}% 0 0)`,document.createElement("div"));return i.classList.add(g+"-rating-container"),i.appendChild(s).classList.add(g+"-symbol-container"),i.appendChild(e).classList.add(g+"-track-container"),this.element.appendChild(i)}}y.registerLayer("rating",Ks);let Js=(t,e={})=>{var{locale:e="en-US",useRelative:i=!1,formatOptions:s}=e;return t?(t=new Date(t),i?(i=(t,e=2,i="0")=>(""+t).padStart(e,i),((t,e="en",i={})=>{var s=Date.now()/1e3,[t,n]=t.trim().split(" "),t=[...t.split("-").map((t,e)=>parseInt(t,10)+(1===e?-1:0)),...n.split(":").map(t=>parseInt(t,10))],n=Date.UTC(...t)/1e3,o=new Intl.RelativeTimeFormat(e,b({numeric:"auto"},i)),r=Math.round(n-s);switch(!0){case Math.abs(r)<60:return o.format(Math.round(r),"seconds");case 60<Math.abs(r)&&Math.abs(r)<3600:return o.format(Math.round(r/60),"minute");case 3600<Math.abs(r)&&Math.abs(r)<86400:return o.format(Math.round(r/3600),"hour");case 86400<Math.abs(r)&&Math.abs(r)<2592e3:return o.format(Math.round(r/86400),"day");default:return o.format(Math.round(r/2592e3),"month")}})(`${t.getFullYear()}-${i(t.getDate())}-${i(t.getMonth()+1)} ${i(t.getHours())}:${i(t.getMinutes())}:`+i(t.getSeconds()))):new Intl.DateTimeFormat(e,s).format(t)):null};class Qs extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="date",this.frame.classList.add(g+`-${this.type}-layer`)}_setupContent(){this.useRelative="true"===this.element.getAttribute("data-use-relative"),this.displayTime="true"===this.element.getAttribute("data-display-time"),this.formatStyle=this.element.getAttribute("data-format-style")||"auto";var t=Js(this.element.dateTime,{useRelative:this.useRelative,formatOptions:((t,e=!1)=>{let i={};return i="auto"===t?b({year:"numeric",month:"long",day:"numeric"},e?{hour12:!1,minute:"numeric",hour:"numeric"}:{}):b({dateStyle:t},e?{timeStyle:t}:{})})(this.formatStyle,this.displayTime)});this.element.innerHTML=t}}y.registerLayer("date",Qs);class tn extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.type="tagList",this.element.classList.add(g+`-${this.type}-layer`),this.checkFontLoad=!0}}y.registerLayer("tagList",tn);var en,I,sn,nn,on,rn,an,hn,ln,cn,dn,pn,un={},mn=[],gn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vn=Array.isArray;function P(t,e){for(var i in e)t[i]=e[i];return t}function _n(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function E(t,e,i){var s,n,o,r={};for(o in e)"key"==o?s=e[o]:"ref"==o?n=e[o]:r[o]=e[o];if(2<arguments.length&&(r.children=3<arguments.length?en.call(arguments,2):i),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===r[o]&&(r[o]=t.defaultProps[o]);return fn(t,r,s,n,null)}function fn(t,e,i,s,n){t={type:t,props:e,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==n?++sn:n,__i:-1,__u:0};return null==n&&null!=I.vnode&&I.vnode(t),t}function T(t){return t.children}function O(t,e){this.props=t,this.context=e}function yn(t,e){if(null==e)return t.__?yn(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if(null!=(i=t.__k[e])&&null!=i.__e)return i.__e;return"function"==typeof t.type?yn(t):null}function wn(t){(t.__d||(t.__d=!0,!nn.push(t))||bn.__r++)&&on===I.debounceRendering||((on=I.debounceRendering)||rn)(bn)}function bn(){for(var t,e,i,s,n,o,r=1;nn.length;)nn.length>r&&nn.sort(an),t=nn.shift(),r=nn.length,t.__d&&(e=void 0,s=(i=(t=t).__v).__e,n=[],o=[],t.__P)&&((e=P({},i)).__v=i.__v+1,I.vnode&&I.vnode(e),Cn(t.__P,e,i,t.__n,t.__P.namespaceURI,32&i.__u?[s]:null,n,null==s?yn(i):s,!!(32&i.__u),o),e.__v=i.__v,Ln(n,e.__.__k[e.__i]=e,o),e.__e!=s)&&function t(e){var i,s;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,i=0;i<e.__k.length;i++)if(null!=(s=e.__k[i])&&null!=s.__e){e.__e=e.__c.base=s.__e;break}return t(e)}}(e);bn.__r=0}function xn(t,e,i,s,n,o,r,a,h,l,c){var d,p,u,m,g,v,_=s&&s.__k||mn,f=e.length;for(h=((t,e,i,s,n)=>{var o,r,a,h,l,c=i.length,d=c,p=0;for(t.__k=new Array(n),o=0;o<n;o++)null!=(r=e[o])&&"boolean"!=typeof r&&"function"!=typeof r?(h=o+p,(r=t.__k[o]="string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?fn(null,r,null,null,null):vn(r)?fn(T,{children:r},null,null,null):void 0===r.constructor&&0<r.__b?fn(r.type,r.props,r.key,r.ref||null,r.__v):r).__=t,r.__b=t.__b+1,a=null,-1!==(l=r.__i=((t,e,i,s)=>{var n,o,r=t.key,a=t.type,h=e[i];if(null===h||h&&r==h.key&&a===h.type&&0==(2&h.__u))return i;if(s>(null!=h&&0==(2&h.__u)?1:0))for(n=i-1,o=i+1;0<=n||o<e.length;){if(0<=n){if((h=e[n])&&0==(2&h.__u)&&r==h.key&&a===h.type)return n;n--}if(o<e.length){if((h=e[o])&&0==(2&h.__u)&&r==h.key&&a===h.type)return o;o++}}return-1})(r,i,h,d))&&(d--,a=i[l])&&(a.__u|=2),null==a||null===a.__v?(-1==l&&p--,"function"!=typeof r.type&&(r.__u|=4)):l!=h&&(l==h-1?p--:l==h+1?p++:(h<l?p--:p++,r.__u|=4))):t.__k[o]=null;if(d)for(o=0;o<c;o++)null!=(a=i[o])&&0==(2&a.__u)&&(a.__e==s&&(s=yn(a)),function t(e,i,s){var n,o;if(I.unmount&&I.unmount(e),!(n=e.ref)||n.current&&n.current!==e.__e||En(n,null,i),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){I.__e(e,i)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&t(n[o],i,s||"function"!=typeof e.type);s||_n(e.__e),e.__c=e.__=e.__e=void 0}(a,a));return s})(i,e,_,h,f),d=0;d<f;d++)null!=(u=i.__k[d])&&(p=-1!==u.__i&&_[u.__i]||un,u.__i=d,v=Cn(t,u,p,n,o,r,a,h,l,c),m=u.__e,u.ref&&p.ref!=u.ref&&(p.ref&&En(p.ref,null,u),c.push(u.ref,u.__c||m,u)),null==g&&null!=m&&(g=m),4&u.__u||p.__k===u.__k?h=function t(e,i,s){var n,o;if("function"==typeof e.type){for(n=e.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=e,i=t(n[o],i,s));return i}e.__e!=i&&(i&&e.type&&!s.contains(i)&&(i=yn(e)),s.insertBefore(e.__e,i||null),i=e.__e);for(;i=i&&i.nextSibling,null!=i&&8==i.nodeType;);return i}(u,h,t):"function"==typeof u.type&&void 0!==v?h=v:m&&(h=m.nextSibling),u.__u&=-7);return i.__e=g,h}function M(t,e){return e=e||[],null!=t&&"boolean"!=typeof t&&(vn(t)?t.some(function(t){M(t,e)}):e.push(t)),e}function Sn(t,e,i){"-"==e[0]?t.setProperty(e,null==i?"":i):t[e]=null==i?"":"number"!=typeof i||gn.test(e)?i:i+"px"}function An(t,e,i,s,n){var o;t:if("style"==e)if("string"==typeof i)t.style.cssText=i;else{if("string"==typeof s&&(t.style.cssText=s=""),s)for(e in s)i&&e in i||Sn(t.style,e,"");if(i)for(e in i)s&&i[e]===s[e]||Sn(t.style,e,i[e])}else if("o"==e[0]&&"n"==e[1])o=e!=(e=e.replace(hn,"$1")),e=(e.toLowerCase()in t||"onFocusOut"==e||"onFocusIn"==e?e.toLowerCase():e).slice(2),t.l||(t.l={}),(t.l[e+o]=i)?s?i.u=s.u:(i.u=ln,t.addEventListener(e,o?dn:cn,o)):t.removeEventListener(e,o?dn:cn,o);else{if("http://www.w3.org/2000/svg"==n)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==i?"":i;break t}catch(t){}"function"!=typeof i&&(null==i||!1===i&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==i?"":i))}}function kn(i){return function(t){if(this.l){var e=this.l[t.type+i];if(null==t.t)t.t=ln++;else if(t.t<e.u)return;return e(I.event?I.event(t):t)}}}function Cn(t,e,i,s,n,o,r,a,h,l){var c,d,p,u,m,g,v,_,f,y,w,b,x,S,A,k,C,L,E=e.type;if(void 0!==e.constructor)return null;128&i.__u&&(h=!!(32&i.__u),o=[a=e.__e=i.__e]),(c=I.__b)&&c(e);t:if("function"==typeof E)try{if(_=e.props,f="prototype"in E&&E.prototype.render,y=(c=E.contextType)&&s[c.__c],w=c?y?y.props.value:c.__:s,i.__c?v=(d=e.__c=i.__c).__=d.__E:(f?e.__c=d=new E(_,w):(e.__c=d=new O(_,w),d.constructor=E,d.render=In),y&&y.sub(d),d.props=_,d.state||(d.state={}),d.context=w,d.__n=s,p=d.__d=!0,d.__h=[],d._sb=[]),f&&null==d.__s&&(d.__s=d.state),f&&null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=P({},d.__s)),P(d.__s,E.getDerivedStateFromProps(_,d.__s))),u=d.props,m=d.state,d.__v=e,p)f&&null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),f&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(f&&null==E.getDerivedStateFromProps&&_!==u&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,w),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,w)||e.__v==i.__v)){for(e.__v!=i.__v&&(d.props=_,d.state=d.__s,d.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(t){t&&(t.__=e)}),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&r.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,w),f&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(u,m,g)})}if(d.context=w,d.props=_,d.__P=t,d.__e=!1,x=I.__r,S=0,f){for(d.state=d.__s,d.__d=!1,x&&x(e),c=d.render(d.props,d.state,d.context),A=0;A<d._sb.length;A++)d.__h.push(d._sb[A]);d._sb=[]}else for(;d.__d=!1,x&&x(e),c=d.render(d.props,d.state,d.context),d.state=d.__s,d.__d&&++S<25;);d.state=d.__s,null!=d.getChildContext&&(s=P(P({},s),d.getChildContext())),f&&!p&&null!=d.getSnapshotBeforeUpdate&&(g=d.getSnapshotBeforeUpdate(u,m)),C=(k=null!=c&&c.type===T&&null==c.key)?c.props.children:c,k&&(c.props.children=null),a=xn(t,vn(C)?C:[C],e,i,s,n,o,r,a,h,l),d.base=e.__e,e.__u&=-161,d.__h.length&&r.push(d),v&&(d.__E=d.__=null)}catch(t){if(e.__v=null,h||null!=o)if(t.then){for(e.__u|=h?160:128;a&&8==a.nodeType&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else for(L=o.length;L--;)_n(o[L]);else e.__e=i.__e,e.__k=i.__k;I.__e(t,e,i)}else null==o&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):a=e.__e=((t,e,i,s,n,o,r,a,h)=>{var l,c,d,p,u,m,g,v=i.props,_=e.props,f=e.type;if(n="svg"==f?"http://www.w3.org/2000/svg":"math"==f?"http://www.w3.org/1998/Math/MathML":n||"http://www.w3.org/1999/xhtml",null!=o)for(l=0;l<o.length;l++)if((u=o[l])&&"setAttribute"in u==!!f&&(f?u.localName==f:3==u.nodeType)){t=u,o[l]=null;break}if(null==t){if(null==f)return document.createTextNode(_);t=document.createElementNS(n,f,_.is&&_),a&&(I.__m&&I.__m(e,o),a=!1),o=null}if(null===f)v===_||a&&t.data===_||(t.data=_);else{if(o=o&&en.call(t.childNodes),v=i.props||un,!a&&null!=o)for(v={},l=0;l<t.attributes.length;l++)v[(u=t.attributes[l]).name]=u.value;for(l in v)if(u=v[l],"children"!=l)if("dangerouslySetInnerHTML"==l)d=u;else if(!(l in _)){if("value"==l&&"defaultValue"in _||"checked"==l&&"defaultChecked"in _)continue;An(t,l,null,u,n)}for(l in _)u=_[l],"children"==l?p=u:"dangerouslySetInnerHTML"==l?c=u:"value"==l?m=u:"checked"==l?g=u:a&&"function"!=typeof u||v[l]===u||An(t,l,u,v[l],n);if(c)a||d&&(c.__html===d.__html||c.__html===t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(d&&(t.innerHTML=""),xn("template"===e.type?t.content:t,vn(p)?p:[p],e,i,s,"foreignObject"==f?"http://www.w3.org/1999/xhtml":n,o,r,o?o[0]:i.__k&&yn(i,0),a,h),null!=o)for(l=o.length;l--;)_n(o[l]);a||(l="value","progress"==f&&null==m?t.removeAttribute("value"):void 0!==m&&(m!==t[l]||"progress"==f&&!m||"option"==f&&m!==v[l])&&An(t,l,m,v[l],n),l="checked",void 0!==g&&g!==t[l]&&An(t,l,g,v[l],n))}return t})(i.__e,e,i,s,n,o,r,h,l);return(c=I.diffed)&&c(e),128&e.__u?void 0:a}function Ln(t,e,i){for(var s=0;s<i.length;s++)En(i[s],i[++s],i[++s]);I.__c&&I.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){I.__e(t,e.__v)}})}function En(t,e,i){try{var s;"function"==typeof t?((s="function"==typeof t.__u)&&t.__u(),s&&null==e||(t.__u=t(e))):t.current=e}catch(t){I.__e(t,i)}}function In(t,e,i){return this.constructor(t,i)}function Pn(t,e,i){var s,n,o,r;e==document&&(e=document.documentElement),I.__&&I.__(t,e),n=(s="function"==typeof i)?null:i&&i.__k||e.__k,o=[],r=[],Cn(e,t=(!s&&i||e).__k=E(T,null,[t]),n||un,un,e.namespaceURI,!s&&i?[i]:!n&&e.firstChild?en.call(e.childNodes):null,o,!s&&i?i:n?n.__e:e.firstChild,s,r),Ln(o,t,r)}function Tn(t,e){Pn(t,e,Tn)}en=mn.slice,I={__e:function(t,e,i,s){for(var n,o,r;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(t)),r=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t,s||{}),r=n.__d),r)return n.__E=n}catch(e){t=e}throw t}},sn=0,O.prototype.setState=function(t,e){var i=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=P({},this.state);(t="function"==typeof t?t(P({},i),this.props):t)&&P(i,t),null!=t&&this.__v&&(e&&this._sb.push(e),wn(this))},O.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),wn(this))},O.prototype.render=T,nn=[],rn="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,an=function(t,e){return t.__v.__b-e.__v.__b},bn.__r=0,cn=kn(!(hn=/(PointerCapture)$|Capture$/i)),dn=kn(!(ln=0)),pn=0;let On=new Map;i=(t,e)=>{On.set(t,e)};class Mn extends L{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.componentType=t.dataset.componentType,On.has(this.componentType)?(this.type="component",this.frame.classList.add(g+`-${this.type}-layer`),this.componentProps=Xi(t.dataset.componentProps)||{},this.componentMeta=On.get(this.componentType)):console.error(`No component has been registered for "${this.componentType}"`)}async loadComponent(){try{var t,e,i;window.Depicter[this.componentType]||await this.composer.dependencyManager.loadScript(Ui(window.Depicter.basePath,this.componentMeta.script)),this.module=window.Depicter[this.componentType],null!=this&&null!=(t=this.module)&&t.async&&(this.componentProps.onReady=()=>this.holder.readyTrigger.exec()),this.componentProps.composer=this.composer,(this.componentProps.layer=this).holder.loadTrigger.hold(),null!=this&&null!=(e=this.module)&&e.pureScript?(i=this.module.component(this.componentProps),this.element.appendChild(i)):Pn(E(this.module.component,this.componentProps),this.element),this.componentMeta.styles&&await this.composer.dependencyManager.loadStylesheet(Ui(window.Depicter.basePath,this.componentMeta.styles)),this.holder.loadTrigger.exec()}catch(t){console.error("Error loading Preact component:",t)}}async _setupContent(){var t;this.componentMeta&&(this.holder.readyTrigger.hold(),await this.loadComponent(),null!=this&&null!=(t=this.module)&&t.async||this.holder.readyTrigger.exec())}}y.registerLayer("component",Mn),y.registerLayer("form:message",{external:!0,type:"form:message",meta:{script:"external-layers/form-message/layer.js"}}),y.registerLayer("form:input",{external:!0,type:"form:input",meta:{script:"external-layers/form-input/layer.js"}}),y.registerLayer("form:submit",{external:!0,type:"form:submit",meta:{script:"external-layers/form-submit/layer.js",styles:"external-layers/form-submit/styles.css"}}),y.registerLayer("form",{external:!0,type:"form",meta:{script:"external-layers/form/layer.js",styles:"external-layers/form/styles.css"}}),y.registerLayer("hoverSwitch",{external:!0,type:"hoverSwitch",meta:{script:"external-layers/hoverswitchimage/layer.js",styles:"external-layers/hoverswitchimage/styles.css"}}),y.registerLayer("survey:form",{external:!0,type:"form",meta:{script:"external-layers/form/layer.js",styles:"external-layers/form/styles.css"}}),y.registerLayer("survey:errorMessage",{external:!0,type:"survey:errorMessage",meta:{script:"external-layers/form-message/layer.js",styles:"external-layers/form-message/styles.css"}}),y.registerLayer("survey:input",{external:!0,type:"survey:input",meta:{script:"external-layers/form-input/layer.js",styles:"external-layers/form/styles.css"}}),y.registerLayer("survey:submit",{external:!0,type:"survey:submit",meta:{script:"external-layers/form-submit/layer.js",styles:"external-layers/form-submit/styles.css"}}),y.registerLayer("survey:prev",{external:!0,type:"survey:prev",meta:{script:"external-layers/survey-prev/layer.js"}}),y.registerLayer("survey:next",{external:!0,type:"survey:next",meta:{script:"external-layers/survey-next/layer.js",styles:"external-layers/survey-next/styles.css"}}),y.registerLayer("wooAddToCart",{external:!0,type:"wooAddToCart",meta:{script:"external-layers/woo-add-to-cart/layer.js",styles:"external-layers/woo-add-to-cart/styles.css"}}),y.registerLayer("hiddenInput",{external:!0,type:"hiddenInput",meta:{script:"external-layers/hidden-input/layer.js",styles:"external-layers/hidden-input/styles.css"}});qe="ontouchstart"in document,Ze=window.PointerEvent,ii=window.MSPointerEvent;let Dn=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Bn=Ze?"pointerdown":ii?"MSPointerDown":qe?"touchstart":"mousedown",zn=Ze?"pointerup":ii?"MSPointerUp":qe?"touchend":"mouseup",Vn=Ze?"pointermove":ii?"MSPointerMove":qe?"touchmove":"mousemove",Hn=Ze?"pointercancel":ii?"MSPointerCancel":qe?"touchcancel":"";class Nn{constructor(t){this.element=t,this._direction="horizontal",this.noSwipeSelector="",this.preventDefault="auto",this._lastStatus={},this._touchStart=this._touchStart.bind(this),this._touchEnd=this._touchEnd.bind(this),this._touchMove=this._touchMove.bind(this),this._touchCancel=this._touchCancel.bind(this),this._reset=this._reset.bind(this),this.enable()}get direction(){return this._direction}set direction(t){let e="both"!==(this._direction=t)?"horizontal"===t?"pan-y":"pan-x":"pan-x pan-y";this.element.style.msTouchAction=e,this.element.style.touchAction=e}_getDirection(t,e){switch(this._direction){case"horizontal":return t<=this.startX?"left":"right";case"vertical":return e<=this.startY?"up":"down";default:return Math.abs(t-this.startX)>Math.abs(e-this.startY)?t<=this.startX?"left":"right":e<=this.startY?"up":"down"}}_preventDefaultEvent(t,e){return"auto"!==this.preventDefault?this.preventDefault:!!this._preventLock||(t=Math.abs(t-this.startX)>Math.abs(e-this.startY),this._preventLock="horizontal"===this._direction&&t||"vertical"===this._direction&&!t,this._preventLock)}_createStatusObject(t){var e={},i=this._lastStatus.distanceX||0,s=this._lastStatus.distanceY||0;if(e.distanceX=t.pageX-this.startX,e.distanceY=t.pageY-this.startY,e.moveX=e.distanceX-i,e.moveY=e.distanceY-s,"move"===this._lastStatus.phase&&0===e.moveX&&0===e.moveY)return b({},this._lastStatus);e.timeStamp=Date.now();i=e.timeStamp-this._lastStatus.timeStamp||0;return 0==(e.dt=i/=1e3)||0===e.moveX&&(t.pageX<=2||t.pageX>=window.screen.width-2)?e.velocityX=this._lastStatus.velocityX:e.velocityX=e.moveX/i,0==i||0===e.moveY&&(t.pageY<=2||t.pageY>=window.screen.height-2)?e.velocityY=this._lastStatus.velocityY:e.velocityY=e.moveY/i,e.duration=e.timeStamp-this.startTime,e.direction=this._getDirection(t.pageX,t.pageY),e}_touchStart(t){!this.enabled||this.touchStarted||t.target.closest(this.noSwipeSelector,this.element)||(t.pointerType&&"mouse"===t.pointerType&&t.preventDefault(),t="touchstart"===t.type?t.touches[0]:t,this.startX=t.pageX,this.startY=t.pageY,this.startTime=Date.now(),document.addEventListener(zn,this._touchEnd,!1),Dn||document.addEventListener(Vn,this._touchMove,{passive:!1}),Hn.length&&document.addEventListener(Hn,this._touchCancel,!1),(t=this._createStatusObject(t)).phase="start",this.onSwipe(t),this._lastStatus=t,this.touchStarted=!0)}_touchMove(t){var e,i;this.touchStarted&&(e="touchmove"===t.type?t.touches[0]:t,i=this._createStatusObject(e),this._preventDefaultEvent(e.pageX,e.pageY))&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),clearTimeout(this._autoResetTimeout),this._autoResetTimeout=setTimeout(this._reset,60,e),i.phase="move",this._lastStatus=i,this.onSwipe(i))}_touchEnd(t){var e=this._lastStatus;t.preventDefault(),document.removeEventListener(zn,this._touchEnd,!1),Dn||document.removeEventListener(Vn,this._touchMove,{passive:!1}),Hn.length&&document.removeEventListener(Hn,this._touchCancel,!1),clearTimeout(this._autoResetTimeout),this._autoResetTimeout=setTimeout(this._reset,60),200<Date.now()-e.timeStamp&&(e.velocityX=0,e.velocityY=0),e.phase="end",this.touchStarted=!1,this.onSwipe(e)}_touchCancel(t){this._touchEnd(t)}_reset(t){this.reset=!1,this._lastStatus={},this.startTime=Date.now(),t?(this.startX=t.pageX,this.startY=t.pageY):(this.startX=null,this.startY=null),this._preventLock=!1}enable(){this.enabled||(this.enabled=!0,Dn&&document.addEventListener(Vn,this._touchMove,{passive:!1}),this.element.addEventListener(Bn,this._touchStart,{passive:!1}),this.direction=this._direction)}disable(){this.enabled&&(this.element.style.msTouchAction="",this.element.style.touchAction="",this.enabled=!1,this.element.removeEventListener(Bn,this._touchStart,!1),document.removeEventListener(zn,this._touchEnd,!1),document.removeEventListener(Vn,this._touchMove,!1),Hn.length)&&document.removeEventListener(Hn,this._touchCancel,!1)}}class Fn{constructor(t,e){this.navigator=t,this.swipeDir=e,this.isDisabled=!1,this.swipe=new Nn(t.composer.element),this.swipe.noSwipeSelector=`.${g}-no-swipe`,this._updateDirection=this._updateDirection.bind(this),this.navigator.view.options.observe("dir",this._updateDirection),this.navigator.view.options.observe("reverse",this._updateDirection),this._updateDirection(),this._scrollNavigatorAdapter=this._scrollNavigatorAdapter.bind(this),this.swipe.onSwipe=this._scrollNavigatorAdapter}enable(){this.isDisabled&&(this.isDisabled=!1,this.swipe.enable())}disable(){this.isDisabled||(this.isDisabled=!0,this.swipe.disable())}_updateDirection(){var t="auto"===this.swipeDir?this.navigator.view.options.get("dir"):this.swipeDir,e=this.navigator.view.options.get("reverse");let i="";this._reverseFactor=e?1:-1,"h"===(this.direction=t)?(i="clientWidth",this._movement="moveX",this._velocity="velocityX",this.swipe.direction="horizontal"):(i="clientHeight",this._movement="moveY",this._velocity="velocityY",this.swipe.direction="vertical"),this._moveFactor=this.navigator.view.size/this.navigator.view.element[i]||1}_scrollNavigatorAdapter(t){switch(t.phase){case"start":this.navigator.hold(),this.navigator.trigger("swipeStart",[this.navigator,this]);break;case"move":this.navigator.drag(t[this._movement]*this._reverseFactor*this._moveFactor),this.navigator.trigger("swipeMove",[this.navigator,this]);break;default:t[this._velocity]?this.navigator.push(t[this._velocity]*this._reverseFactor):this.navigator.release(),this.navigator.trigger("swipeEnd",[this.navigator,this])}}}e.registerAddon("swipeGesture",class{constructor(t){this.composer=t,this.composer.options.observe(this.composer.options.register({mouseSwipe:!0,touchSwipe:!0,swipeDir:"auto"}),this.checkOptions.bind(this)),this.composer.once("navigatorSetup",(t,e)=>{this.swipeHandler=new Fn(e,this.composer.options.get("swipeDir")),this.composer.swipeHandler=this.swipeHandler,this.enable=this.swipeHandler.enable.bind(this.swipeHandler),this.disable=this.swipeHandler.disable.bind(this.swipeHandler),this.checkOptions()}),this.composer.once("sectionsSetup",()=>this.checkOptions())}isDisabled(){return this.swipeHandler.isDisabled}checkOptions(){var t=this.composer.options.get(["mouseSwipe","touchSwipe"]);(t.touchSwipe&&F||t.mouseSwipe)&&1<(null==(t=this.composer.view)?void 0:t.sections.length)?(this.enable(),this.composer.trigger("swipeGestureEnabled")):(this.disable(),this.composer.trigger("swipeGestureDisabled"))}});class Rn{constructor(t){this.videoBackground=t.element.querySelector(`.${g}-bg-video`),this.section=t,this.composer=t.composer,t.hasBackgroundVideo=!!this.videoBackground,t.hasBackgroundVideo&&(this.playVideo=this.playVideo.bind(this),this.stopVideo=this.stopVideo.bind(this),this.setup())}setup(){this.section.background.appendBackground(this.videoBackground),this.videoSource=p(this.videoBackground,"data-video-src",""),this.playerType=p(this.videoBackground,"data-player-type","native"),this.looped=p(this.videoBackground,"data-loop",!0),this.autoPause=p(this.videoBackground,"data-auto-pause",!1),this.goNext=p(this.videoBackground,"data-goto-next",!1),this.poster=p(this.videoBackground,"data-video-poster"),this.section.readyTrigger.hold(),this.section.on("loadingStart",this._setupVideoPlayer,this),this.section.on("readyAndActivated",this.playVideo,this),this.section.on("readyAndDeactivated",this.stopVideo,this)}playVideo(){this.composer.options.get("videoAutoplayDisabled")||this.section.active&&"playing"!==this.videoPlayer.state&&this.videoPlayer.ready&&(this.videoPlayer.play(),this.videoBackground.classList.add(g+"-playing"))}stopVideo(){this.composer.options.get("videoAutoplayDisabled")||"stopped"!==this.videoPlayer.state&&this.videoPlayer.ready&&(this.videoPlayer.state="paused",this.autoPause||this.videoPlayer.seekTo(this.videoPlayer.options.startingTime),this.videoPlayer.pause(),this.videoBackground.classList.remove(g+"-playing"))}_setupVideoPlayer(){var t={src:this.videoSource,options:{loop:this.looped,poster:this.poster,muted:!0,controls:!1,startingTime:0},readyCallback:this._videoReady.bind(this)};"youtube"===this.playerType?this.videoPlayer=new zs(this.videoBackground,t):"vimeo"===this.playerType?this.videoPlayer=new Vs(this.videoBackground,t):this.videoPlayer=new Hs(this.videoBackground,t),"native"===this.playerType&&(this._replaceDataAttribute(),Ji(this.videoPlayer.playerElement,this.videoBackground,"cover")),this.videoPlayer.on("videoPlayerReady",this._videoReady.bind(this)),this.section.on("resize",this._locateBackground.bind(this),this),this.playVideo()}_replaceDataAttribute(){var t;this.videoBackground.hasAttribute("data-object-fit")&&(t=this.videoBackground.getAttribute("data-object-fit"),this.videoPlayer.playerElement.setAttribute("data-object-fit",t),this.videoBackground.removeAttribute("data-object-fit")),this.videoBackground.hasAttribute("data-object-position")&&(t=this.videoBackground.getAttribute("data-object-position"),this.videoPlayer.playerElement.setAttribute("data-object-position",t),this.videoBackground.removeAttribute("data-object-position"))}_locateBackground(){var t;["vimeo","youtube"].includes(this.videoPlayer.playerType)&&(this.videoBackground.classList.contains(g+"-embed-video")||this.videoBackground.classList.add(g+"-embed-video"),t=((t,e,i)=>{var s=t.width/e.width,s=Math.max(s,t.height/e.height);let n=e.height*s,o=e.width*s;e=n-t.height;return e<=i&&(s=o/n,n=n+i-e,o=(n+i-e)*s),{width:o,height:n}})(this.section.element.getBoundingClientRect(),{width:this.videoPlayer.videoWidth,height:this.videoPlayer.videoHeight},"vimeo"===this.videoPlayer.playerType?0:120),this.videoBackground.style.width=t.width+"px",this.videoBackground.style.height=t.height+"px")}_videoReady(){this.videoReady||(this.videoReady=!0,this._onVideoPlay=this._onVideoPlay.bind(this),this._onVideoPause=this._onVideoPause.bind(this),this._onVideoEnded=this._onVideoEnded.bind(this),this.videoPlayer.on("videoPlayerPlay",this._onVideoPlay),this.videoPlayer.on("videoPlayerPause",this._onVideoPause),this.videoPlayer.on("videoPlayerEnded",this._onVideoEnded),this._locateBackground(),this.section.readyTrigger.exec(),this.section.trigger("backgroundVideoReady",[this.section],!0))}_onVideoPlay(){this.section.trigger("backgroundVideoPlay",[this.section],!0)}_onVideoPause(){this.section.trigger("backgroundVideoPause",[this.section],!0)}_onVideoEnded(){this.videoPlayer.seekTo(this.videoPlayer.options.startingTime),this.goNext?this.composer.navigator.next():this.looped&&this.videoPlayer.play(),this.section.trigger("backgroundVideoEnded",[this.section],!0)}}e.registerAddon("sectionBackgroundVideo",class{constructor(t){this.composer=t,this.activeSlides=[],this.composer.on("sectionBeforeMount",this._checkSection,this)}_checkSection(t,e){e.firstMount&&(e.backgroundVideoController=new Rn(e),e.hasBackgroundVideo||this.activeSlides.push(e))}});let Wn=(t,e,i)=>!!window.IntersectionObserver&&(new IntersectionObserver(t=>{t.forEach(t=>{i(t.intersectionRatio,t)})},{threshold:e||(e=>{var i=[];for(let t=1;t<=e;t+=1){var s=t/e;i.push(s)}return i.push(0),i})(25)}).observe(t),!0);e.registerAddon("inViewport",class{constructor(t){this.composer=t,this.composer.options.register({inViewportRatio:.25,initAfterAppear:!1});let i=this.composer.options.get("initAfterAppear"),s=(i&&this.composer.initTrigger.hold(),this.composer.options.get("inViewportRatio"));Wn(this.composer.element,null,t=>{var e=t>=s;this.composer.element.classList[e?"add":"remove"](g+"-in-viewport"),i&&e&&(i=!1,this.composer.initTrigger.exec()),e!==this.composer.inViewport&&this.composer.trigger("inViewportStateChange",[e,t]),this.composer.trigger("inViewportRatioChange",[t]),this.composer.inViewport=e})||(this.composer.inViewport=!0)}});e.registerAddon("loading",class{constructor(t){this.composer=t,this.composer.options.register({sectionLoading:"auto"}),this.loadingElement=t.element.querySelector(`.${g}-loading-container`),this.loadingElement||(this.loadingElement=document.createElement("div"),this.loadingElement.classList.add(g+"-loading-container"),(t=document.createElement("div")).classList.add(g+"-loading"),this.loadingElement.appendChild(t),this.composer.element.appendChild(this.loadingElement)),this.composer.on("init",this._afterInit,this)}_afterInit(){"off"!==this.composer.options.get("sectionLoading")&&(this.sectionLoadingTemplate=this.composer.element.querySelector(`.${g}-section-loading`)||this.loadingElement.cloneNode(!0),this.sectionLoadingTemplate.remove(),this.composer.view.sections.forEach(this._setupLoadingOnSection,this))}_setupLoadingOnSection(t){var e;t.isReady||(e=this.sectionLoadingTemplate.cloneNode(!0),t.element.appendChild(e))}});e.registerAddon("disableClicks",class{constructor(t){this.composer=t,this.actions=t.actions,this.composer.on("init",this._init,this)}_init(){this._checkClick=this._checkClick.bind(this),this.composer.view.element.addEventListener("click",this._checkClick,!1),this.composer.on("swipeStart",this._swipeInteraction,this),this.composer.on("swipeMove",this._swipeInteraction,this),this.composer.on("swipeEnd",this._swipeInteraction,this)}_swipeInteraction(t){clearTimeout(this._to),"swipeStart"===t?(this._clickDisabled=!0,this._hadMove=!1):"swipeMove"===t?this._hadMove=!0:this._hadMove?(this._hadMove=!1,this._to=setTimeout(()=>{this._clickDisabled=!1},5)):this._clickDisabled=!1}_checkClick(t){this._clickDisabled&&(t.preventDefault(),t.stopPropagation())}});e.registerAddon("smartLoader",class{constructor(t){this.composer=t,this.loadCalledSections=new Set,this.composer.options.register({preload:0}),this.composer.options.alias("lazyload","preload"),this.composer.on("init",this._start,this,100),this.composer.on("sectionBeforeMount",(t,e)=>{e.loadTrigger.hold()},this,100),this.composer.on("layersSurfaceBeforeSetup",this._checkSurfaceLayers,this)}_start(){var t=this.composer.options.get("preload");0===t?this._loadSectionsInSequence():"all"===t?this._waitForAllSections():"number"==typeof t&&(this._loadNearby=t),this.composer.element.classList.add(g+"-preload-"+t),this.composer.on("targetIndexChange",this._checkCurrentSection,this),this._checkCurrentSection()}_checkSurfaceLayers(t,e){"all"===this.composer.options.get("preload")&&(e.loadTrigger.hold(),this.composer.readyTrigger.hold(),e.on("ready",()=>this.composer.readyTrigger.exec(),this),e.loadTrigger.exec())}_startLoadingSection(t){this.loadCalledSections.has(t)||(t.loadTrigger.exec(),this.loadCalledSections.add(t))}_checkCurrentSection(){this.composer.navigator.targetSectionIndexes.forEach(t=>{this._startLoadingSection(this.composer.view.sections[t]),this._loadNearby&&this._loadNearbySections(t,this._loadNearby)})}_loadNearbySections(e,i){let s;var n=this.composer.view.sections,o=this.composer.view.loop,r=n.length;for(let t=1;t!==i+1;t+=1)(s=e+t)>=r?o&&(s%=r,this._startLoadingSection(n[s])):this._startLoadingSection(n[s]),(s=e-t)<0?o&&(s+=r,this._startLoadingSection(n[s])):this._startLoadingSection(n[s])}_loadSectionsInSequence(t){var e;t!==this.composer.view.sections.length&&(void 0===t&&(t=0),(e=this.composer.view.sections[t]).isReady?this._loadSectionsInSequence(t+1):(e.on("ready",()=>{this._loadSectionsInSequence(t+1)},this),this._startLoadingSection(e)))}_waitForAllSections(){this.composer.readyTrigger.charge(this.composer.view.sections.length),this.composer.view.sections.forEach(t=>{t.isReady?this.composer.readyTrigger.exec():(t.on("ready",()=>this.composer.readyTrigger.exec(),this),this._startLoadingSection(t))})}});let jn=new RegExp(g+"-hide-on-(tablet|desktop|mobile)","g");e.registerAddon("hideOn",class{constructor(t){var e;this.composer=t,this.composerElement=this.composer.element,this.hideBreakpoints=null==(e=this.composerElement.getAttribute("class").match(jn))?void 0:e.map(t=>t.split("-").slice(-1)[0]),null!=(e=this.hideBreakpoints)&&e.includes(a().name||"desktop")&&(this._contentIsOnHold=!0,this.composer.isHidden=!0,t.initTrigger.hold()),null!=(e=this.hideBreakpoints)&&e.length&&u.on("breakpointChange",this.update,this)}update(t,e){var i;null!=(i=this.hideBreakpoints)&&i.includes(e)?(this.composer.isHidden=!0,this.composer.trigger("visibilityChange",[!0])):(this.composer.isHidden=!1,this._contentIsOnHold&&(this._contentIsOnHold=!1,this.composer.initTrigger.exec()),this.composer.trigger("visibilityChange",[!1]))}});e.registerAddon("keyboardNav",class{constructor(t){this.composer=t,this.composerElement=this.composer.element,this.composer.options.register({keyboard:!1}),this.composer.on("init",this.setup,this)}setup(){var t=this.composer.options.get("keyboard");t&&(this.activeOptions=b(b({},{checkLoop:!0,activeOnHover:!1}),"object"==typeof t?t:void 0),this._onKeydown=this._onKeydown.bind(this),this.activeOptions.activeOnHover?(this.composerElement.tabIndex=0,this._mouseInteraction=this._mouseInteraction.bind(this),this.composerElement.addEventListener("mouseenter",this._mouseInteraction,!1),this.composerElement.addEventListener("mouseleave",this._mouseInteraction,!1)):(this.composer.on("inViewportStateChange",(t,e)=>{e?document.addEventListener("keydown",this._onKeydown):document.removeEventListener("keydown",this._onKeydown)}),this.composer.inViewport&&document.addEventListener("keydown",this._onKeydown)))}_mouseInteraction(t){switch(t.type){case"mouseenter":this.composerElement.focus(),this.composerElement.addEventListener("keydown",this._onKeydown,!1);break;case"mouseleave":this.composerElement.blur(),this.composerElement.removeEventListener("keydown",this._onKeydown,!1)}}_onKeydown(t){var e=t.key,i=this.activeOptions.checkLoop;"ArrowLeft"===e?(this.composer.navigator.previous({checkLoop:i}),t.preventDefault()):"ArrowRight"===e&&(this.composer.navigator.next({checkLoop:i}),t.preventDefault())}});e.registerAddon("mouseWheelNav",class{constructor(t){this.composer=t,this.composerElement=this.composer.element,this.composer.options.register({mouseWheel:!1}),this.composer.on("init",this.setup,this)}setup(){var t;this.composer.options.get("nativeScrollNavigation")&&"fullscreen"===this.composer.options.get("layout")||(t=this.composer.options.get("mouseWheel"),this._layout=this.composer.options.get("layout"),this._slideByWheel=this._slideByWheel.bind(this),this._scrollByWheel=this._scrollByWheel.bind(this),this._wheelDeltaBuffer=0,this._lastWheelTime=0,t&&(this.options=b(b({},{activeOnAppear:!0,preventDefault:"auto",friction:.09}),"object"==typeof t?t:void 0),t=this.composer.options.get("navigator.slickType"),this.view=this.composer.view,"scroll"===t?(this._readViewPosition=!0,this.loop=this.composer.options.get("viewOptions.loop"),this.composer.navigator.on("slickChanged",()=>{this._readViewPosition=!0}),("fullscreen"===this._layout?window:this.composerElement).addEventListener("wheel",this._scrollByWheel,{passive:!1})):("fullscreen"===this._layout?window:this.composerElement).addEventListener("wheel",this._slideByWheel,{passive:!1})))}_letWindowScroll(t){var{top:e,bottom:i,height:s}=this.composerElement.getBoundingClientRect();if({top:e,bottom:i}={top:Math.round(e),bottom:Math.round(i)},t<0){if("fullscreen"!==this._layout&&e<=0)return!0;if("fullscreen"===this._layout)return!(Math.abs(e)<=.2*s)||e+window.scrollY}if(0<t){if("fullscreen"!==this._layout&&i>=window.innerHeight)return!0;if("fullscreen"===this._layout)return!(Math.abs(i-window.innerHeight)<=.2*s)||e+window.scrollY}return!1}_slideByWheel(t){let e=t.deltaY;var i=this._letWindowScroll(e);this.options.activeOnAppear&&!0===i||"auto"===this.options.preventDefault&&(this.composer.navigator.currentIndex===this.composer.navigator.count-1&&1<e||0===this.composer.navigator.currentIndex&&e<1)||(this.options.preventDefault&&(t.preventDefault(),!1!==i)&&window.scrollTo({behavior:"smooth",top:i}),t.timeStamp-this._lastWheelTime<300)||(1===t.deltaMode&&(e*=40),Math.abs(e)<20)||(e<0?this.composer.navigator.previous():this.composer.navigator.next(),this._lastWheelTime=t.timeStamp)}_scrollByWheel(t){let e=t.deltaY;var i=this._letWindowScroll(e);this.options.activeOnAppear&&!0===i||(1===t.deltaMode&&(e*=40),this.targetScrollPosition>=this.view.nominalLength&&1<e&&("auto"===this.options.preventDefault||!this.options.preventDefault))||this.targetScrollPosition<=0&&e<1&&("auto"===this.options.preventDefault||!this.options.preventDefault)||(this.options.preventDefault&&(t.preventDefault(),!1!==i)&&window.scrollTo({behavior:"smooth",top:i}),this._readViewPosition&&(this._readViewPosition=!1,this.targetScrollPosition=this.view.position),this.targetScrollPosition+=e,this.loop&&"auto"!==this.options.preventDefault||(this.targetScrollPosition=Math.max(Math.min(this.view.nominalLength,this.targetScrollPosition),0)),this.composer.navigator.goToPosition(this.targetScrollPosition,{useFriction:0!==this.options.friction,friction:this.options.friction}),this._lastWheelTime=t.timeStamp)}});e.registerAddon("nativeScrollNav",class{constructor(t){this.composer=t,this.composerElement=this.composer.element,this.composer.options.register({nativeScrollNavigation:!1,nativeScrollNavFriction:.09}),this.options=this.composer.options,this.composer.on("init",this.setup,this),this._checkStickyStatus=this._checkStickyStatus.bind(this),this._calculateMetrics=this._calculateMetrics.bind(this)}setup(){var t;this.options.get("nativeScrollNavigation")&&"fullscreen"===this.options.get("layout")&&(this._slickType=this.options.get("navigator.slickType"),this._friction=this.options.get("nativeScrollNavFriction"),t=document.createElement("div"),this.composerElement.parentNode.insertBefore(t,this.composerElement),t.classList.add(g+"-scroll-placeholder"),t.appendChild(this.composerElement),t.style.position="relative",this.placeholder=t,this.composerElement.classList.add(g+"-native-scroll-nav"),this._calculateMetrics(),this._checkStickyStatus(),this.composer.on("afterActionsSetup",this._overrideActions,this),window.addEventListener("scroll",this._checkStickyStatus),this.composer.on("layoutUpdate",this._calculateMetrics))}sectionIndexToPageScroll(t){return this._startScroll+t*this.composerElement.offsetHeight}scrollTo(t){window.scrollTo({top:t,behavior:"smooth"})}scrollToIndex(t){this.scrollTo(this.sectionIndexToPageScroll(t))}_overrideActions(){let{navigator:i,view:s,element:n}=this.composer;this.composer.actions.gotoSection=({type:t,to:e})=>{"next"===t?i.currentIndex<this._sectionsNum-1&&this.scrollToIndex(i.currentIndex+1):"previous"===t?0<i.currentIndex&&this.scrollToIndex(i.currentIndex-1):"number"!==t||Number.isNaN(e)?0<=(t=s.sections.findIndex(t=>t.element.id===n.id+"-"+e))&&this.scrollToIndex(t):this.scrollToIndex(Math.max(0,Math.min(this._sectionsNum-1,e)))}}_calculateMetrics(){this._startScroll=this.placeholder.getBoundingClientRect().top+window.scrollY,this._space=parseInt(this.composer.layoutController.computedFullscreenMargin,10),this._space&&(this.composerElement.style.marginTop=this._space+"px"),this._sectionsNum=this.composer.view.sections.length,this._length=this._sectionsNum*this.composerElement.offsetHeight,this.placeholder.style.height=this._length+this._space+"px"}_changeStickyStatus(){1<this._progress?(this.composerElement.style.position="absolute",this.composerElement.style.bottom="0px",this.composerElement.style.top=""):(this._progress<0?this.composerElement.style.position="absolute":this.composerElement.style.position="fixed",this.composerElement.style.top="0px",this.composerElement.style.bottom="")}_checkStickyStatus(){this._progress=(window.scrollY-this._startScroll)/(this._length-this.composerElement.offsetHeight),this._clampedProgress=Math.min(1,Math.max(0,this._progress)),"scroll"===this._slickType?this.composer.navigator.goToPosition(this.composer.view.nominalLength*this._clampedProgress,{useFriction:0!==this._friction,friction:this._friction}):this.composer.navigator.goToIndex(Math.floor(this._clampedProgress/(1/this._sectionsNum))),this._changeStickyStatus()}});e.registerAddon("grabCursor",class{constructor(t){this.composer=t,this.composer.options.register({useGrabCursor:!0}),this.composer.on("init",this._afterInit,this),this.composer.on("swipeGestureDisabled, swipeGestureEnabled",this._toggleEnable,this)}disable(){this.disabled||(this.disabled=!0,this.composer.element.classList.remove(g+"-cursor-grab"),this.composer.element.classList.remove(g+"-cursor-grabbing"))}enable(){this.disabled&&(this.disabled=!1,this.composer.element.classList.add(g+"-cursor-grab"))}_toggleEnable(t){["betweenAnimationStart","swipeGestureDisabled"].includes(t)?this.disable():this.enable()}_afterInit(){var t;if(this.composer.view.on("betweenAnimationStart, betweenAnimationEnd",this._toggleEnable,this),this.composer.options.get("useGrabCursor")&&!0===this.composer.options.get("mouseSwipe")){let t=this.composer.element;this.composer.on("swipeStart",()=>!this.disabled&&t.classList.add(g+"-cursor-grabbing")),this.composer.on("swipeEnd",()=>!this.disabled&&t.classList.remove(g+"-cursor-grabbing"))}null!=(t=this.composer)&&null!=(t=t.swipeHandler)&&t.isDisabled?this.disable():this.enable()}});let $n=[],qn=!0,Yn=()=>{qn||($n.forEach(t=>t()),requestAnimationFrame(Yn))},Xn=t=>($n.push(t),1===$n.length&&qn&&(qn=!1,Yn()),$n.length),Un=t=>{$n.splice($n.indexOf(t),1),0===$n.length&&(qn=!0)};class Zn{constructor(t,e){this.delay=t,this.currentCount=0,this.paused=!1,this.onTimer=null,e&&this.start(),this.update=this.update.bind(this)}start(){this.paused=!1,this.lastTime=Date.now(),Xn(this.update)}stop(){this.paused=!0,Un(this.update)}reset(){this.currentCount=0,this.paused=!0,this.lastTime=Date.now()}update(){this.paused||Date.now()-this.lastTime<this.delay||(this.currentCount+=1,this.lastTime=Date.now(),this.onTimer&&this.onTimer(this.getTime()))}getTime(){return this.delay*this.currentCount}}let Gn={autostart:!1,duration:3,autoStartAfterVideo:!0,pauseOnHover:!0,resetTimerOnBlur:!1,pauseAtEnd:!1,navigatorParams:{animate:!0,duration:1.5,forceLooped:!0,easing:"easeOutExpo"}};e.registerAddon("slideshow",class{constructor(t){this.composer=t,this.composer.options.register({slideshow:!1}),this.timer=new Zn(100),this.timer.onTimer=this._onTimer.bind(this),this.mouseEntered=!1,this.composer.on("init",this.setup,this,100)}setup(){var t=this.composer.options.get("slideshow");this.options=b(b({},Gn),"object"==typeof t?t:{autostart:!!t}),this._registerAutoPlayMethods(),this._readSectionSlideshowDataAttrs(),this.loop=this.composer.view.options.get("loop"),this.options.autostart?(this._start(),this._waitForVideo()):this.composer.slideshow.pause(),this.composer.on("changeStart",this._reset,this),this.composer.on("changeEnd",this._onChangeEnd,this),this.options.pauseOnHover?(this._mouseInteraction=this._mouseInteraction.bind(this),this.composer.element.addEventListener("mouseover",this._mouseInteraction,!1),this.composer.element.addEventListener("mouseenter",this._mouseInteraction,!1),this.composer.element.addEventListener("mouseleave",this._mouseInteraction,!1)):(this.composer.on("swipeStart",this._pause,this),this.composer.on("swipeEnd",this._start,this)),this.composer.on("sectionVideoOpen, detach",this._pause,this),this.composer.on("sectionVideoClose",this._start,this),this.composer.on("attach",()=>{this._reset(),this._start()}),this.composer.trigger("slideshowInit",[this._hardPause])}_registerAutoPlayMethods(){this.composer.slideshow={currentTime:()=>this.durationProgress,resume:()=>{this._hardPause=!1,this.composer.paused=!1,this._start(),this.composer.trigger("slideshowStatusChange",[this._hardPause])},pause:()=>{this._hardPause=!0,this.composer.paused=!0,this._pause(),this.composer.trigger("slideshowStatusChange",[this._hardPause])},reset:()=>this._reset,isPaused:()=>this._hardPause}}_readSectionSlideshowDataAttrs(){this.duration=this.options.duration;var{slideshowDuration:t,slideshowPause:e}=this.composer.view.currentSection.element.dataset;t&&(this.duration=t),e&&this.composer.slideshow.pause(),this.duration*=1e3}_start(){this._hardPause||(this._isPaused=!1,this.timer.start(),this.composer.trigger("slideshowStart"))}_pause(){this._isPaused=!0,this.timer.stop(),this.composer.trigger("slideshowPaused")}_reset(){this.timer.reset(),this.durationProgress=0,this.composer.trigger("slideshowTimerUpdate",[this.durationProgress]),this.composer.trigger("slideshowTimerReset")}_onChangeEnd(){("auto"!==this.options.pauseAtEnd||this.loop)&&!0!==this.options.pauseAtEnd||this.composer.navigator.targetIndex!==this.composer.navigator.count-1?(this._readSectionSlideshowDataAttrs(),this.mouseEntered||(this._start(),this._waitForVideo())):(this.composer.slideshow.reset(),this.composer.slideshow.pause())}_onTimer(){this.durationProgress=Math.min(100,Math.max(0,this.timer.getTime()/this.duration*100)),this.composer.trigger("slideshowTimerUpdate",[this.durationProgress]),this.timer.getTime()>=this.duration&&this.composer.navigator.next(this.options.navigatorParams)}_mouseInteraction(t){switch(t.type){case"mouseenter":case"mouseover":this.mouseEntered=!0,this._pause();break;case"mouseleave":this.mouseEntered=!1,this.options.resetTimerOnBlur&&this._reset(),this._start()}}_waitForVideo(){var t=this.options.autoStartAfterVideo,{currentSection:{backgroundVideoController:e,hasBackgroundVideo:i}}=this.composer.view;t&&i&&"playing"!==e.videoState&&(this._reset(),this.composer.on("sectionBackgroundVideoPlay",this._start,this))}});let Kn=["click","mouseenter","mouseleave"],Jn=["sectionClick","mouseenterSection","mouseleaveSection"],Qn=(t,e,i=0)=>{i?setTimeout(()=>{null!=t&&t(e)},1e3*i):null!=t&&t(e)},to=(r,a,h)=>{var e=a.dataset.actions;if(e){let t=[];try{t=JSON.parse(e.replace(/'/g,'"'))}catch{}t.forEach(([e,i,s,n])=>{if(Array.isArray(null==n?void 0:n.elements)&&(n.elements=n.elements.map(t=>"self"===t?h.id:t)),Kn.includes(i))a.classList.add(g+"-no-swipe"),a.classList.add(g+"-has-mouse-action"),a.addEventListener(i,t=>{h.disableActions||(t.preventDefault(),t.stopPropagation(),Qn(r[e],b(b({},n),{},{from:h}),s))});else if(Jn.includes(i)){var t,o;null!=(t=h.holder.element)&&null!=(o=t.addEventListener)&&o.call(t,i.replace("Section",""),t=>{t.preventDefault(),t.stopPropagation(),Qn(r[e],n,s)})}else{let t=h.layerForAction||h;t.on(i,()=>{t.disableActions||Qn(r[e],b(b({},n),{},{from:h}),s)})}})}};class eo{constructor(t){this.composer=t,this.composer.on("beforeInit",this._setupActions,this),this.composer.on("layerReady",this._setLayerActions,this),this.composer.on("init",this._afterInit,this)}_setupActions(){var n;this.composer.actions=(n=this.composer,{openURL({path:t,target:e}){window.open(t,e)},slideshow({type:t}){var e;["resume","pause","reset"].includes(t)&&null!=(t=(e=n.slideshow)[t])&&t.call(e)},gotoSection({type:t,to:e}){var i,s;["next","previous"].includes(t)?null!=(s=(i=n.navigator)[t])&&s.call(i,{checkLoop:!0}):"number"!==t||Number.isNaN(e)?0<=(s=n.view.sections.findIndex(t=>t.id===e))&&n.navigator.goToIndex(s):n.navigator.goToIndex(parseInt(e,10))},scrollTo({type:t,to:e}){"below"===t?window.scrollTo({top:window.scrollY+n.element.getBoundingClientRect().bottom,behavior:"smooth"}):null!=(t=document.querySelector(e))&&t.scrollIntoView({behavior:"smooth"})},backgroundVideo({type:t}){var e,i=null==(e=n.view.currentSection)||null==(e=e.backgroundVideoController)?void 0:e.videoPlayer;if(i||i.ready)try{switch(t){case"stop":i.stop();break;case"play":i.play();break;case"pause":i.pause();break;case"toggle":"playing"===i.state?i.pause():i.play()}}catch{}},backgroundVideoSound({type:t}){var e,i=null==(e=n.view.currentSection)||null==(e=e.backgroundVideoController)?void 0:e.videoPlayer;if(i||i.ready)try{switch(t){case"mute":i.mute();break;case"unmute":i.unmute();break;case"toggle":i.muted?i.unmute():i.mute()}}catch{}},elements({elements:t,type:i,from:s}){t.forEach(t=>{var e=(s instanceof L?s.holder:n).layersById[t];if(e)switch(i){case"show":null!=e&&e.show();break;case"hide":null!=e&&e.hide();break;case"toggle":null!=e&&e.isHidden?null!=e&&e.show():null!=e&&e.hide()}})},customJS({value:t}){var e;null!=(e=window.Depicter.jsActions)&&null!=(e=e[t])&&e.call(n)}}),this.composer.trigger("afterSetupActions",[this.composer.actions])}_afterInit(){this.composer.view.sections.forEach(t=>to(this.composer.actions,t.element,t)),this.composer.trigger("afterActionsSetup")}_setLayerActions(t,e){to(this.composer.actions,e.element,e)}}e.registerAddon("actions",eo);e.registerAddon("revertStyles",class{constructor(t){this.composer=t,this.composer.options.register({useRevertStyles:!0}),this.composer.on("init",this._afterInit,this)}_afterInit(){var t;this.composer.options.get("useRevertStyles")&&null!=(t=window)&&null!=(t=t.CSS)&&t.supports("all","revert")&&this.composer.element.classList.add(g+"-revert")}});e.registerAddon("hoverOff",class{constructor(t){this.composer=t,this.composer.on("layerCreate",this._checkLayer,this),this.layersList=[],u.on("breakpointChange",this._update,this)}_checkLayer(t,e){var i=(e.element.getAttribute("data-hover-off")||"").split(",").map(t=>t.trim());i.length&&(this.layersList.push({layer:e,hoverOffValue:i}),this._updateLayer(e,i,a().name))}_updateLayer(t,e,i){e.includes(i||"desktop")?t.element.classList.add(g+"-hover-off"):t.element.classList.remove(g+"-hover-off")}_update(t,i){this.layersList.forEach(({layer:t,hoverOffValue:e})=>this._updateLayer(t,e,i))}});e.registerAddon("layerAnimationsClassName",class{constructor(t){this.composer=t,this.composer.on("layerGetInOutAnimation",this._checkLayer,this),this.layersList=[],u.on("breakpointChange",this._update,this)}_checkLayer(t,e){this.layersList.push(e),this._updateLayer(e,a().name||"desktop")}_updateLayer(t,e){var i=t.inOutAnimation.animationsData;i&&((i=m(i,e)).animationIn?t.frame.classList.add(g+"-has-animation-in"):t.frame.classList.remove(g+"-has-animation-in"),i.animationOut?t.frame.classList.add(g+"-has-animation-out"):t.frame.classList.remove(g+"-has-animation-out"))}_update(t,e){this.layersList.forEach(t=>this._updateLayer(t,e))}});e.registerAddon("nearbySections",class{constructor(t){this.composer=t,this.composer.on("init",this._setup,this)}_setup(){this.composer.view.options.register("nearbyVisibility","hidden"),this.composer.view.options.register("nearbyVisibilityAmount","10%"),this.composer.view.options.register("nearbyVisibilityViewAlignment","center");var t=this.composer.options.get("view"),e=this.composer.view.options.get("nearbyVisibility");"hidden"!==e&&["basic","transform"].includes(t)&&(this.nearbyAmount=this.composer.options.get("viewOptions.nearbyVisibilityAmount"),this.composer.element.classList.add(g+"-nearby-sections-visible"),this.composer.element.classList.add(g+"-nearby-view-align-"+this.composer.options.get("viewOptions.nearbyVisibilityViewAlignment")),this.targetDimension="v"===this.composer.options.get("viewOptions.dir")?["maxHeight","height"]:["maxWidth","width"],this.composer.view.element.style[this.targetDimension[0]]=`calc(100% - ${this.nearbyAmount})`,this.composer.view.element.style[this.targetDimension[1]]=`calc(100% - ${this.nearbyAmount})`,"full"===e&&this.composer.on("layoutUpdate",this._update,this),null!=(e=(t=this.composer.view).enableAntialiasFix)&&e.call(t),this.composer.layoutController.update())}_update(){var t="maxHeight"===this.targetDimension[0]?m(this.composer.options.get("height")):m(this.composer.options.get("width"));this.composer.view.element.style[this.targetDimension[0]]=t+"px"}});e.registerAddon("viewDir",class{constructor(t){this.composer=t,this.composer.on("init",this._afterInit,this)}_afterInit(){var t=this.composer.options.get("viewOptions.dir");t&&this.composer.element.classList.add(g+"-view-dir-"+t)}});e.registerAddon("slickerSpeed",class{constructor(t){this.composer=t,this._update=this._update.bind(this),this.composer.on("navigatorSetup",this._setup,this)}_setup(){this.composer.navigator.options.register("slickerSpeed",.5),this.composer.navigator.options.observe("slickerSpeed",this._update),this._update()}_update(){var t=100*(this.composer.options.get("navigator.slickerSpeed")||.01);t<=50?(this.composer.options.set("navigator.snapping.constant",50+40*(t/50)),this.composer.options.set("navigator.slickerFriction",.01+.19*((50-t)/50))):(this.composer.options.set("navigator.snapping.constant",90+910*(t=(t-50)/50)),this.composer.options.set("navigator.slickerFriction",.01-.01*t))}});class io{constructor(t,e,i,s){this.parallaxAddon=t,this.target=e,this.holder=i,this.refPoint={x:0,y:0},this.currentPoint={x:0,y:0},this.container=t.container,this._renderByMouse=this._renderByMouse.bind(this),this.options=s,this.mouseInteractionsTarget=this.options.useEntirePage?document:this.holder}_setupMouseInteractions(){this.mouseInteractionsTarget.addEventListener("mousemove",this._renderByMouse),this.mouseInteractionsTarget.addEventListener("mouseleave",this._renderByMouse)}_revokeMouseInteractions(){this.mouseInteractionsTarget.removeEventListener("mousemove",this._renderByMouse),this.mouseInteractionsTarget.removeEventListener("mouseleave",this._renderByMouse)}_renderByMouse(t){let e,i;var s,n,o;i="mousemove"===t.type?({top:n,left:o}=(s=t.currentTarget).getBoundingClientRect(),e=t.clientX-o-s.offsetWidth/2,t.clientY-n-s.offsetHeight/2):e=0,this.refPoint={x:e,y:i}}_calculate(){var t,e,i,s;!1===this.options.smooth?this.currentPoint=this.refPoint:({x:t,y:e}=this.refPoint,{x:i,y:s}=this.currentPoint,this.currentPoint={x:i+(i=t-i)/12,y:s+(s=e-s)/12},Math.abs(i)<.019&&(this.currentPoint.x=t),Math.abs(s)<.019&&(this.currentPoint.y=e)),this.render(),requestAnimationFrame(()=>this._calculate())}render(){var{x:t=.5,y:e=.5}=this.options,{x:i,y:s}=this.currentPoint,i=-i*f(t),t=-s*f(e);this.container.style.transform="translateX("+i+"px) translateY("+t+"px) "}initiate(){var{use:t="mouse"}=this.options;"mouse"===(this.lastActiveUseValue=t)&&this._setupMouseInteractions(),this._calculate()}reset(){"mouse"===this.lastActiveUseValue&&this._revokeMouseInteractions(),this.container.style.transform=""}}class so extends io{render(){var{x:t=0,y:e=0,rx:i=30,ry:s=30,zOrigin:n=0,ox:o=.5,oy:r=.5}=this.options,{x:a,y:h}=this.currentPoint,{offsetWidth:l,offsetHeight:c}=this.holder,{left:d,top:p}=this.holder.getBoundingClientRect(),u=this.container.parentElement.getBoundingClientRect(),t="translateX("+-a*f(t)+"px) translateY("+-h*f(e)+"px) rotateY("+a/(l/2)*f(i)+"deg) rotateX("+-h/(c/2)*f(s)+"deg)",e=l*f(o)-(u.left-d),a=c*f(r)-(u.top-p);this.container.style.transformOrigin=`${e}px ${a}px ${f(n)}px`,this.container.style.transform=t}initiate(){var{use:t="mouse"}=this.options;"mouse"===(this.lastActiveUseValue=t)&&this._setupMouseInteractions(),this.container.style.transformStyle="preserve-3d",this._calculate()}reset(){super.reset(),this.container.style.transformStyle="",this.container.style.transformOrigin=""}}let no=new Map,oo=(no.set("2d",io),no.set("3d",so),no.set("scroll",class{constructor(t,e,i,s){this.parallaxAddon=t,this.target=e,this.holder=i,this.refValue=0,this.currentValue=0,this.container=t.container,this._onScroll=this._onScroll.bind(this),this.options=s,this.alwaysEnabled=!0}_setupScrollInteractions(){document.addEventListener("scroll",this._onScroll)}_revokeScrollInteractions(){document.removeEventListener("scroll",this._onScroll)}_onScroll(){var{top:t,bottom:e,height:i}=this.holder.getBoundingClientRect(),{twoWay:s=!0}=this.options;t<0?this.refValue=Math.max(-i,t)/i:e>window.innerHeight?this.refValue=(s?1:-1)*Math.min(i,e-window.innerHeight)/i:this.refValue=0}_calculate(){var t;(!1===this.options.smooth||(t=this.refValue-this.currentValue,this.currentValue+=t/12,Math.abs(t)<.001))&&(this.currentValue=this.refValue),this.render(),requestAnimationFrame(()=>this._calculate())}render(){var t,{dir:e="bottom",movement:i=300,fade:s=!1,rotate:n=0,scale:o=1}=this.options;let r="",a="";i&&(t=["top","left"].includes(e),r+=`translate${["bottom","top"].includes(e)?"Y":"X"}(${this.currentValue*f(i)*(t?1:-1)}px)`),n&&(r+=` rotate(${f(n)*this.currentValue}deg)`),1!==o&&(r+=` scale(${1+(1-f(o))*this.currentValue})`),s&&(a=1-Math.abs(this.currentValue)),this.container.style.transform=r,this.container.style.opacity=a}initiate(){this._setupScrollInteractions(),this._onScroll(),this._calculate(),this.holder.classList.add(g+"-scroll-parallax")}reset(){this._revokeScrollInteractions(),this.container.style.transform="",this.container.style.opacity="",this.holder.classList.remove(g+"-scroll-parallax")}}),no.set("viewScroll",class{constructor(t,e,i,s){this.controller=t,this.target=e,this.holder=i,this.refValue=0,this.currentValue=0,this.container=t.container,this._onScroll=this._onScroll.bind(this),this.options=s,this.alwaysEnabled=!0}_setupScrollInteractions(){this.controller.holder.on("pendingOffsetChange",this._onScroll)}_revokeScrollInteractions(){this.controller.holder.on("pendingOffsetChange",this._onScroll)}_onScroll(t,e,i,s){this.value=s,this.render()}render(){var t,{dir:e="bottom",movement:i=300,fade:s=!1,rotate:n=0,scale:o=1}=this.options;let r="",a="";i&&(t=["top","left"].includes(e),r+=`translate${["bottom","top"].includes(e)?"Y":"X"}(${this.value*f(i)*(t?1:-1)}px)`),n&&(r+=` rotate(${f(n)*this.value}deg)`),1!==o&&(r+=` scale(${1+(1-f(o))*this.value})`),s&&(a=1-Math.abs(this.value)),this.container.style.transform=r,this.container.style.opacity=a}initiate(){this._setupScrollInteractions()}reset(){this._revokeScrollInteractions(),this.container.style.transform="",this.container.style.opacity=""}}),t=>{try{var e=_(t,"parallax");if(qi(e))return!1;let i={};return Object.entries(e).forEach(([t,e])=>{i[t]="false"!==e&&JSON.parse(e.replace(/'/g,'"'))}),i}catch(t){return console.log(t),!1}});class ro{constructor(t,e,i,s,n=!0){this.options=s,this.activeAreaElement=i,this.holder=e,this.targetElement=t,n?((s=document.createElement("div")).classList.add(g+"-parallax-wrap"),this.container=s,Wi(t,s)):this.container=t,u.on("breakpointChange",(t,e)=>this._update(e),this),this._update(a().name)}_update(t){var e,t=m(this.options,t);this.disable(),t?(this.activeOptions=t,t=this.activeOptions.type,(e=no.get(t))?(this.activeHandler=new e(this,this.targetElement,this.activeAreaElement,this.activeOptions),this.activeHandler.alwaysEnabled?(this.holder.off("readyAndActivated",this.enable,this),this.holder.off("readyAndDeactivated",this.disable,this),this.enable()):(this.holder.on("readyAndActivated",this.enable,this),this.holder.on("readyAndDeactivated",this.disable,this),this.holder.isReady&&this.holder.isActivated&&this.enable())):console.warn("No parallax handler found for "+t)):(this.holder.off("readyAndActivated",this.enable,this),this.holder.off("readyAndDeactivated",this.disable,this))}enable(){this.isEnabled||(this.isEnabled=!0,this.activeHandler.initiate())}disable(){var t;this.isEnabled=!1,null!=(t=this.activeHandler)&&t.reset()}}function ao(t,e,i={top:0,right:0,bottom:0,left:0}){[t,i={top:0,right:0,bottom:0,left:0}]=[t,i];var s="none"!==(t=window.getComputedStyle(t).boxShadow)&&!t.includes("inset")&&(t=/(-?\d+px)\s+(-?\d+px)\s+(\d+px)\s+(\d+px)/.exec(t))?(o=parseInt(t[1],10),s=parseInt(t[2],10),n=parseInt(t[3],10),t=parseInt(t[4],10),{top:Math.max(0,Math.abs(s)+n+t-s)+i.top,right:Math.max(0,o+n+t)+i.right,bottom:Math.max(0,s+n+t)+i.bottom,left:Math.max(0,Math.abs(o)+n+t-o)+i.left}):null,{marginTop:n,marginBottom:t,marginRight:o,marginLeft:i}=window.getComputedStyle(e),e=parseInt(n,10),t=parseInt(t,10),r=parseInt(o,10),i=parseInt(i,10);return s&&(e<s.top?s.top-=e:s.top=0,t<s.bottom?s.bottom-=t:s.bottom=0,r<s.right?s.right-=r:s.right=0,i<s.left?s.left-=i:s.left=0),s}e.registerAddon("parallax",class{constructor(t){(this.composer=t).options.get("disableAnimations")||(this.composer.on("layerCreate",this._checkLayer,this),this.composer.on("sectionReady",this._checkSection,this),this.layersList=[])}_checkLayer(t,e){var i=oo(e.element);i&&new ro(e.element,e.holder,this.composer.element,i)}_checkSection(t,e){var i,s=oo(e.element);s&&(i=e.background.element)&&new ro(i,e,this.composer.element,s,!1)}});e.registerAddon("carouselHelper",class{constructor(t){(this.composer=t).options.register("carouselOptions",{columns:{default:3,tablet:2,mobile:1},mode:"off",alignItems:"center",itemsContentGrowth:"grow-space"});var t=this.composer.options.get("carouselOptions"),{mode:e,alignItems:i,itemsContentGrowth:s}=t.get(["mode","alignItems","itemsContentGrowth","columns"]);"off"!==e&&(this.composer.element.classList.add(g+"-carousel-helper"),this.composer.on("init",()=>{requestAnimationFrame(()=>{var t,e;return null==(t=(e=this.composer.view).enableAntialiasFix)?void 0:t.call(e)});var t,e=ao(this.composer.view.sections[0].element,this.composer.layoutController.primaryContainer,{top:10,bottom:10,left:0,right:0});e&&(t=this.composer.element,t.style.paddingTop=e.top+"px",t.style.marginTop=-e.top+"px",t.style.paddingBottom=e.bottom+"px",t.style.marginBottom=-e.bottom+"px")}),this.composer.options.set("layout","fullwidth",!1,!0),"fill"===e&&this.composer.options.set("sectionSizing","fit-content",!1,!0),"focus"===e&&(this.composer.options.set("viewOptions.nearbyVisibility","full",!1,!0),this.composer.options.set("viewOptions.nearbyVisibilityViewAlignment",i,!1,!0)),"flex"===e)&&(this.composer.options.set("columns",t.get("columns"),!1,!0),"keep-ratio"===s&&this.composer.options.set("upscale",!0,!1,!0),"grow-content"===s)&&this.composer.options.set("unwrapLayers",!0,!1,!0)}});let ho=["dpcOpinionScale","dpcChoice","dpcMediaChoice"].map(t=>`[data-component-type="${t}"]`).join(", ");e.registerAddon("surveyHelper",class{constructor(s){var t=(this.composer=s).element.querySelector("form.depicter-survey-form");let n=[];if(t){t.id||(t.id="depicter-survey-form-"+Math.random().toString(36).substr(2,9)),s.survey={form:t,formId:t.id,preventProceed:t=>{n[t]=(n[t]??0)+1},resolveProceed:t=>{n[t]=Math.max(0,(n[t]??1)-1)},isProceedRestricted:()=>{var t=s.navigator.targetIndex;return 0<n[t]},isLastStep:!1},s.once("init",()=>{let i=s.navigator.goToIndex;s.navigator.goToIndex=(t,e)=>{n.slice(0,t).some(t=>0<t)?s.trigger("surveyPreventProceed"):i.call(s.navigator,t,e)}});let e;s.on("sectionReady, targetIndexChange",()=>{var t=s.navigator.targetIndex,t=([...s.view.sections].reverse().some(t=>!!t.element.querySelector("input, "+ho)&&(s.survey.lastStep=t,s.survey.lastStepIndex=t.index,!0)),t>=s.survey.lastStepIndex);e!==t&&(s.survey.isLastStep=t,s.trigger("isLastSurveyStep",[t]),e=t)}),s.on("formSubmitted",()=>{s.trigger("surveyFormSubmitted"),s.navigator.next()})}}});e.registerAddon("animrollOptionsController",class{constructor(t){this.composer=t;t=this.composer.options.get("sectionType");"animroll"===this.composer.options.get("view")&&"animative"!==t&&this.composer.options.set("sectionType","animative"),this.composer.on("init",this.setup,this)}setup(){var t;if(null!=(t=this.composer.navigator)&&t.push){let e=this.composer.navigator.push,i=this.composer.options.get("navigator.slickerSpeed");this.composer.navigator.push=t=>{t=0<t?1:-1;e.call(this.composer.navigator,6e3*t*i)}}}});class lo{constructor(t){var t=null==(t=(this.section=t).background)?void 0:t.targetImg,e=t&&_(t,"ken-burns"),i=t&&_(t,"crop");this.section.hasKenBurnsEffect=e&&!qi(e)&&i&&!qi(i),this.enabled=this.section.hasKenBurnsEffect,this.enabled&&(this.imageElement=t,this.kenBurnsAttrs=Yi(e,Xi),this.cropAttrs=Yi(i,Xi),this.section.on("readyAndActivated, resize",this.setAnimation,this),this.section.on("deactivated",this.removeAnimation,this),this.animTarget=this.section.background.element)}setAnimation(t){if("resize"!==t||this.section.active){let i=(null==(t=this.anim)?void 0:t.timeline.progress)||0;if(null!=(t=this.anim)&&t.reset(),cancelAnimationFrame(this.ram),this.imageElement.classList.contains(g+"-cropped")){let e=m(this.kenBurnsAttrs);e&&(e.set=m(this.cropAttrs),this.ram=requestAnimationFrame(()=>{var t;this.anim=Fi("kenBurns",this.animTarget,"out",e),i&&(t=this.anim.timeline,t.seek(t.duration*i/100))}))}}}removeAnimation(){var t,e;null!=(t=this.anim)&&null!=(e=t.reset)&&e.call(t),this.anim=void 0}}e.registerAddon("kenBurns",class{constructor(t){this.composer=t,this.activeSlides=[],t.options.get("disableAnimations")||this.composer.on("sectionReady",this._checkSection,this)}_checkSection(t,e){e.firstMount&&(e.kenBurnsController=new lo(e),e.hasBackgroundVideo||this.activeSlides.push(e))}});e.registerAddon("detacher",class{constructor(t){this.composer=t,this.composerElement=this.composer.element,this.composer.options.register({detachBeforeInit:!1,restartActiveSections:!0}),this._placeHolder=document.createElement("span"),this._placeHolder.style.display="none",this._placeHolder.dataset.placeholder=this.composerElement.id,this.isDetached=!1,this.disableAutoInit=this.composer.options.get("detachBeforeInit"),this.restartActiveSections=this.composer.options.get("restartActiveSections"),this.disableAutoInit&&(this.composer.initTrigger.hold(),this._detach()),this.composer.attach=this._attach.bind(this),this.composer.detach=this._detach.bind(this)}_detach(){this.isDetached||(this.isDetached=!0,this.composer.trigger("beforeDetach"),this.composerElement.parentElement.insertBefore(this._placeHolder,this.composerElement),this.composerElement.remove(),this.composer.trigger("detach"),this.disableAutoInit)||this.composer.navigator.goToIndex(this.composer.navigator.targetIndex,{animate:!1},!0)}_attach(t){this.isDetached&&(this.isDetached=!1,this.composer.trigger("beforeAttach"),t?t.appendChild(this.composerElement):(this._placeHolder.parentElement.insertBefore(this.composerElement,this._placeHolder),this._placeHolder.remove()),this.disableAutoInit?(this.disableAutoInit=!1,this.composer.initTrigger.exec()):(this.composer.layoutController.update(),this.composer.trigger("resize"),this.restartActiveSections&&this.composer.view.sections.forEach(t=>{t.reactive()}),this.composer.trigger("attach")))}});e.registerAddon("autoScroller",class{constructor(t){this.composer=t,this.composerElement=this.composer.element,this.composer.options.register({autoScroll:{enable:!1,speed:50,pauseOnHover:!1,direction:"normal"}}),this.isPause=!0,this.isSlickerChange=!1,this.animationFrameId=null,this.move=this.move.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this._swipeStart=this._swipeStart.bind(this),this._swipeEnd=this._swipeEnd.bind(this),this.composer.on("init",this.setup,this)}setup(){var t=null==(t=this.composer.options.get("autoScroll"))?void 0:t.toObject();t&&t.enable&&(this.composer.view.activeFactor&&(this.composer.view.activeFactor=.999),this.options=b(b({},{direction:"normal",speed:50,pauseOnHover:!1}),t),this.options.pauseOnHover&&(this.composer.element.addEventListener("mouseenter",this.pause,!1),this.composer.element.addEventListener("mouseleave",this.resume,!1)),this.composer.navigator.on("swipeStart",this._swipeStart),this.composer.navigator.slicker.on("animationEnd",this._swipeEnd),this.resume(),this.composer.once("slideshowInit",()=>this.composer.slideshow.pause()))}_swipeStart(){this.isSlickerChange=!0,this.pause()}_swipeEnd(){this.isSlickerChange=!1,this.resume()}resume(){this.isPause&&!this.isSlickerChange&&(this.isPause=!1,this.animationFrameId=requestAnimationFrame(this.move))}pause(){this.isPause||(this.isPause=!0,cancelAnimationFrame(this.animationFrameId))}move(){var{speed:t,direction:e}=this.options,i=this.composer.options.get("viewOptions.loop"),{position:s,nominalLength:n}=this.composer.view;let o=s+ +t/60*("reverse"===e?-1:1);i||(o=Math.max(Math.min(o,n),0)),this.composer.navigator.goToPosition(o,{useFriction:!1,animate:!1}),this.animationFrameId=requestAnimationFrame(this.move)}});e.registerAddon("watermark",class{constructor(t){this.composer=t,this.composer.options.register({useWatermark:!1}),this.composer.on("init",this._afterInit,this)}_afterInit(){this._wrapper=this.composer.element.querySelector(`.${g}-view-container`);let t=""+String.fromCharCode(Math.floor(26*Math.random())+65)+Math.random().toString(36).substring(7);this.composer.options.get("useWatermark")&&(this._addWatermark(t),setInterval(()=>{this._addWatermark(t)},2e3))}_addWatermark(t){var e,i,s=this._wrapper.querySelector("."+t);s?s.style.cssText=this._getWatermarkStyles():(s=document.createElement("a"),e=this._getDepicterLogoType(),i=this._getWatermarkStyles(),s.innerHTML="Made With"+e,s.classList.add(g+"-no-swipe"),s.classList.add(t),s.style.cssText=i,s.href="https://depicter.com",s.target="_blank",this._wrapper.appendChild(s))}_getWatermarkStyles(){return`
         position: absolute !important;
         bottom: 10px !important;
         left: 10px !important;
         right: auto !important;
         top: auto !important;
         background: rgba(0, 0, 0, 0.7) !important;
         border-radius: 5px !important;
         font: 400 10px/1 Sans-Serif !important;
         color: rgba(215, 215, 215, 1) !important;
         display: inline-flex !important;
         align-items: center !important;
         gap: 2px !important;
         padding: 4px 5px 3px !important;
         letter-spacing: -0.1px !important;
         margin: auto !important;
         visibility: visible !important;
         opacity:1 !important;
         overflow: visible !important;
         text-decoration: none !important;
         `}_getDepicterLogoType(){return'<svg width="54" height="13" fill="none"><path d="M13.032 10.224a3.93 3.93 0 0 1-1.486-.294 3.845 3.845 0 0 1-1.68-1.355 3.701 3.701 0 0 1-.575-1.338 3.677 3.677 0 0 1 .574-2.845 3.767 3.767 0 0 1 1.032-1.01 3.84 3.84 0 0 1 2.135-.64 3.929 3.929 0 0 1 1.487.295 3.837 3.837 0 0 1 1.68 1.355 3.693 3.693 0 0 1 .652 2.092c0 .253-.026.505-.077.753l-.01.042H11.106v.002a2.033 2.033 0 0 0 .449.65 2.084 2.084 0 0 0 .664.44c.258.106.535.161.814.16a2.12 2.12 0 0 0 1.379-.507h2.103a3.7 3.7 0 0 1-.781 1.105 3.838 3.838 0 0 1-2.7 1.095Zm0-5.789a2.118 2.118 0 0 0-1.478.6 2.102 2.102 0 0 0-.449.651l-.014.036h3.883l-.004-.009-.001-.004-.01-.023a2.05 2.05 0 0 0-.758-.901 2.102 2.102 0 0 0-1.169-.35ZM17.677 13V6.988a3.695 3.695 0 0 1 1.084-3.15 3.814 3.814 0 0 1 1.931-1.02 3.927 3.927 0 0 1 2.256.218 3.838 3.838 0 0 1 1.68 1.356 3.7 3.7 0 0 1 .575 1.337 3.696 3.696 0 0 1-.574 2.846 3.774 3.774 0 0 1-1.032 1.01 3.852 3.852 0 0 1-2.135.64 3.929 3.929 0 0 1-1.487-.295 3.86 3.86 0 0 1-.57-.294V13h-1.728Zm3.006-8.404a2.097 2.097 0 0 0-1.113 1.09 2 2 0 0 0 0 1.595 2.033 2.033 0 0 0 .448.65 2.107 2.107 0 0 0 1.478.6 2.115 2.115 0 0 0 1.479-.6 2.073 2.073 0 0 0 .448-.65 2 2 0 0 0 .164-.798 2 2 0 0 0-.357-1.145 2.08 2.08 0 0 0-.92-.742 2.114 2.114 0 0 0-.814-.16c-.28-.001-.556.053-.813.16ZM27.046 2.167c.61 0 1.105-.485 1.105-1.084C28.151.485 27.656 0 27.046 0c-.611 0-1.107.485-1.107 1.083 0 .599.496 1.084 1.107 1.084ZM27.841 2.742h-1.728v7.482h1.728V2.742ZM48.973 10.224V5.417a2.654 2.654 0 0 1 .214-1.041 2.661 2.661 0 0 1 .585-.85 2.736 2.736 0 0 1 1.931-.784h1.936v1.682h-2.04a.91.91 0 0 0-.635.258.876.876 0 0 0-.263.623v4.919h-1.728ZM4 10.148a3.85 3.85 0 0 1-1.93-1.02 3.767 3.767 0 0 1-.818-1.189 3.639 3.639 0 0 1-.3-1.456A3.681 3.681 0 0 1 2.07 3.838 3.825 3.825 0 0 1 4 2.818a3.927 3.927 0 0 1 2.257.218c.21.088.413.193.605.316V0H8.59v6.5a3.694 3.694 0 0 1-.3 1.439 3.703 3.703 0 0 1-.819 1.19 3.835 3.835 0 0 1-2.7 1.095 3.92 3.92 0 0 1-.77-.076Zm-.043-5.552a2.096 2.096 0 0 0-.92.742 2.03 2.03 0 0 0-.357 1.145 2 2 0 0 0 .356 1.145 2.08 2.08 0 0 0 .92.742c.258.107.535.162.814.161a2.116 2.116 0 0 0 1.479-.6 2.069 2.069 0 0 0 .448-.65c.109-.253.165-.524.164-.798a2.001 2.001 0 0 0-.357-1.145 2.072 2.072 0 0 0-.92-.742 2.116 2.116 0 0 0-.814-.161c-.28 0-.556.054-.813.16ZM39.522 10.224a2.816 2.816 0 0 1-1.063-.21 2.749 2.749 0 0 1-1.202-.97 2.653 2.653 0 0 1-.41-.956 2.63 2.63 0 0 1-.056-.538V0h1.728v2.742h1.625v1.693h-1.625V5.72h.007v1.93a.862.862 0 0 0 .264.622.898.898 0 0 0 .635.258h.719v1.693h-.622ZM44.583 10.224a3.928 3.928 0 0 1-1.486-.294 3.845 3.845 0 0 1-1.68-1.355 3.7 3.7 0 0 1-.576-1.338 3.679 3.679 0 0 1 .575-2.845 3.762 3.762 0 0 1 1.032-1.01 3.84 3.84 0 0 1 2.135-.64 3.93 3.93 0 0 1 1.487.295 3.837 3.837 0 0 1 1.68 1.355 3.693 3.693 0 0 1 .652 2.092c0 .253-.026.505-.078.753l-.008.042h-5.66v.002a2.033 2.033 0 0 0 .449.65 2.078 2.078 0 0 0 .664.44c.258.106.535.161.814.16a2.12 2.12 0 0 0 1.378-.507h2.103a3.718 3.718 0 0 1-.78 1.105 3.838 3.838 0 0 1-2.701 1.095Zm0-5.789a2.118 2.118 0 0 0-1.479.6 2.095 2.095 0 0 0-.463.687h3.884a.27.27 0 0 1-.004-.009l-.002-.004a2.05 2.05 0 0 0-.767-.924 2.102 2.102 0 0 0-1.169-.35ZM32.608 10.224a3.929 3.929 0 0 1-1.486-.294 3.846 3.846 0 0 1-1.214-.802 3.763 3.763 0 0 1-.819-1.189 3.653 3.653 0 0 1-.3-1.456 3.68 3.68 0 0 1 1.119-2.645 3.831 3.831 0 0 1 2.7-1.096 3.921 3.921 0 0 1 1.487.294 3.844 3.844 0 0 1 1.214.802 3.764 3.764 0 0 1 .715.97l-1.468.93a2.058 2.058 0 0 0-1.134-1.141 2.116 2.116 0 0 0-.814-.162 2.115 2.115 0 0 0-1.478.6 2.078 2.078 0 0 0-.449.65 2 2 0 0 0-.164.798 2 2 0 0 0 .357 1.145 2.062 2.062 0 0 0 .565.553 2.115 2.115 0 0 0 1.17.35 2.116 2.116 0 0 0 1.478-.6 2.08 2.08 0 0 0 .448-.65l.006-.015 1.465.928a3.732 3.732 0 0 1-.697.934 3.83 3.83 0 0 1-2.7 1.096Z" fill="#D7D7D7"/></svg>'}}),i("dpcCountdown",{script:"./components/countdown/component.js",styles:"./components/countdown/styles.css"}),i("dpcCounter",{script:"./components/counter/component.js",styles:"./components/counter/styles.css"}),i("dpcCircleTimer",{script:"./components/circletimer/component.js",styles:"./components/circletimer/styles.css"}),i("dpcStoriesProgressBar",{script:"./components/storiesprogressbar/component.js",styles:"./components/storiesprogressbar/styles.css"}),i("dpcIframe",{script:"./components/iframe/component.js",styles:"./components/iframe/styles.css"}),i("dpcLottie",{script:"./components/lottie/component.js",styles:"./components/lottie/styles.css"}),i("dpcBeforeAfter",{script:"./components/beforeafter/component.js",styles:"./components/beforeafter/styles.css"}),i("dpcCouponBox",{script:"./components/couponbox/component.js",styles:"./components/couponbox/styles.css"}),i("dpcChoice",{script:"./components/choice/component.js",styles:"./components/choice/styles.css"}),i("dpcMediaChoice",{script:"./components/mediachoice/component.js",styles:"./components/mediachoice/styles.css"}),i("dpcOpinionScale",{script:"./components/opinionscale/component.js",styles:"./components/opinionscale/styles.css"}),i("dpcProgressIndicator",{script:"./components/progressindicator/component.js",styles:"./components/progressindicator/styles.css"});e.registerAddon("deeplink",class{constructor(t){this.composer=t,this.composer.options.register({deeplink:{enable:!1,slug:this.composer.element.id,identifier:"id"}}),this.composer.options.alias("deepLink","deeplink"),this.enable=this.composer.options.get("deeplink.enable"),this.slug=this.composer.options.get("deeplink.slug"),this.identifier=this.composer.options.get("deeplink.identifier"),this.composer.on("init",()=>{requestAnimationFrame(this._afterInit.bind(this))},this,100)}_afterInit(){this.enable&&(this.currentHash="",this.activeSectionIndex=this.composer.navigator.targetIndex,this.currentDeepLink={id:this.slug,activeSectionIndex:this.activeSectionIndex},this.currentDeepLink=this._parseDeepLinksData(),this._updateLocationHash(),this._updateView(),this.composer.on("targetIndexChange",(t,e)=>{this.currentDeepLink=this._parseDeepLinksData(),this.currentDeepLink.activeSectionIndex=e,this._updateLocationHash()},this),window.addEventListener("hashchange",()=>{this.currentDeepLink=this._parseDeepLinksData(),this._updateView()}))}_parseDeepLinksData(){var t=window.location.hash;return t&&(t=t.replace("#","").split("&").find(t=>t.startsWith(this.slug+"/")),this.currentHash=t||""),this.currentHash?this.currentHash.split("/").reduce((t,e)=>({id:t,activeSectionIndex:e?this._findSectionIndex(decodeURIComponent(e)):0})):this.currentDeepLink}_findSectionIndex(i){var t=this.composer.view.sections.findIndex(t=>{var e=t.element.id.replace(this.composer.element.id+"-",""),t=t.element.dataset.name;return e===i||t===i});return-1===t?0:t}_getHashString(){var t=this.currentDeepLink.activeSectionIndex,e=this.composer.view.sections[t].id.replace(this.composer.element.id+"-",""),t=this.composer.view.sections[t].element.dataset.name;return this.slug+"/"+("id"===this.identifier?e:encodeURIComponent(t))}_updateLocationHash(){var t=window.location.hash,e=this._getHashString();this.currentHash?this.currentHash!==e&&(window.location.hash=t.replace(this.currentHash,e)):window.location.hash=t+"&"+e}_updateView(){var t=this.currentDeepLink.activeSectionIndex;this.composer.navigator.targetIndex!==t&&this.composer.navigator.goToIndex(t,{animate:!1},!0)}});let co=["enabled"];e.registerAddon("teaser",class{constructor(t){this.composer=t,this.composerElement=this.composer.element,this.composer.options.register("teaser",{enabled:!0,placement:"tl",vSpace:15,hSpace:15,behavior:"always"}),this.options=this.composer.options.get("teaser"),this.composer.on("afterSetup",this._setup,this)}_setup(){this.teaserSection=this.composerElement.querySelector('[data-type="teaser"]'),this.options.get("enabled")&&(this.teaserSection?(this.teaserSection.parentNode.removeChild(this.teaserSection),this.teaserSection.setAttribute("data-type","section"),this.teaserWidth=this.teaserSection.getAttribute("data-wrapper-width"),this.teaserHeight=this.teaserSection.getAttribute("data-wrapper-height"),this._locateTeaserContainer()):console.warn("Teaser section not found"))}_locateTeaserContainer(){var t=this.composerElement.id+"-teaser",t=(this.teaserContainer=document.createElement("div"),this.teaserContainer.id=t,this.teaserContainer.classList.add(g,g+"-document",g+"-revert",t,g+"-with-display"),document.body.insertBefore(this.teaserContainer,document.body.firstChild),document.createElement("div")),t=(t.className=g+`-loading-container ${g}-loading dotFlashing-dark`,this.teaserContainer.appendChild(t),document.createElement("div")),t=(t.className=g+"-overlay-layers",this.teaserContainer.appendChild(t),this.teaserSection.cloneNode(!0));this.teaserContainer.appendChild(t),this._setupTeaser()}_setupTeaser(){var t=window.Depicter,e=x(this.options.toObject(),co),i=t.setup("."+this.teaserContainer.id,b(b({},this.composer.options.toObject()),{},{layout:"boxed",width:this.teaserWidth,height:this.teaserHeight,useWatermark:!1,addDefaultAnimation:!1,teaser:{enabled:!1}}));t.display(i,{type:"teaser",id:this.teaserContainer.id,className:this.teaserContainer.id+"-display",displayOptions:b({backdrop:!1,clickOutsideClose:!1,closeByEsc:!1,popup:this.composer},e)})}});class po extends t{constructor(t){super(),this.controller=t,this.parentEmitter=t,this.controller.on("afterSetup",this._setup,this)}_setup(){var t=this.controller.displayController,t=(this.element=this.controller.composer.element,this.displayController=t,this.animationWrap=document.createElement("div"),this.animationWrap.classList.add(g+"-display-animation-wrap"),this.animationWrap.appendChild(this.element),t.contentWrap.appendChild(this.animationWrap),t.attachContainer=this.animationWrap,"teaser"!==t.type);this.inOutAnimation=new Gi(this,this.element,this.animationWrap,t),(this.controller.toggleAnimation=this).controller.on("beforeOpen, beforeClose",this._controlAnimation,this)}_updateClassName(t){this._lastStatus&&this.displayController.element.classList.remove(g+"-animation-"+this._lastStatus),this.displayController.element.classList.add(g+"-animation-"+t),this._lastStatus=t}_controlAnimation(t){"beforeOpen"===t?(t=this.hasAnimation("in"),this.show(t),t&&(this._updateClassName("in-start"),this.once("animationInEnd",()=>{this._updateClassName("in-end")}))):(t=this.hasAnimation("out"),this.displayController.detachTrigger.hold(),this.hide(t),t?(this._updateClassName("out-start"),this.once("animationOutEnd",()=>{this.displayController.detachTrigger.exec(),this._updateClassName("out-end")})):this.displayController.detachTrigger.exec())}hasAnimation(t){var e=m(this.inOutAnimation.animationsData);return this.inOutAnimation.hasAnimation(t,e)}}let uo={never:{setBehavior:t=>{document.cookie=`depicter_display_${t}=never_show`+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"},shouldDisplay:t=>-1===document.cookie.indexOf(`depicter_display_${t}=never_show`)},return:{setBehavior:t=>{sessionStorage.setItem("depicter_display_"+t,"true")},shouldDisplay:t=>"true"!==sessionStorage.getItem("depicter_display_"+t)},afterPeriod:{setBehavior:(t,e)=>{t=`depicter_display_${t}=show_again`,e=new Date(Date.now()+1e3*e);document.cookie=t+`; expires=${e.toUTCString()}; path=/`},shouldDisplay:t=>-1===document.cookie.indexOf(`depicter_display_${t}=show_again`)}};let mo=new Map;mo.set("overlay",class{constructor(t){this.controller=t,this.options=this.controller.displayController.options,this.options.register({backdrop:!0}),t.on("afterSetup",this._setup,this)}_setup(){this.options.get("backdrop")&&this._addBackdrop()}_addBackdrop(){var{element:t}=this.controller.displayController,e=document.createElement("div");e.classList.add(g+"-backdrop"),this.controller.on("beforeOpen",()=>{this.element.style.display=""}),this.controller.on("close",()=>{this.element.style.display="none"}),t.appendChild(e),this.element=e}}),mo.set("toggleAnimation",po),mo.set("statusClassName",class{constructor(t){this.controller=t,this.controller.on("beforeClose",()=>{this._updateClassName("before-close")}),this.controller.on("close",()=>{this._updateClassName("close")}),this.controller.on("beforeOpen",()=>{this._updateClassName("before-open")}),this.controller.on("open",()=>{this._updateClassName("open")}),t.composer.on("visibilityChange",(t,e)=>{this.controller.element.classList[e?"add":"remove"](g+"-visibility-hidden")})}_updateClassName(t){this._lastStatus&&this.controller.element.classList.remove(g+"-status-"+this._lastStatus),this.controller.element.classList.add(g+"-status-"+t),this._lastStatus=t}}),mo.set("displayAgain",class{constructor(t){this.controller=t,this.controller.options.register({displayAgain:"once",displayAgainPeriod:0}),t.on("afterSetup",this._setup,this),this.controller.doSetupTriggers.hold()}_setup(){var t=this.controller.options,e=t.get("displayAgain"),t=t.get("id");uo[e]&&!uo[e].shouldDisplay(t)?this.controller.doSetupTriggers.invalidate():(this.controller.doSetupTriggers.exec(),this.controller.on("close",this._afterClose,this))}_afterClose(){var t=this.controller.options,e=t.get("displayAgain"),i=t.get("id"),t=t.get("displayAgainPeriod");"always"===e?this.controller.evaluateTriggers(!0):this.controller.cleanupTriggers(),null!=(e=uo[e])&&e.setBehavior(i,60*t)}}),mo.set("displayActions",class{constructor(t){this.controller=t,this.composer=this.controller.composer,this.composer.on("afterSetupActions",this._setup,this)}_setup(t,e){this.composer.actions=b(b({},e),{},{close:()=>{this.controller.close()}})}}),mo.set("closeBy",class{constructor(t){this.controller=t,this.options=this.controller.displayController.options,this.options.register({clickOutsideClose:!0,closeByEsc:!0}),t.on("afterSetup",this._setup,this)}_setup(){if(this.options.get("clickOutsideClose")){let{element:t,composer:{element:e}}=this.controller;t.addEventListener("click",t=>{e.contains(t.target)||this.controller.close()})}this.options.get("closeByEsc")&&document.addEventListener("keydown",t=>{"Escape"===t.key&&this.controller.close()})}}),mo.set("fitToView",class{constructor(t){this.controller=t,this.composer=this.controller.composer,this.options=this.controller.displayController.options,this.options.register({fitToView:!0}),this.composer.on("beforeViewResize",this.update,this)}update(){var t,e,i;(this.options.get("fitToView")||"boxed"===this.composer.options.get("layout"))&&(t=m(this.composer.options.get("height")),e=m(this.composer.options.get("width"))/t,i=window.innerHeight,window.innerHeight<=t)&&(this.composer.element.style.maxWidth=i*e+"px",this.controller.displayController.contentWrap.style.maxWidth=i*e+"px")}});class go extends t{constructor(t,e){super(),this.composer=e,this.eventPrefix="display",this.parentEmitter=t,this.controller=t,this.options=new r,this._doDetach=this._doDetach.bind(this),this.type="base"}setup(){this.element=document.createElement("div"),this.element.classList.add(g+"-display-container"),this.element.classList.add(g+`-${this.type}-container`),this.contentWrap=document.createElement("div"),this.contentWrap.classList.add(g+"-content-wrap"),this.element.appendChild(this.contentWrap);var t=this.controller.options.get("className");t&&this.element.classList.add(t),this.controller.element=this.element,this.composer.on("layoutSetup",()=>{var t=this.composer.options.get("layout");"boxed"===t&&$(this.composer.options.get("width"),t=>{this.contentWrap.style.maxWidth=t+"px"}),this.element.classList.add(g+"-content-layout-"+t)}),this.detachTrigger=new h(this._doDetach),this.attachContainer=this.contentWrap}_doDetach(){this.composer.detach(),this.trigger("close"),this.detachTrigger.reset()}open(t=!0){var e;this.isOpen||(this.isOpen=!0,this.trigger("beforeOpen"),t&&null!=(t=this.composer)&&null!=(t=t.navigator)&&null!=(e=t.goToIndex)&&e.call(t,0,{animate:!1}),this.composer.attach(this.attachContainer),this.trigger("open"))}close(){this.isOpen&&(this.isOpen=!1,this.trigger("beforeClose"),this.detachTrigger.exec())}toggle(){this.isOpen?this.close():this.open()}}class vo extends go{constructor(t,e){super(t,e),this.options.register({placement:"top",position:"sticky",space:0,placeHolder:void 0}),this.type="banner-bar"}setup(){super.setup(),this.locateContainer()}locateContainer(){this.element.parentElement&&this.element.remove();var t=this.options.get("placement"),e=this.options.get("placeHolder"),i=this.options.get("position"),e=document.querySelector(e)||document.body,i=(this.element.classList.add(g+"-placement-"+t),this.element.classList.add(g+"-position-"+i),d(this.options.get("space")||0,"px"));"top"===t?(e.prepend(this.element),this.element.style.top=i):"bottom"===t&&(e.appendChild(this.element),this.element.style.bottom=i)}}class _o extends go{constructor(t,e){super(t,e),this.options.register({placement:"mc",vSpace:0,hSpace:0}),this.type="popup"}setup(){super.setup(),this.locateContainer()}locateContainer(){this.element.parentElement&&this.element.remove();var t=this.options.get("placement"),e=this.options.get("placeHolder"),e=document.querySelector(e)||document.body,[t,i]=t,s=(this.element.classList.add(g+"-placement-h-"+i),this.element.classList.add(g+"-placement-v-"+t),this.options.get("vSpace")),n=this.options.get("hSpace");"c"!==i&&n&&(this.contentWrap.style.marginLeft=d(n,"px"),this.contentWrap.style.marginRight=d(n,"px")),"v"!==t&&s&&(this.contentWrap.style.marginTop=d(s,"px"),this.contentWrap.style.marginBottom=d(s,"px")),e.appendChild(this.element)}}class fo extends go{constructor(t,e){super(t,e),this.options.register({placement:"mc",vSpace:0,hSpace:0,backdrop:!1,clickOutsideClose:!1,closeByEsc:!1,popup:"",behavior:"always"}),this.type="teaser"}setup(){this.popup=this.options.get("popup"),this.popup?(super.setup(),this.close(),requestAnimationFrame(()=>{this.setupEvents(),this.handleBehavior()})):console.warn("TeaserDisplay requires a popup option to be set.")}handleBehavior(){var t=this.options.get("behavior");this.locateContainer(),"afterClose"===t&&(this.popup.display.displayController.on("beforeOpen",()=>{this.element.style.display="none"}),this.popup.display.displayController.on("beforeClose",()=>{this.element.style.display=""}),this.popup.display.displayController.on("close",()=>{this.open()}),this.popup.display.displayController.on("open",()=>{this.close()}))}locateContainer(){this.element.parentElement&&this.element.remove();var{placement:t,placeHolder:e,vSpace:i,hSpace:s}=this.options.toObject(),e=document.querySelector(e)||document.body,[t,n]=t;this.element.classList.add(g+"-placement-h-"+n),this.element.classList.add(g+"-placement-v-"+t),"c"!==n&&s&&("l"===n?this.contentWrap.style.marginLeft=d(s,"px"):this.contentWrap.style.marginRight=d(s,"px")),"m"!==t&&i&&("t"===t?this.element.style.top=d(i,"px"):this.element.style.bottom=d(i,"px")),e.appendChild(this.element)}setupEvents(){this.contentWrap.addEventListener("click",()=>{this.popup.display.toggle()})}}let yo=new Map;yo.set("banner-bar",vo),yo.set("popup",_o),yo.set("teaser",fo);var ni=({event:n,selector:o},r)=>new Promise(s=>{if(["click","mousedown","mouseup"].includes(n)){let t=t=>{t.target.closest(o)&&(s(t),e())},e=()=>{document.removeEventListener(n,t,!0)};null!=r&&r.push(e),document.addEventListener(n,t,!0)}else{let t=document.querySelectorAll(o),e=t=>{s(t),i()},i=()=>{t.forEach(t=>t.removeEventListener(n,e))};null!=r&&r.push(i),t.forEach(t=>t.addEventListener(n,e))}}),ci=({selector:r,time:a},h)=>new Promise(t=>{let e=document.querySelectorAll(r),i,s=()=>{i=setTimeout(()=>{t(!0),o()},1e3*a)},n=()=>{clearTimeout(i)},o=(e.forEach(t=>{t.addEventListener("mouseover",s),t.addEventListener("mouseout",n)}),()=>{e.forEach(t=>{t.removeEventListener("mouseover",s),t.removeEventListener("mouseout",n)})});null!=h&&h.push(o)}),wo=(ci.multiple=ni.multiple=!0,Object.freeze({__proto__:null,interact:ni,wait:({duration:e})=>new Promise(t=>setTimeout(t,1e3*e)),scroll:({percentage:o},t)=>new Promise(i=>{function s(){var t=window.pageYOffset,e=document.documentElement.scrollHeight-document.documentElement.clientHeight;o<=t/e*100?(i(),n()):window.requestAnimationFrame(s)}let n=()=>{window.removeEventListener("scroll",s)};null!=t&&t.push(n),window.addEventListener("scroll",s),s()}),exitIntent:({thresholdArea:d=0,delay:p=0}={},u)=>new Promise(t=>{let e=null,i=!0,s=(window.history.pushState(null,null,window.location.href),()=>{i&&(i=!1,clearTimeout(e),e=setTimeout(()=>{t(),c()},p))}),n=()=>{i&&clearTimeout(e)},o=()=>{n()},r=t=>{t.clientY<=d&&s()},a=()=>{window.history.pushState(null,null,window.location.href),s()},h=()=>{document.hidden&&s()},l=()=>{window.scrollY<=0&&s()},c=()=>{window.removeEventListener("popstate",a),window.removeEventListener("mouseout",r),window.removeEventListener("mouseenter",o),window.removeEventListener("scroll",l),document.removeEventListener("visibilitychange",h),clearTimeout(e)};u&&u.push(c),window.addEventListener("popstate",a),window.addEventListener("mouseout",r),window.addEventListener("mouseenter",o),window.addEventListener("scroll",l),document.addEventListener("visibilitychange",h)}),inactivity:({duration:n},o)=>new Promise(t=>{let e=setTimeout(()=>{t()},1e3*n),i=()=>{clearTimeout(e),e=setTimeout(()=>{t(),s()},1e3*n)},s=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("keydown",i),document.removeEventListener("scroll",i)};null!=o&&o.push(s),document.addEventListener("mousemove",i),document.addEventListener("keydown",i),document.addEventListener("scroll",i)}),waitForHover:ci,scrollToElement:({selector:t},e)=>new Promise(i=>{let s=document.querySelector(t);if(!s)return void console.error(`Element with selector '${t}' not found.`);function n(){var t=s.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight;t.top<=e?(i(),o()):window.requestAnimationFrame(n)}let o=()=>{window.removeEventListener("scroll",n)};null!=e&&e.push(o),window.addEventListener("scroll",n),n()})}));let bo=(t,s,n=!1)=>(t=t.map(({name:t,params:e})=>{var i;return(!n||null!=wo&&null!=(i=wo[t])&&i.multiple)&&(null==wo?void 0:wo[t](e,s))||!1}).filter(t=>t),Promise.race(t)),xo=[{name:"wait",params:{duration:.01}}];class So extends t{constructor(t,e={},i=xo){super(),this.options=new r,this.triggers=i,this.options.register({type:"popup",id:"",displayOptions:{},excludeAddons:[],className:""}),this.options.inject(e),(this.composer=t).display=this;i=yo.get(this.options.get("type"));this.displayController=new i(this,t),this._firstTriggerEvaluation=!0,this.open=this.displayController.open.bind(this.displayController),this.close=this.displayController.close.bind(this.displayController),this.toggle=this.displayController.toggle.bind(this.displayController),this.options.chain("displayOptions",this.displayController.options),this._setupTriggers=this._setupTriggers.bind(this),this.doSetupTriggers=new h(this._setupTriggers)}setup(){this.trigger("beforeSetup"),this._setupAddons(),this.displayController.setup(),this.trigger("afterSetup"),this.doSetupTriggers.exec()}cleanupTriggers(){this.triggersCleanup.forEach(t=>t())}evaluateTriggers(i=!1){this.composer.isHidden?this.composer.on("visibilityChange",(t,e)=>{!e&&this._firstTriggerEvaluation&&(this._firstTriggerEvaluation=!1,this.evaluateTriggers(i))}):bo(this.triggers,this.triggersCleanup,i).then(()=>{this.composer.isHidden||(this.trigger("triggers"),this.open(),this.cleanupTriggers())})}_setupTriggers(){this.trigger("beforeTriggersSetup"),this.triggersCleanup=[],requestAnimationFrame(()=>{this.evaluateTriggers()}),this.trigger("afterTriggersSetup")}_setupAddons(){this.addons={};let i=this.options.get("excludeAddons");this.trigger("beforeSetupAddons"),mo.forEach((t,e)=>{i.includes(e)||(this.addons[e]=new t(this))}),this.trigger("afterSetupAddons")}}var Ao,s,ko,Co,Lo=0,Eo=[],D=I,Io=D.__b,Po=D.__r,To=D.diffed,Oo=D.__c,Mo=D.unmount,Do=D.__;function Bo(t,e){D.__h&&D.__h(s,t,Lo||e),Lo=0;e=s.__H||(s.__H={__:[],__h:[]});return t>=e.__.length&&e.__.push({}),e.__[t]}function zo(t){return Lo=1,Vo(Jo,t)}function Vo(t,e,i){var n,o,r,a=Bo(Ao++,2);return a.t=t,a.__c||(a.__=[i?i(e):Jo(void 0,e),function(t){var e=(a.__N||a.__)[0],t=a.t(e,t);e!==t&&(a.__N=[t,a.__[1]],a.__c.setState({}))}],(a.__c=s).__f)||(n=function(t,e,i){var s,n;return!a.__c.__H||((s=a.__c.__H.__.filter(function(t){return!!t.__c})).every(function(t){return!t.__N})?!o||o.call(this,t,e,i):(n=a.__c.props!==t,s.forEach(function(t){var e;t.__N&&(e=t.__[0],t.__=t.__N,t.__N=void 0,e!==t.__[0])&&(n=!0)}),o&&o.call(this,t,e,i)||n))},s.__f=!0,o=s.shouldComponentUpdate,r=s.componentWillUpdate,s.componentWillUpdate=function(t,e,i){var s;this.__e&&(s=o,o=void 0,n(t,e,i),o=s),r&&r.call(this,t,e,i)},s.shouldComponentUpdate=n),a.__N||a.__}function Ho(t,e){var i=Bo(Ao++,3);!D.__s&&Ko(i.__H,e)&&(i.__=t,i.u=e,s.__H.__h.push(i))}function No(t,e){var i=Bo(Ao++,4);!D.__s&&Ko(i.__H,e)&&(i.__=t,i.u=e,s.__h.push(i))}function Fo(t){return Lo=5,Wo(function(){return{current:t}},[])}function Ro(e,i,t){Lo=6,No(function(){var t;return"function"==typeof e?(t=e(i()),function(){e(null),t&&"function"==typeof t&&t()}):e?(e.current=i(),function(){return e.current=null}):void 0},null==t?t:t.concat(e))}function Wo(t,e){var i=Bo(Ao++,7);return Ko(i.__H,e)&&(i.__=t(),i.__H=e,i.__h=t),i.__}function jo(t,e){return Lo=8,Wo(function(){return t},e)}function $o(t){var e=s.context[t.__c],i=Bo(Ao++,9);return i.c=t,e?(null==i.__&&(i.__=!0,e.sub(s)),e.props.value):t.__}function qo(t,e){D.useDebugValue&&D.useDebugValue(e?e(t):t)}function Yo(){var t=Bo(Ao++,11);if(!t.__){for(var e=s.__v;null!==e&&!e.__m&&null!==e.__;)e=e.__;var i=e.__m||(e.__m=[0,0]);t.__="P"+i[0]+"-"+i[1]++}return t.__}function Xo(){for(var e;e=Eo.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Zo),e.__H.__h.forEach(Go),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(t){s=null,Io&&Io(t)},D.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Do&&Do(t,e)},D.__r=function(t){Po&&Po(t),Ao=0;t=(s=t.__c).__H;t&&(ko===s?(t.__h=[],s.__h=[],t.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(t.__h.forEach(Zo),t.__h.forEach(Go),t.__h=[],Ao=0)),ko=s},D.diffed=function(t){To&&To(t);t=t.__c;t&&t.__H&&(!t.__H.__h.length||1!==Eo.push(t)&&Co===D.requestAnimationFrame||((Co=D.requestAnimationFrame)||function(t){function e(){clearTimeout(s),Uo&&cancelAnimationFrame(i),setTimeout(t)}var i,s=setTimeout(e,100);Uo&&(i=requestAnimationFrame(e))})(Xo),t.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ko=s=null},D.__c=function(t,i){i.some(function(e){try{e.__h.forEach(Zo),e.__h=e.__h.filter(function(t){return!t.__||Go(t)})}catch(t){i.some(function(t){t.__h&&(t.__h=[])}),i=[],D.__e(t,e.__v)}}),Oo&&Oo(t,i)},D.unmount=function(t){Mo&&Mo(t);var e,t=t.__c;t&&t.__H&&(t.__H.__.forEach(function(t){try{Zo(t)}catch(t){e=t}}),t.__H=void 0,e)&&D.__e(e,t.__v)};var Uo="function"==typeof requestAnimationFrame;function Zo(t){var e=s,i=t.__c;"function"==typeof i&&(t.__c=void 0,i()),s=e}function Go(t){var e=s;t.__c=t.__(),s=e}function Ko(i,t){return!i||i.length!==t.length||t.some(function(t,e){return t!==i[e]})}function Jo(t,e){return"function"==typeof e?e(t):e}function Qo(t,e){for(var i in e)t[i]=e[i];return t}function tr(t,e){for(var i in t)if("__source"!==i&&!(i in e))return!0;for(var s in e)if("__source"!==s&&t[s]!==e[s])return!0;return!1}function er(t,e){var i=e(),s=zo({t:{__:i,u:e}}),n=s[0].t,o=s[1];return No(function(){n.__=i,n.u=e,ir(n)&&o({t:n})},[t,i,e]),Ho(function(){return ir(n)&&o({t:n}),t(function(){ir(n)&&o({t:n})})},[t]),i}function ir(t){var e=t.u,i=t.__;try{var s=e();return(i!==s||0===i&&1/i!=1/s)&&(i==i||s==s)}catch(t){return 1}}function sr(t){t()}function nr(t){return t}function or(){return[!1,sr]}vi=No;function rr(t,e){this.props=t,this.context=e}(rr.prototype=new O).isPureReactComponent=!0,rr.prototype.shouldComponentUpdate=function(t,e){return tr(this.props,t)||tr(this.state,e)};var ar=I.__b,hr=(I.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ar&&ar(t)},"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911);function lr(t,e){return null==t?null:M(M(t).map(e))}var Pi={map:lr,forEach:lr,count:function(t){return t?M(t).length:0},only:function(t){t=M(t);if(1!==t.length)throw"Children.only";return t[0]},toArray:M},cr=I.__e,dr=(I.__e=function(t,e,i,s){if(t.then)for(var n,o=e;o=o.__;)if((n=o.__c)&&n.__c)return null==e.__e&&(e.__e=i.__e,e.__k=i.__k),n.__c(t,e);cr(t,e,i,s)},I.unmount);function pr(){this.__u=0,this.o=null,this.__b=null}function ur(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function mr(){this.i=null,this.l=null}I.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),dr&&dr(t)},(pr.prototype=new O).__c=function(t,e){function i(){r||(r=!0,s.__R=null,o?o(a):a())}var s=e.__c,n=this,o=(null==n.o&&(n.o=[]),n.o.push(s),ur(n.__v)),r=!1,a=(s.__R=i,function(){var t,e;if(!--n.__u)for(n.state.__a&&(t=n.state.__a,n.__v.__k[0]=function e(t,i,s){return t&&s&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return e(t,i,s)}),t.__c)&&t.__c.__P===i&&(t.__e&&s.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=s),t}(t,t.__c.__P,t.__c.__O)),n.setState({__a:n.__b=null});e=n.o.pop();)e.forceUpdate()});n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(i,i)},pr.prototype.componentWillUnmount=function(){this.o=[]},pr.prototype.render=function(t,e){this.__b&&(this.__v.__k&&(s=document.createElement("div"),i=this.__v.__k[0].__c,this.__v.__k[0]=function e(t,i,s){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(t){"function"==typeof t.__c&&t.__c()}),t.__c.__H=null),null!=(t=Qo({},t)).__c&&(t.__c.__P===s&&(t.__c.__P=i),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return e(t,i,s)})),t}(this.__b,s,i.__O=i.__P)),this.__b=null);var i,s=e.__a&&E(T,null,t.fallback);return s&&(s.__u&=-33),[E(T,null,e.__a?null:t.children),s]};function gr(t,e,i){if(++i[1]===i[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(i=t.i;i;){for(;3<i.length;)i.pop()();if(i[1]<i[0])break;t.i=i=i[2]}}function vr(t){return this.getChildContext=function(){return t.context},t.children}function _r(t){var i=this,e=t.h;i.componentWillUnmount=function(){Pn(null,i.v),i.v=null,i.h=null},i.h&&i.h!==e&&i.componentWillUnmount(),i.v||(i.h=e,i.v={nodeType:1,parentNode:e,childNodes:[],contains:function(){return!0},appendChild:function(t){this.childNodes.push(t),i.h.appendChild(t)},insertBefore:function(t,e){this.childNodes.push(t),i.h.insertBefore(t,e)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),i.h.removeChild(t)}}),Pn(E(vr,{context:i.context},t.__v),i.v)}(mr.prototype=new O).__a=function(i){var s=this,n=ur(s.__v),o=s.l.get(i);return o[0]++,function(t){function e(){s.props.revealOrder?(o.push(t),gr(s,i,o)):t()}n?n(e):e()}},mr.prototype.render=function(t){this.i=null,this.l=new Map;var e=M(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var i=e.length;i--;)this.l.set(e[i],this.i=[1,0,this.i]);return t.children},mr.prototype.componentDidUpdate=mr.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(t,e){gr(i,e,t)})};var fr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,yr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,wr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,br=/[A-Z0-9]/g,xr="undefined"!=typeof document;O.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(O.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Sr=I.event;function Ar(){}function kr(){return this.cancelBubble}function Cr(){return this.defaultPrevented}var Lr,Er={enumerable:!(I.event=function(t){return(t=Sr?Sr(t):t).persist=Ar,t.isPropagationStopped=kr,t.isDefaultPrevented=Cr,t.nativeEvent=t}),configurable:!0,get:function(){return this.class}},Ir=I.vnode,Pr=(I.vnode=function(t){if("string"==typeof t.type){var e=t,i,s,n=e.props,o=e.type,r={},a=-1===o.indexOf("-");for(i in n){var h,l=n[i];"value"===i&&"defaultValue"in n&&null==l||xr&&"children"===i&&"noscript"===o||"class"===i||"className"===i||(h=i.toLowerCase(),"defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===l?l="":"translate"===h&&"no"===l?l=!1:"o"===h[0]&&"n"===h[1]?"ondoubleclick"===h?i="ondblclick":"onchange"!==h||"input"!==o&&"textarea"!==o||(s=n.type,("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(s))?"onfocus"===h?i="onfocusin":"onblur"===h?i="onfocusout":wr.test(i)&&(i=h):h=i="oninput":a&&yr.test(i)?i=i.replace(br,"-$&").toLowerCase():null===l&&(l=void 0),"oninput"===h&&r[i=h]&&(i="oninputCapture"),r[i]=l)}"select"==o&&r.multiple&&Array.isArray(r.value)&&(r.value=M(n.children).forEach(function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)})),"select"==o&&null!=r.defaultValue&&(r.value=M(n.children).forEach(function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",Er)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r}t.$$typeof=fr,Ir&&Ir(t)},I.__r),Tr=(I.__r=function(t){Pr&&Pr(t),Lr=t.__c},I.diffed);function Or(t){return!!t&&t.$$typeof===fr}I.diffed=function(t){Tr&&Tr(t);var e=t.props,i=t.__e;null!=i&&"textarea"===t.type&&"value"in e&&e.value!==i.value&&(i.value=null==e.value?"":e.value),Lr=null};Mi={useState:zo,useId:Yo,useReducer:Vo,useEffect:Ho,useLayoutEffect:No,useInsertionEffect:vi,useTransition:or,useDeferredValue:nr,useSyncExternalStore:er,startTransition:sr,useRef:Fo,useImperativeHandle:Ro,useMemo:Wo,useCallback:jo,useContext:$o,useDebugValue:qo,version:"18.3.1",Children:Pi,render:function(t,e,i){return null==e.__k&&(e.textContent=""),Pn(t,e),"function"==typeof i&&i(),t?t.__c:null},hydrate:function(t,e,i){return Tn(t,e),"function"==typeof i&&i(),t?t.__c:null},unmountComponentAtNode:function(t){return!!t.__k&&(Pn(null,t),!0)},createPortal:function(t,e){return(t=E(_r,{__v:t,h:e})).containerInfo=e,t},createElement:E,createContext:function(t){function s(t){var i,e;return this.getChildContext||(i=new Set,((e={})[s.__c]=this).getChildContext=function(){return e},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&i.forEach(function(t){t.__e=!0,wn(t)})},this.sub=function(t){i.add(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){i&&i.delete(t),e&&e.call(t)}}),t.children}return s.__c="__cC"+pn++,s.__=t,s.Provider=s.__l=(s.Consumer=function(t,e){return t.children(e)}).contextType=s},createFactory:function(t){return E.bind(null,t)},cloneElement:function(t){return Or(t)?function(t,e,i){var s,n,o,r,a=P({},t.props);for(o in t.type&&t.type.defaultProps&&(r=t.type.defaultProps),e)"key"==o?s=e[o]:"ref"==o?n=e[o]:a[o]=(void 0===e[o]&&void 0!==r?r:e)[o];return 2<arguments.length&&(a.children=3<arguments.length?en.call(arguments,2):i),fn(t.type,a,s||t.key,n||t.ref,null)}.apply(null,arguments):t},createRef:function(){return{current:null}},Fragment:T,isValidElement:Or,isElement:Or,isFragment:function(t){return Or(t)&&t.type===T},isMemo:function(t){return!!t&&!!t.displayName&&("string"==typeof t.displayName||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")},findDOMNode:function(t){return t&&(t.base||1===t.nodeType&&t)||null},Component:O,PureComponent:rr,memo:function(e,s){function i(t){var e=this.props.ref,i=e==t.ref;return!i&&e&&(e.call?e(null):e.current=null),s?!s(this.props,t)||!i:tr(this.props,t)}function t(t){return this.shouldComponentUpdate=i,E(e,t)}return t.displayName="Memo("+(e.displayName||e.name)+")",t.prototype.isReactComponent=!0,t.__f=!0,t},forwardRef:function(i){function t(t){var e=Qo({},t);return delete e.ref,i(e,t.ref||null)}return t.$$typeof=hr,(t.render=t).prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(i.displayName||i.name)+")",t},flushSync:function(t,e){return t(e)},unstable_batchedUpdates:function(t,e){return t(e)},StrictMode:T,Suspense:pr,SuspenseList:mr,lazy:function(e){var i,s,n;function t(t){if(i||(i=e()).then(function(t){s=t.default||t},function(t){n=t}),n)throw n;if(s)return E(s,t);throw i}return t.displayName="Lazy",t.__f=!0,t},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:{current:{readContext:function(t){return Lr.__n[t.__c].props.value},useCallback:jo,useContext:$o,useDebugValue:qo,useDeferredValue:nr,useEffect:Ho,useId:Yo,useImperativeHandle:Ro,useInsertionEffect:vi,useLayoutEffect:No,useMemo:Wo,useReducer:Vo,useRef:Fo,useState:zo,useSyncExternalStore:er,useTransition:or}}}};function Mr(t){if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{console.log("Copied to clipboard!")}).catch(t=>{console.error("Failed to copy: ",t)});else{var e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{var i=document.execCommand("copy")?"Copied to clipboard!":"Failed to copy";console.log(i)}catch(t){console.error("Fallback: Oops, unable to copy",t)}document.body.removeChild(e)}}let Dr=[];window.depicterInstances=Dr;class B extends e{static setup(t,i){t=Array.from(document.querySelectorAll(t)).filter(e=>!Dr.find(({element:t})=>t===e)).map(t=>{var e=new B;return e.setup(t,i),Dr.push(e),e});return null==t?void 0:t[0]}setup(t,e={}){super.setup(t,e),this.options.register({})}}B.version="4.0.4",B.author={name:"Averta",url:"https://averta.net"},B.display=(t,e,i)=>{t=new So(t,e,i);return t.setup(),t},B.jsActions={};Ci=document.currentScript,B.basePath=Ci.src.slice(0,Ci.src.lastIndexOf("/")+1),(xi=B).h??=E,xi.PreactCompat??=Mi,xi.f??=Mi.Fragment,He=window.Depicter;function Br(){window.DepicterDisableAutoInit||(window.Depicter.jsActions=window.Depicter.jsActions||{},B.initAll())}return He&&He!==B&&(console.warn("Another instance of Depicter module found on the page. Merging properties."),He.env&&(B.env=He.env),He.externalLayers)&&(B.externalLayers=He.externalLayers),(We=B).Layer=L,We.Layers=y,We.env={prefix:g,isTouch:F,has:v},We.utils={loadPicture:Qi,copyTextToClipboard:Mr},"undefined"!=typeof window&&(window.Depicter=We),B.externalLayers||(B.externalLayers={}),window.Depicter.externalLayers||(window.Depicter.externalLayers={}),"complete"===document.readyState?setTimeout(Br,20):document.addEventListener("DOMContentLoaded",Br),B});
//# sourceMappingURL=depicter.js.map

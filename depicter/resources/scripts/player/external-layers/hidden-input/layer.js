!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s=t();for(var i in s)("object"==typeof exports?exports:e)[i]=s[i]}}(Depicter,(()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const{Layer:t,env:s}=window.Depicter;return window.Depicter.externalLayers.hiddenInput=class extends t{constructor(e,t,i,o,r,a){super(e,t,i,o,r,a),this.type="hiddenInput",this.frame.classList.add(`${s.prefix}-hidden-input-layer`),this.frame.classList.add(`${s.prefix}-no-swipe`),this.element.classList.add(`${s.prefix}-hidden-input`);const{source:n="static",sourceKey:c=""}=this.element.dataset;this.source=n,this.sourceKey=c,this.input=this.element.querySelector("input"),this._getHiddenInputValue()}_setupContent(){const e=this.holder.composer?.survey?.form??this.element.closest("form"),t=e?.getAttribute("data-local-id")||e?.id;this.holder.composer.layersById[t]&&(this.formLayer=this.holder.composer.layersById[t]),this.formLayer&&this.formLayer.on("formSubmit",this._getHiddenInputValue.bind(this))}_getHiddenInputValue(){let e="";switch(this.source){case"static":default:e=this.sourceKey;break;case"query":e=new URLSearchParams(window.location.search).get(this.sourceKey)||"";break;case"localStorage":e=localStorage.getItem(this.sourceKey)||"";break;case"sessionStorage":e=sessionStorage.getItem(this.sourceKey)||"";break;case"cookie":e=document.cookie.split("; ").find((e=>e.startsWith(`${this.sourceKey}=`)))?.split("=")[1]||"";break;case"globalVariable":{const t=this.sourceKey.split(".").reduce(((e,t)=>e?.[t]),window)||"";e="string"==typeof t?t:JSON.stringify(t)||"";break}}this.value=e,this.input.value=e}},e})()));